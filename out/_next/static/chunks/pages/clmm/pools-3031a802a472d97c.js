(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9401],{91902:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clmm/pools",function(){return i(46406)}])},74617:function(e,t,i){"use strict";i.d(t,{q:function(){return a}});var l=i(94678),s=i(2148),n=i(9191),o=i(52225);function a(){(0,o.Z)(()=>{let e=(0,n.Jt)("ui-time-basis");e&&(l.ZP.setState({timeBasis:e}),s.O.setState({timeBasis:e}))})}},29197:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var l=i(85893),s=i(18074),n=i(27993),o=i(66180),a=i(45826),c=i(91107);function r(e){let{className:t,style:i,vertical:s,itemClassName:a,itemStyle:r,values:d,currentValue:m=d[0],labels:u=d,onChange:x}=e;return d.filter(Boolean).length?(0,l.jsx)(c.E,{value:m,onChange:null!=x?x:()=>{},className:(0,o.m)("".concat(s?"flex-col":"flex"," ").concat(null!=t?t:"")),style:i,children:d.map((e,t,i)=>(0,l.jsx)(c.E.Option,{value:e,className:"cursor-pointer flex grow",children:o=>{let{checked:c}=o;return e&&(0,l.jsx)("div",{className:"grid grow ".concat(s?"":"place-items-center"," ").concat((0,n.u)(a,[c])),style:(0,n.u)(r,[c,t,i]),children:(0,n.u)(u[t],[c,t,i])})}},t))}):(0,l.jsx)(l.Fragment,{})}function d(e){let{size:t,$valuesLength:i,$transparentBg:c,urlSearchQueryKey:d,className:m,...u}=e;(0,a.i)({currentValue:u.currentValue,values:u.values,onChange:u.onChange,queryKey:d});let x=u.currentValue&&u.values.includes(u.currentValue),f=null!=i?i:u.values.length,p=(x?u.values.findIndex(e=>e===u.currentValue):0)+0;return(0,l.jsx)(r,{...u,currentValue:u.currentValue,className:(0,o.m)("rounded-full p-1",c?"bg-transparent":"bg-cyberpunk-card-bg",m),itemClassName:e=>(0,o.m)("sm"===t?"min-w-[82px] mobile:min-w-[64px] px-2 mobile:px-1.5 h-7 mobile:h-5 text-sm mobile:text-xs":"min-w-[96px] mobile:min-w-[76px] px-3 mobile:px-2 h-9 mobile:h-7 text-sm mobile:text-xs ","grid rounded-full place-items-center font-medium whitespace-nowrap ".concat(e?"text-white":"text-[#ABC4FF]"),(0,n.u)(u.itemClassName,[e])),itemStyle:e=>e?{background:"linear-gradient(245.22deg, rgb(218, 46, 239), rgb(43, 106, 255), rgb(57, 208, 216))",backgroundSize:"".concat(f,"00% 100%"),backgroundPosition:(0,s.Z)(1/(f-1)*p)}:{}})}},49128:function(e,t,i){"use strict";i.d(t,{Q:function(){return o}});var l=i(81451),s=i(84207),n=i(18074);function o(e,t){let i=(0,s.Z)(null!=e?e:0);return((null==t?void 0:t.alreadyPercented)||(i=i.mul(100)),(0,l.gt)(i,9999.99))?">9,999.99%":(0,n.Z)(i,{alreadyPercented:!0})}},41618:function(e,t,i){"use strict";i.d(t,{Z:function(){return s}});var l=i(67294);function s(e,t){let i=(0,l.useRef)(!1),s=()=>i.current=!0;(0,l.useEffect)(()=>{if(!i.current)return e({runed:s})},t)}},46406:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return tn}});var l=i(85893),s=i(67294),n=i(72305),o=i(73944),a=i(66180),c=i(91371),r=i(74617),d=i(25222),m=i(34003),u=i(3363),x=i(62952),f=i(81451),p=i(71375),h=i(72573),v=i(83496),b=i(14200),g=i(475),j=i(79938),Z=i(53002),N=i(94678);async function P(e){let{coin1:t,coin2:i,liquidity:l,targetUserPositionAccount:s,currentAmmPool:o,coin1Amount:a,coin2Amount:c,coin1AmountMin:r,coin2AmountMin:d}=N.ZP.getState(),{tokenAccountRawInfos:P,txVersion:y}=Z.Z.getState();(0,m.Z)(o,"not seleted amm pool"),(0,m.Z)(t,"not set coin1"),(0,m.Z)(i,"not set coin2"),(0,m.Z)(null!=l,"not set liquidity"),(0,m.Z)(s,"not set targetUserPositionAccount");let w=(0,x.n)(t,r,{alreadyDecimaled:!0}),k=(0,b.W)(t)?(0,v.w)({amount:w}):void 0,A=(0,x.n)(i,d,{alreadyDecimaled:!0}),C=(0,b.W)(i)?(0,v.w)({amount:A}):void 0;return(0,j.ZP)(async a=>{let{transactionCollector:c,baseUtils:{connection:x,owner:v}}=a,[b,Z]=await Promise.all([k,C]);if(null==e?void 0:e.closePosition){let{innerTransactions:e}=await n.jsJ.makeCLosePositionInstructionSimple({connection:x,poolInfo:o.state,ownerInfo:{feePayer:v,wallet:v},ownerPosition:s.sdkParsed,makeTxVersion:y,lookupTableCache:j.eq});c.add(e,{txHistoryInfo:{title:"Position Closed",description:"close ".concat((0,u.ZP)(s.poolId).slice(0,6)," position")}})}else{var N,w,A,S;(0,m.Z)(r,"not set coin1AmountMin"),(0,m.Z)(d,"not set coin2AmountMin");let{innerTransactions:e}=await n.jsJ.makeDecreaseLiquidityInstructionSimple({connection:x,liquidity:l,poolInfo:o.state,ownerInfo:{feePayer:v,wallet:v,tokenAccounts:P,useSOLBalance:!0,closePosition:(0,f.eq)(s.sdkParsed.liquidity,l)},amountMinA:(0,p.Z)(null!==(N=null==b?void 0:b.pure)&&void 0!==N?N:r,t.decimals),amountMinB:(0,p.Z)(null!==(w=null==Z?void 0:Z.pure)&&void 0!==w?w:d,i.decimals),ownerPosition:s.sdkParsed,computeBudgetConfig:await (0,g.u)(),checkCreateATAOwner:!0,makeTxVersion:y,lookupTableCache:j.eq});c.add(e,{txHistoryInfo:{title:"Liquidity Removed",description:"Removed ".concat((0,h.B)(null!==(A=null==b?void 0:b.pure)&&void 0!==A?A:r,{decimalLength:6})," ").concat(t.symbol," and ").concat((0,h.B)(null!==(S=null==Z?void 0:Z.pure)&&void 0!==S?S:d,{decimalLength:6})," ").concat(i.symbol," from ").concat((0,u.ZP)(s.poolId).slice(0,6))}})}})}var y=i(96662),w=i(94355);async function k(){let{currentAmmPool:e=N.ZP.getState().currentAmmPool,targetUserPositionAccount:t=N.ZP.getState().targetUserPositionAccount}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,j.ZP)(async i=>{var l,s,o,a;let{transactionCollector:c,baseUtils:{connection:r,owner:d}}=i,{tokenAccountRawInfos:u,txVersion:x}=Z.Z.getState();(0,m.Z)(e,"not seleted amm pool"),(0,m.Z)(t,"not set targetUserPositionAccount");let{innerTransactions:f}=await n.jsJ.makeDecreaseLiquidityInstructionSimple({connection:r,liquidity:n.xEJ,amountMinA:n.xEJ,amountMinB:n.xEJ,poolInfo:e.state,ownerInfo:{feePayer:d,wallet:d,tokenAccounts:u,useSOLBalance:!0,closePosition:!1},ownerPosition:t.sdkParsed,computeBudgetConfig:await (0,g.u)(),checkCreateATAOwner:!0,makeTxVersion:x,lookupTableCache:j.eq});c.add(f,{txHistoryInfo:{title:"Harvested Rewards",description:"Harvested: ".concat(null!==(o=null===(l=e.base)||void 0===l?void 0:l.symbol)&&void 0!==o?o:"--"," - ").concat(null!==(a=null===(s=e.quote)||void 0===s?void 0:s.symbol)&&void 0!==a?a:"--")}})})}async function A(){let{logError:e}=w.Z.getState(),{originSdkParsedAmmPools:t,hydratedAmmPools:i}=N.ZP.getState(),{tokenAccountRawInfos:l,txVersion:s}=Z.Z.getState(),{logInfo:o}=w.Z.getState(),a=y.ZP.getState().connection,{owner:c}=Z.Z.getState();if(!a||!c)return{allSuccess:!0,txids:[]};let{innerTransactions:r}=await n.jsJ.makeHarvestAllRewardInstructionSimple({connection:a,fetchPoolInfos:t,ownerInfo:{feePayer:c,wallet:c,tokenAccounts:l,useSOLBalance:!0},associatedOnly:!0,checkCreateATAOwner:!0,makeTxVersion:s,lookupTableCache:j.eq});return Array.isArray(r)&&0===r.length?(o("No harvestable position"),{allSuccess:!0,txids:[]}):(0,j.ZP)(async e=>{let{transactionCollector:t,baseUtils:{connection:i,owner:l,allTokenAccounts:s}}=e,n=r.map((e,t)=>[e,{txHistoryInfo:{title:"Harvested All Rewards",description:"Harvested all CLMM rewards"}}]);t.add(n)})}var C=i(76961),S=i(91148),F=i(52225),B=i(17097),I=i(47675),L=i(2148),M=i(31555),T=i(31166),q=i(99522),E=i(68186),R=i(11601),z=i(43067),D=i(6994),O=i(70745),U=i(54531),W=i(54592),V=i(23484),H=i(88132),Y=i(32029),K=i(60421),$=i(48162),J=i(82727),_=i(66042),Q=i(23365),G=i(50321),X=i(99645),ee=i(85830),et=i(36868),ei=i(33674),el=i(51800),es=i(95111),en=i(15144),eo=i(29197),ea=i(92618),ec=i(56419),er=i(95793),ed=i(90547),em=i(86597),eu=i(49128),ex=i(99881),ef=i(18074),ep=i(1758),eh=i(95865),ev=i(4465),eb=i(51523),eg=i(16938),ej=i(58819),eZ=i(73766),eN=i(99111),eP=i(92867),ey=i(79162),ew=i(98360),ek=i(84207);function eA(e){let t=(0,T.ZP)(e=>e.tokenPrices);return(0,s.useMemo)(()=>{var i,l,s;if(!e)return{pendingTotalVolume:(0,ek.Z)(0),isHarvestable:!1};let n=!1,o=null!==(s=null==e?void 0:e.rewardInfos.map(e=>{var i;(0,f.gt)(e.penddingReward,0)&&(n=!0);let l=t[(0,u.ZP)(null===(i=e.penddingReward)||void 0===i?void 0:i.token.mint)];return{amount:e.penddingReward,price:l}}))&&void 0!==s?s:[],a=!1;e&&(e.tokenFeeAmountA&&(0,f.gt)(e.tokenFeeAmountA,0)||e.tokenFeeAmountB&&(0,f.gt)(e.tokenFeeAmountB,0))&&(a=!0);let c=e?[{amount:null==e?void 0:e.tokenFeeAmountA,price:t[(0,u.ZP)(null==e?void 0:null===(i=e.tokenFeeAmountA)||void 0===i?void 0:i.token.mint)]},{amount:e.tokenFeeAmountB,price:t[(0,u.ZP)(null==e?void 0:null===(l=e.tokenFeeAmountB)||void 0===l?void 0:l.token.mint)]}]:[],r=o.concat(c).reduce((e,t)=>{let{amount:i,price:l}=t;return i&&l?(0,eb.IH)(null!=e?e:(0,ek.Z)(0),(0,eb.dC)(i,l)):e},void 0),d=async()=>{let e=(0,S.Do)(o.concat(c).map(e=>{var t;return null===(t=e.amount)||void 0===t?void 0:t.token.mint})),[t,i]=(0,b.W)(e)?await Promise.all([(0,eP.$)(),(0,ey.b)({mints:e})]):[],l=await (0,ew.ZP)(o.concat(c),async e=>{let{amount:l,...s}=e;if(!l)return;let n=await (0,v.w)({amount:l,fetchedEpochInfo:t,fetchedMints:i});return{...s,amount:null==n?void 0:n.pure}});return(0,S.Do)(l).reduce((e,t)=>{let{amount:i,price:l}=t;return i&&l?(0,eb.IH)(null!=e?e:(0,ek.Z)(0),(0,eb.dC)(i,l)):e},void 0)},m=!!(0,f.gt)(r,0)||!!n||!!a;return{pendingTotalVolume:r,getPendingTotal:d,isHarvestable:m}},[t,e])}var eC=i(24608),eS=i(41618),eF=i(98590),eB=i(54103),eI=i(67858),eL=i(52784);function eM(e){let{className:t,textClassName:i,text:s,children:n,suffix:o,prefix:c,onClick:r}=e;return(0,l.jsxs)(W.Z,{className:(0,a.m)("text-sm whitespace-nowrap",t),onClick:r,children:[c,(0,l.jsx)("div",{className:(0,a.m)("grow",i),children:null!=s?s:n}),o]})}var eT=i(6325),eq=i(34064),eE=i(99023),eR=i(74365),ez=i(96256),eD=i(71122);function eO(e){var t,i,s,n,o,r;let{className:d}=e,m=(0,N.ZP)(e=>e.currentAmmPool),u=(0,N.ZP)(e=>e.targetUserPositionAccount),x=(0,T.ZP)(e=>e.tokenPrices),{wholeLiquidity:f,baseLiquidity:p,quoteLiquidity:h}=null!==(n=null==u?void 0:null===(t=u.getLiquidityVolume)||void 0===t?void 0:t.call(u,x))&&void 0!==n?n:{},v=(0,c.ZP)(e=>e.isMobile);return(0,l.jsxs)(el.Z,{className:(0,a.m)("flex-wrap bg-[#141041] grid-cols-4 py-3 px-4 rounded-xl gap-12 mobile:gap-4",d),children:[(0,l.jsxs)(K.Z,{className:"grid-rows-[2em,1fr] items-center grow",children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff] h-8",children:"Liquidity"}),(0,l.jsx)("div",{className:"mobile:text-md font-medium text-2xl text-white",children:(0,eh.Z)(f)})]}),(0,l.jsxs)(K.Z,{className:"grid-rows-[2em,1fr] items-center grow",children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff] h-8",children:"Leverage"}),(0,l.jsxs)("div",{className:"mobile:text-md font-medium text-2xl text-white",children:[null==u?void 0:u.leverage.toFixed(2),"x"]})]}),(0,l.jsxs)(K.Z,{className:"grid-rows-[2em,1fr] items-center grow",children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff] h-8",children:"Deposit Ratio"}),(0,l.jsxs)(W.Z,{className:"mobile:text-md font-medium text-2xl text-white gap-2 mobile:gap-1",children:[(0,l.jsx)(eq.a,{prefix:(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)(O.Z,{token:null==m?void 0:m.base,size:v?"sm":"smi"}),(0,l.jsx)("div",{className:" text-[#abc4ff80] min-w-[4em] mr-1",children:null!==(o=null==m?void 0:null===(i=m.base)||void 0===i?void 0:i.symbol)&&void 0!==o?o:"--"})]}),suffix:(0,l.jsx)("div",{className:"text-[#abc4ff80]",children:(0,ef.Z)(null==u?void 0:u.positionPercentA)}),text:(0,l.jsx)("div",{className:"text-white justify-end",children:(0,eh.Z)(p)})}),(0,l.jsx)(eq.a,{prefix:(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)(O.Z,{token:null==m?void 0:m.quote,size:v?"sm":"smi"}),(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[4em] mr-1",children:null!==(r=null==m?void 0:null===(s=m.quote)||void 0===s?void 0:s.symbol)&&void 0!==r?r:"--"})]}),suffix:(0,l.jsx)("div",{className:"text-[#abc4ff80]",children:(0,ef.Z)(null==u?void 0:u.positionPercentB)}),text:(0,l.jsx)("div",{className:"text-white",children:(0,eh.Z)(h)})})]})]}),(0,l.jsxs)(K.Z,{className:"grid-rows-[2em,1fr] items-center grow",children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff] h-8",children:"NFT"}),(0,l.jsx)("div",{className:"font-medium text-[#abc4ff80]",children:(0,l.jsx)(q.U,{textClassName:"text-xs",showDigitCount:v?8:6,canCopy:!0,canExternalLink:!0,children:null==u?void 0:u.nftMint})})]})]})}let eU=e=>Math.min(e+2,15);function eW(e){var t,i,s,n,o,r;let{className:d}=e;(0,eL.Z)();let[m,u,x,f,p]=(0,N.ZP)(e=>[e.currentAmmPool,e.chartPoints,e.coin1,e.coin2,e.timeBasis]),v=(0,c.ZP)(e=>e.isMobile),b=(0,N.ZP)(e=>e.targetUserPositionAccount),g=x||f?Math.max(null!==(s=null==x?void 0:x.decimals)&&void 0!==s?s:0,null!==(n=null==f?void 0:f.decimals)&&void 0!==n?n:0):6,[j,Z]=[b&&(0,ek.Z)(b.priceLower),b&&(0,ek.Z)(b.priceUpper)],P=m?[m.state[N.v$[p]].priceMin,m.state[N.v$[p]].priceMax]:[void 0,void 0];return(0,l.jsxs)(W.Z,{className:(0,a.m)("bg-[#141041] py-3 px-4 rounded-xl gap-4",d),children:[(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff]",children:"My Position"}),(0,l.jsx)(eJ,{positionAccount:b})]}),(0,l.jsxs)(K.Z,{className:"items-center text-white mobile:text-sm",children:[(0,h.B)(null==b?void 0:b.priceLower,{decimalLength:15,maxSignificantCount:eU(6)})," ","-"," ",(0,h.B)(null==b?void 0:b.priceUpper,{decimalLength:15,maxSignificantCount:eU(6)})]}),(0,l.jsxs)("div",{className:"font-medium text-[#abc4ff] mobile:text-xs",children:[null!==(o=null==m?void 0:null===(t=m.quote)||void 0===t?void 0:t.symbol)&&void 0!==o?o:"--"," per ",null!==(r=null==m?void 0:null===(i=m.base)||void 0===i?void 0:i.symbol)&&void 0!==r?r:"--"]}),(0,l.jsx)("div",{className:"items-center grow ",children:(0,l.jsx)(eR.Z,{chartOptions:{isStable:(null==m?void 0:m.ammConfig.tradeFeeRate)===100,baseIn:!0,points:u?(0,eE.Mn)(u):[],initMinBoundaryX:j,initMaxBoundaryX:Z},priceMin:P[0],priceMax:P[1],currentPrice:m?m.currentPrice:void 0,priceLabel:"".concat(null==f?void 0:f.symbol," per ").concat(null==x?void 0:x.symbol),decimals:g,hideRangeLine:!0,hideRangeInput:!0,showCurrentPriceOnly:!0,timeBasis:p,height:v?100:150})}),(0,l.jsxs)(el.Z,{className:"items-center flex-wrap gap-2",children:[(0,l.jsx)(eq.a,{className:"border-1.5 border-[#abc4ff40] text-[#abc4ff] text-xs font-normal py-1.5 px-3 rounded-lg",prefix:(0,l.jsx)("div",{className:"w-3 h-3 bg-[#abc4ff] rounded-full mr-2"}),children:"Pool Liquidity"}),(0,l.jsx)(eq.a,{className:"border-1.5 border-[#abc4ff40] text-[#abc4ff] text-xs font-normal py-1.5 px-3 rounded-lg",prefix:(0,l.jsx)("div",{className:"w-3 h-3 bg-[#161b4a] rounded-full mr-2"}),children:"My Range"}),(0,l.jsx)(eq.a,{className:"border-1.5 border-[#abc4ff40] text-[#abc4ff] text-xs font-normal py-1.5 px-3 rounded-lg",prefix:(0,l.jsx)("div",{className:"w-3 h-3 bg-white rounded-full mr-2"}),children:"Current Price"})]})]})}function eV(e){var t,i,s,n,o,r,d;let{className:m}=e,x=(0,N.ZP)(e=>e.targetUserPositionAccount),p=(0,N.ZP)(e=>e.refreshConcentrated),v=(0,Z.Z)(e=>e.connected),b=(0,T.ZP)(e=>e.tokenPrices),g=null!==(o=null==x?void 0:x.rewardInfos.map(e=>{var t,i;return{token:null===(t=e.penddingReward)||void 0===t?void 0:t.token,volume:(0,eb.dC)(e.penddingReward,b[(0,u.ZP)(null===(i=e.penddingReward)||void 0===i?void 0:i.token.mint)]),amount:e.penddingReward}}))&&void 0!==o?o:[],j=x?[{token:null==x?void 0:null===(t=x.tokenFeeAmountA)||void 0===t?void 0:t.token,volume:(0,eb.dC)(null==x?void 0:x.tokenFeeAmountA,b[(0,u.ZP)(null==x?void 0:null===(i=x.tokenFeeAmountA)||void 0===i?void 0:i.token.mint)]),amount:null==x?void 0:x.tokenFeeAmountA},{token:null==x?void 0:null===(s=x.tokenFeeAmountB)||void 0===s?void 0:s.token,volume:(0,eb.dC)(null==x?void 0:x.tokenFeeAmountB,b[(0,u.ZP)(null==x?void 0:null===(n=x.tokenFeeAmountB)||void 0===n?void 0:n.token.mint)]),amount:null==x?void 0:x.tokenFeeAmountB}]:[],P=g.concat(j).reduce((e,t)=>{let{volume:i}=t;return i?(0,eb.IH)(null!=e?e:(0,ek.Z)(0),i):e},void 0),y=(0,c.ZP)(e=>e.isMobile),w=(0,f.$u)(P),A=(0,c.ZP)(e=>e.isApprovePanelShown);return(0,l.jsxs)(W.Z,{className:(0,a.m)("bg-[#141041] py-3 px-4 rounded-xl gap-4",m),children:[(0,l.jsx)(el.Z,{className:"items-center gap-2",children:(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff]",children:"Pending Yield"})}),(0,l.jsxs)(el.Z,{className:"items-center gap-8",children:[(0,l.jsxs)("div",{className:"font-medium text-2xl text-white",children:["≈",(0,eh.Z)(P)]}),(0,l.jsx)(z.Z,{className:"frosted-glass-teal",size:y?"sm":void 0,isLoading:A,onClick:()=>k().then(e=>{(null==e?void 0:e.allSuccess)&&p()}),validators:[{should:v,forceActive:!0,fallbackProps:{onClick:()=>c.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:w}],children:"Harvest"})]}),(0,l.jsxs)(E.Z,{is:y?"Col":"Grid",className:"grid-cols-2 gap-6 mobile:gap-2 border-1.5 border-[#abc4ff40] py-3 px-4 rounded-xl",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff] mt-2 mb-4",children:"Fees"}),(0,l.jsx)(K.Z,{className:"grow grid-cols-1 gap-2 mobile:gap-1",children:j.map(e=>{let{token:t,amount:i}=e;return(0,l.jsx)(eq.a,{prefix:(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)(O.Z,{token:t,size:"smi"}),(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[2em] mr-1",children:null!==(r=null==t?void 0:t.symbol)&&void 0!==r?r:"--"})]}),suffix:(0,l.jsx)("div",{title:(0,h.B)(i),className:"grow overflow-hidden text-ellipsis text-white justify-end text-end",children:(0,h.B)(i)})},(0,u.ZP)(null==t?void 0:t.mint))})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff] mt-2 mb-4",children:"Rewards"}),(0,l.jsx)(K.Z,{className:"grow grid-cols-1 gap-2",children:g.length?g.map(e=>{let{token:t,amount:i}=e;return(0,l.jsx)(eq.a,{prefix:(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)(O.Z,{token:t,size:"smi"}),(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[2em] mr-1",children:null!==(d=null==t?void 0:t.symbol)&&void 0!==d?d:"--"})]}),suffix:(0,l.jsx)("div",{title:(0,h.B)(i),className:"grow overflow-hidden text-ellipsis text-white justify-end text-end",children:(0,h.B)(i)})},(0,u.ZP)(null==t?void 0:t.mint))}):(0,l.jsx)("div",{className:"text-[#abc4ff80] mobile:text-sm ",children:"(No Reward)"})})]})]})]})}function eH(e){let{className:t}=e,i=(0,N.ZP)(e=>e.targetUserPositionAccount),s=(0,eD.hy)({positionAccount:i}),n=(0,c.ZP)(e=>e.isMobile);return(0,l.jsxs)(W.Z,{className:(0,a.m)("bg-[#141041] py-3 px-4 rounded-xl gap-4",t),children:[(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"mobile:text-sm font-medium text-[#abc4ff]",children:"Estimated APR"}),(0,l.jsx)(eI.T,{}),(0,l.jsx)(ez.n,{className:"ml-auto"})]}),(0,l.jsx)("div",{className:"font-medium text-2xl mobile:text-lg text-white",children:(0,ef.Z)(null==s?void 0:s.apr)}),(0,l.jsx)(K.Z,{className:"border-1.5 border-[#abc4ff40] py-3 px-4 rounded-xl",children:i&&(0,l.jsx)(eB.E,{type:"positionAccount",positionAccount:i,colCount:n?1:2})})]})}function eY(e){var t,i,s,n;let{className:o}=e,r=(0,N.ZP)(e=>e.currentAmmPool),d=(0,N.ZP)(e=>e.targetUserPositionAccount),m=(0,c.ZP)(e=>e.isMobile),u=null==d?void 0:d.liquidity.isZero(),x=(0,N.ZP)(e=>e.refreshConcentrated),f=(0,c.ZP)(e=>e.isApprovePanelShown);return(0,l.jsxs)(el.Z,{className:(0,a.m)("justify-between gap-2 flex-wrap",o),children:[(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)(U.Z,{token1:null==r?void 0:r.base,token2:null==r?void 0:r.quote,size:m?"md":"lg"}),(0,l.jsxs)("div",{className:"font-medium text-2xl mobile:text-xl text-white",children:[null!==(s=null==r?void 0:null===(t=r.base)||void 0===t?void 0:t.symbol)&&void 0!==s?s:"--"," - ",null!==(n=null==r?void 0:null===(i=r.quote)||void 0===i?void 0:i.symbol)&&void 0!==n?n:"--"]}),(0,l.jsx)(eJ,{positionAccount:d})]}),(0,l.jsxs)(el.Z,{className:"items-center gap-2 mobile:grow",children:[(0,l.jsx)(z.Z,{className:"frosted-glass-teal mobile:grow",onClick:()=>{N.ZP.setState({isAddDialogOpen:!0,currentAmmPool:r,targetUserPositionAccount:d,coin1:null==r?void 0:r.base,coin2:null==r?void 0:r.quote})},size:m?"sm":void 0,children:"Add Liquidity"}),u?(0,l.jsx)(z.Z,{className:"frosted-glass-teal ghost mobile:grow",size:m?"sm":void 0,isLoading:f,onClick:()=>{N.ZP.setState({liquidity:null==d?void 0:d.liquidity,currentAmmPool:r,targetUserPositionAccount:d}),setTimeout(()=>{P({closePosition:!0}).then(e=>{(null==e?void 0:e.allSuccess)&&(x(),N.ZP.setState({coin1Amount:void 0,coin2Amount:void 0}))})},10)},children:"Close Position"}):(0,l.jsx)(z.Z,{className:"frosted-glass-teal ghost mobile:grow",size:m?"sm":void 0,isLoading:f,onClick:()=>{N.ZP.setState({isRemoveDialogOpen:!0,currentAmmPool:r,targetUserPositionAccount:d,coin1:null==r?void 0:r.base,coin2:null==r?void 0:r.quote})},children:"Remove Liquidity"})]})]})}function eK(){let e=(0,N.ZP)(e=>e.isMyPositionDialogOpen);return(0,l.jsx)(eT.Z,{placement:"from-bottom",open:e,onClose:()=>{N.ZP.setState({isMyPositionDialogOpen:!1})},children:e=>{let{close:t}=e;return(0,l.jsxs)(D.Z,{className:"p-8 mobile:p-4 pb-2 rounded-3xl mobile:rounded-lg w-[min(912px,90vw)] max-h-[80vh] overflow-auto mobile:w-full border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card",size:"lg",children:[(0,l.jsxs)(el.Z,{className:"justify-between items-center gap-6 mobile:gap-3 mb-6 mobile:mb-3",children:[(0,l.jsx)(eY,{className:"grow"}),(0,l.jsx)($.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:t})]}),(0,l.jsxs)(K.Z,{className:"gap-3 mobile:gap-2 grid-cols-2 mobile:grid-cols-1 w-[min(912px,100%)]",children:[(0,l.jsx)(eO,{className:"col-span-full"}),(0,l.jsx)(eW,{className:"col-span-1 row-span-2"}),(0,l.jsx)(eV,{}),(0,l.jsx)(eH,{})]}),(0,l.jsx)(e$,{})]})}})}function e$(e){let{className:t}=e,i=(0,N.ZP)(e=>e.currentAmmPool),s=(0,c.ZP)(e=>e.isMobile);return(0,l.jsxs)(V.Z,{openDirection:"upwards",className:"w-full mt-4",children:[(0,l.jsx)(V.Z.Body,{children:(0,l.jsx)("div",{className:"pb-4",children:(0,l.jsxs)("div",{className:(0,a.m)("bg-[#141041] py-3 px-4 rounded-xl gap-4 ",t),children:[(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] mb-4",children:"Pool Overview"}),(0,l.jsxs)(K.Z,{className:"grid-cols-5 mobile:grid-cols-2 gap-8 mobile:gap-4 mobile:text-sm",children:[(0,l.jsx)(eM,{className:"gap-1 font-medium",prefix:(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[4em] mr-1",children:"Fee Rate"}),text:(0,l.jsx)("div",{className:"text-white",children:(0,ef.Z)(null==i?void 0:i.tradeFeeRate)})}),(0,l.jsx)(eM,{className:"gap-1 font-medium",prefix:(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[4em] mr-1",children:"Liquidity"}),text:(0,l.jsx)("div",{className:"text-white",children:(0,eh.Z)(null==i?void 0:i.tvl)})}),(0,l.jsx)(eM,{className:"gap-1 font-medium",prefix:(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[4em] mr-1",children:"24h Volume"}),text:(0,l.jsx)("div",{className:"text-white",children:(0,eh.Z)(null==i?void 0:i.volume24h)})}),(0,l.jsx)(eM,{className:"gap-1 font-medium",prefix:(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[4em] mr-1",children:"24h Fee"}),text:(0,l.jsx)("div",{className:"text-white",children:(0,eh.Z)(null==i?void 0:i.volumeFee24h)})}),(0,l.jsx)(eM,{className:"gap-1 font-medium",prefix:(0,l.jsx)("div",{className:"text-[#abc4ff80] min-w-[4em] mr-1",children:"Tick Spacing"}),text:(0,l.jsx)("div",{className:"text-white",children:null==i?void 0:i.ammConfig.tickSpacing})})]})]})})}),(0,l.jsx)(V.Z.Face,{children:e=>{let{isOpen:t}=e;return(0,l.jsxs)(el.Z,{className:"border-t-1.5 pt-4 pb-2  mobile:pt-2 mobile:pb-0 border-[#abc4ff40] w-full items-center justify-center text-sm font-medium text-[#abc4ff] cursor-pointer select-none",children:[(0,l.jsx)("div",{children:"Pool Overview"}),(0,l.jsx)($.Z,{size:s?"xs":"sm",heroIconName:t?"chevron-up":"chevron-down",className:"ml-1"})]})}})]})}function eJ(e){let{positionAccount:t}=e;return t?t.inRange?(0,l.jsxs)(el.Z,{className:"items-center bg-[#142B45] rounded text-xs text-[#39D0D8] py-0.5 px-1 ml-2",children:[(0,l.jsx)($.Z,{size:"xs",iconSrc:"/icons/check-circle.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"In Range"})]}):(0,l.jsxs)(el.Z,{className:"items-center bg-[#DA2EEF]/10 rounded text-xs text-[#DA2EEF] py-0.5 px-1 ml-2",children:[(0,l.jsx)($.Z,{size:"xs",iconSrc:"/icons/warn-stick.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"Out of Range"})]}):null}var e_=i(55469),eQ=i(42186);async function eG(){var e;let t,{currentAmmPool:i=N.ZP.getState().currentAmmPool,targetUserPositionAccount:l=N.ZP.getState().targetUserPositionAccount}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{coin1:s,coin2:o,coin1Amount:a,coin2Amount:c,coin1SlippageAmount:r,coin2SlippageAmount:d,liquidity:v,liquidityMin:P}=N.ZP.getState(),y=[null==l?void 0:l.tokenA,null==l?void 0:l.tokenB,...null!==(e=null==l?void 0:l.rewardInfos.map(e=>e.token))&&void 0!==e?e:[]].some(e=>(0,b.W)(e)&&e);if(y){let{hasConfirmed:e}=(0,e_.e)({caseName:"increase",groupInfo:l?{ammPool:l.ammPool,priceLower:l.priceLower,priceUpper:l.priceUpper}:void 0,amount:(0,S.Do)([(0,x.n)(s,a,{alreadyDecimaled:!0}),(0,x.n)(o,c,{alreadyDecimaled:!0})])});t=await e}else t=!0;if(!t){w.Z.getState().logError("Canceled by User","The operation is canceled by user");return}return(0,j.ZP)(async e=>{let{transactionCollector:t,baseUtils:{connection:x,owner:v}}=e,{tokenAccountRawInfos:b,txVersion:N}=Z.Z.getState();(0,m.Z)(i,"not seleted amm pool"),(0,m.Z)(s,"not set coin1"),(0,m.Z)(a,"not set coin1Amount"),(0,m.Z)(o,"not set coin2"),(0,m.Z)(c,"not set coin2Amount"),(0,m.Z)((0,f.$u)(P),"not set liquidity"),(0,m.Z)(l,"not set targetUserPositionAccount");let{innerTransactions:y}=await n.jsJ.makeIncreasePositionFromLiquidityInstructionSimple({connection:x,liquidity:P,poolInfo:i.state,ownerInfo:{feePayer:v,wallet:v,tokenAccounts:b,useSOLBalance:(0,eQ.Dn)(s)||(0,eQ.Dn)(o)},ownerPosition:l.sdkParsed,computeBudgetConfig:await (0,g.u)(),checkCreateATAOwner:!0,amountMaxA:(0,p.Z)(a,s.decimals,"up"),amountMaxB:(0,p.Z)(c,o.decimals,"up"),makeTxVersion:N,lookupTableCache:j.eq});t.add(y,{txHistoryInfo:{title:"Liquidity Added",description:"Added ".concat((0,h.B)(r)," ").concat(s.symbol," and ").concat((0,h.B)(d)," ").concat(o.symbol," to ").concat((0,u.ZP)(l.poolId).slice(0,6))}})})}var eX=i(6547),e0=i(97664),e1=i(28948),e2=i(51488);function e4(){var e,t,i,o,a,r,d,m,u,p,g,j,P,y,w,k,A,S;(0,C.Z)(),(0,F.Z)(()=>{N.ZP.setState({coin1Amount:void 0,coin2Amount:void 0,coin1AmountFee:void 0,coin2AmountFee:void 0,coin1ExpirationTime:void 0,coin2ExpirationTime:void 0})});let B=(0,Z.Z)(e=>e.getBalance),I=(0,N.ZP)(e=>e.isAddDialogOpen),L=(0,N.ZP)(e=>e.refreshConcentrated),M=(0,Z.Z)(e=>e.connected),q=(0,c.ZP)(e=>e.isApprovePanelShown),E=(0,s.useRef)(),U=(0,s.useRef)(),V=(0,s.useRef)(),H=(0,N.ZP)(e=>e.currentAmmPool),Y=null==H?void 0:H.base,J=null==H?void 0:H.quote,_=null==H?void 0:H.currentPrice,Q=(0,N.ZP)(e=>e.targetUserPositionAccount),G=(0,N.ZP)(e=>e.coin1),X=(0,N.ZP)(e=>e.coin2),ee=(0,N.ZP)(e=>e.liquidity),et=G||X?Math.max(null!==(e=null==G?void 0:G.decimals)&&void 0!==e?e:0,null!==(t=null==X?void 0:X.decimals)&&void 0!==t?t:0):6,ei=(0,T.ZP)(e=>e.tokenPrices),es=(0,N.ZP)(e=>e.coin1Amount),en=(0,N.ZP)(e=>e.coin2Amount);(0,N.ZP)(e=>e.coin1SlippageAmount),(0,N.ZP)(e=>e.coin2SlippageAmount);let eo=(0,ev.aT)(null==Y?void 0:Y.mint,null==G?void 0:G.mint)?"coin1":"coin2",ec="coin1"===eo?es:en,er="coin1"===eo?en:es,ed=(0,s.useMemo)(()=>Y&&ec&&(0,b.W)(Y)?(0,v.w)({amount:(0,x.n)(Y,ec,{alreadyDecimaled:!0})}):void 0,[Y,ec]),em=(0,s.useMemo)(()=>J&&er&&(0,b.W)(J)?(0,v.w)({amount:(0,x.n)(J,er,{alreadyDecimaled:!0})}):void 0,[J,er]),eu=(0,b.W)(Y)||(0,b.W)(J),[ex,ef]=(0,s.useState)(!1),[ep,eg]=(0,s.useState)(!1),[ej,eZ]=(0,s.useState)(!1),[eN,eP]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(!H||!Q)return;let e=null==H?void 0:H.base,t=null==H?void 0:H.quote;N.ZP.setState({coin1:e,coin2:t,priceLowerTick:Q.tickLower,priceUpperTick:Q.tickUpper})},[H,Q]);let ey=Y&&ei[null==Y?void 0:Y.mintString],ew=J&&ei[null==J?void 0:J.mintString],ek=(0,eb.dC)(ec,ey),eA=(0,eb.dC)(er,ew),eC=(0,eb.IH)(ek,eA),eS=(0,c.ZP)(e=>e.isMobile),{Token2022FeeTooHighWarningChip:eF,isWarningChipOpen:eB}=(0,e2.I)([{token:Y,amount:ec},{token:J,amount:er}]),[eI,eL]=(0,s.useState)(!1);(0,s.useEffect)(()=>()=>eL(!1),[null==Y?void 0:Y.mintString]);let[eM,eq]=(0,s.useState)(!1);return(0,s.useEffect)(()=>()=>eq(!1),[null==J?void 0:J.mintString]),(0,l.jsx)(eT.Z,{placement:"from-bottom",open:I,onClose:()=>{N.ZP.setState({isAddDialogOpen:!1,coin1Amount:void 0,coin2Amount:void 0})},children:e=>{let{close:t}=e;return(0,l.jsxs)(D.Z,{className:"p-8 mobile:p-4 pb-2 rounded-3xl mobile:rounded-lg w-[min(456px,90vw)] mobile:w-full border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card",size:"lg",children:[(0,l.jsxs)(el.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsxs)("div",{className:"mobile:text-base text-xl font-semibold text-white",children:["Add Liquidity to ",null!==(i=null==Y?void 0:Y.symbol)&&void 0!==i?i:"--"," - ",null!==(o=null==J?void 0:J.symbol)&&void 0!==o?o:"--"," "]}),(0,l.jsx)($.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:t})]}),(0,l.jsxs)(W.Z,{className:"gap-2 mobile:gap-1 border-1.5 rounded-xl border-[#abc4ff40] p-2.5 mobile:p-2 mb-4 mobile:mb-2",children:[(0,l.jsx)("div",{className:"font-medium text-sm text-[#abc4ff] mobile:pb-1",children:"My Position"}),(0,l.jsxs)(el.Z,{className:"items-center",children:[(0,l.jsx)(O.Z,{token:Y,size:eS?"xs":"sm"}),(0,l.jsx)("div",{className:"ml-2 mr-auto text-sm mobile:text-xs text-[#abc4ff80]",children:null!==(a=null==Y?void 0:Y.symbol)&&void 0!==a?a:"--"}),(0,l.jsxs)("div",{className:"text-white font-medium text-sm mobile:text-xs",children:[(0,h.B)(null==Q?void 0:Q.amountA)," ",null!==(r=null==Y?void 0:Y.symbol)&&void 0!==r?r:"--"]})]}),(0,l.jsxs)(el.Z,{className:"items-center",children:[(0,l.jsx)(O.Z,{token:J,size:eS?"xs":"sm"}),(0,l.jsx)("div",{className:"ml-2 mr-auto text-sm mobile:text-xs text-[#abc4ff80]",children:null!==(d=null==J?void 0:J.symbol)&&void 0!==d?d:"--"}),(0,l.jsxs)("div",{className:"text-white font-medium text-sm mobile:text-xs",children:[(0,h.B)(null==Q?void 0:Q.amountB)," ",null!==(m=null==J?void 0:J.symbol)&&void 0!==m?m:"--"]})]})]}),(0,l.jsxs)(W.Z,{className:"gap-2 border-1.5 rounded-xl border-[#abc4ff40] p-2.5 mobile:p-2 mb-4 mobile:mb-2",children:[(0,l.jsxs)(el.Z,{className:"items-center py-1",children:[(0,l.jsx)("div",{className:"font-medium text-sm text-[#abc4ff] mr-auto",children:"Selected Range"}),(0,l.jsxs)(el.Z,{children:[(0,l.jsx)("div",{className:"text-[#abc4ff80] text-xs mr-2",children:"current Price"}),(0,l.jsxs)("div",{className:"text-white font-medium text-xs",children:[_?(0,h.B)(_,{decimalLength:et}):"0"," ",null!==(u=null==J?void 0:J.symbol)&&void 0!==u?u:"--"," ","per ",null!==(p=null==Y?void 0:Y.symbol)&&void 0!==p?p:"--"]})]})]}),(0,l.jsxs)(K.Z,{className:"grid-cols-2 gap-4 mobile:gap-2",children:[(0,l.jsxs)(W.Z,{className:"gap-2 border-1.5 rounded-xl border-[#39d0d866] items-center py-3",children:[(0,l.jsx)("div",{className:"text-[#abc4ff] text-sm",children:"Min Price"}),(0,l.jsx)("div",{className:"text-white text-xl font-medium",children:(0,h.B)(null==Q?void 0:Q.priceLower)}),(0,l.jsxs)("div",{className:"text-[#abc4ff80] text-xs",children:[null!==(g=null==J?void 0:J.symbol)&&void 0!==g?g:"--"," per ",null!==(j=null==Y?void 0:Y.symbol)&&void 0!==j?j:"--"]})]}),(0,l.jsxs)(W.Z,{className:"gap-2 border-1.5 rounded-xl border-[#39d0d866] items-center py-3",children:[(0,l.jsx)("div",{className:"text-[#abc4ff] text-sm",children:"Max Price"}),(0,l.jsx)("div",{className:"text-white text-xl font-medium",children:(0,h.B)(null==Q?void 0:Q.priceUpper)}),(0,l.jsxs)("div",{className:"text-[#abc4ff80] text-xs",children:[null!==(P=null==J?void 0:J.symbol)&&void 0!==P?P:"--"," per ",null!==(y=null==Y?void 0:Y.symbol)&&void 0!==y?y:"--"]})]})]})]}),(0,l.jsxs)(W.Z,{className:"gap-3 mobile:gap-2 mb-6 mobile:mb-2",children:[(0,l.jsx)(e0.Z,{hideTransferFee:!0,className:"p-4 mobile:py-2",componentRef:U,disabled:(0,f.gt)(_,null==Q?void 0:Q.priceUpper),renderDisabledMask:(0,l.jsx)(e5,{}),haveCoinIcon:!0,topLeftLabel:"Amount",token:Y,maxValue:Y?(0,x.n)(Y,(0,eb.dC)(B(Y),.985),{alreadyDecimaled:!0}):void 0,value:(0,h.B)(ec),onUserInput:e=>{"coin1"===eo?N.ZP.setState({coin1Amount:e,userCursorSide:"coin1"}):N.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},onInputAmountClampInBalanceChange:e=>{let{negative:t,outOfMax:i}=e;eg(t),ef(i)},onEnter:e=>{var t,i;e&&(null===(t=E.current)||void 0===t||null===(i=t.click)||void 0===i||i.call(t))}}),(0,l.jsx)(e0.Z,{hideTransferFee:!0,className:"p-4 mobile:py-2",componentRef:V,disabled:(0,f.lt)(_,null==Q?void 0:Q.priceLower),renderDisabledMask:(0,l.jsx)(e5,{}),haveCoinIcon:!0,topLeftLabel:"Amount",token:J,maxValue:J?(0,x.n)(J,(0,eb.dC)(B(J),.985),{alreadyDecimaled:!0}):void 0,value:(0,h.B)(er),onUserInput:e=>{"coin1"===eo?N.ZP.setState({coin2Amount:e,userCursorSide:"coin2"}):N.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},onInputAmountClampInBalanceChange:e=>{let{negative:t,outOfMax:i}=e;eP(t),eZ(i)},onEnter:e=>{var t,i;e&&(null===(t=E.current)||void 0===t||null===(i=t.click)||void 0===i||i.call(t))}}),eF({className:"pt-1"})]}),(0,l.jsx)(e1.Z,{show:(0,f.$u)(ec),children:(0,l.jsxs)(W.Z,{className:"gap-2 mobile:gap-1 border-1.5 rounded-xl border-[#abc4ff40] py-2.5 px-3 mb-4",children:[(0,l.jsxs)(W.Z,{className:"justify-between",children:[eu?(0,l.jsxs)(K.Z,{className:"mb-1 grid-cols-[2.5fr,2fr,2fr] items-center text-xs text-[#abc4ff]",children:[(0,l.jsx)("div",{}),(0,l.jsxs)(el.Z,{className:"justify-self-end items-center",children:[(0,l.jsx)("div",{children:"Token2022 Fee"}),(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{iconClassName:"ml-1",size:"xs",heroIconName:"question-mark-circle"}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[200px] space-y-1.5 text-[#abc4ff]",children:"Tokens with a transfer fee use the Token2022 program and have a fee programed for all token interactions."})})]})]}),(0,l.jsx)("div",{className:"justify-self-end",children:"Final Deposit"})]}):void 0,(0,l.jsx)(W.Z,{className:"gap-1",children:[{side:"base",isToken2022:(0,b.W)(Y),token:Y,info:ed,rawAmount:ec},{side:"quote",isToken2022:(0,b.W)(J),token:J,info:em,rawAmount:er}].map(e=>{let{isToken2022:t,token:i,info:s,rawAmount:n,side:o}=e;return(0,l.jsxs)(K.Z,{className:"grid-cols-[2.5fr,2fr,2fr] items-center",children:[(0,l.jsxs)(el.Z,{className:"items-center gap-1 overflow-hidden",children:[(0,l.jsx)("div",{className:"font-medium text-white",children:null==i?void 0:i.symbol}),(0,l.jsx)(O.Z,{size:"sm",token:i}),t&&(0,l.jsx)(R.I,{})]}),(0,l.jsx)("div",{className:"justify-self-end font-medium text-xs text-[#abc4ff]",children:eu?t?(0,l.jsx)(eX.j,{promise:s,fallback:"--",children:e=>(null==e?void 0:e.fee)?(0,l.jsx)("div",{children:(0,h.B)(e.fee)}):"-"}):"-":""}),(0,l.jsx)("div",{className:"justify-self-end font-medium text-white overflow-hidden",children:t&&(0,f.$u)(n)?(0,l.jsx)(eX.j,{promise:s,fallback:"--",onFullfilled:()=>{"base"===o?eL(!0):eq(!0)},children:e=>(null==e?void 0:e.pure)?(0,l.jsx)("div",{children:(0,h.B)(e.pure,{decimalLength:i?"auto ".concat(i.decimals):void 0})}):void 0}):(0,l.jsx)("div",{children:(0,h.B)(n,{decimalLength:i?"auto ".concat(i.decimals):void 0})})})]},null==i?void 0:i.mintString)})})]}),(0,l.jsxs)(el.Z,{className:"items-center",children:[(0,l.jsx)("div",{className:"mr-auto text-sm mobile:text-xs text-[#abc4ff]",children:"Total Deposit"}),(0,l.jsx)("div",{className:"text-white font-medium text-sm",children:(0,eh.Z)(eC)})]})]})}),(0,l.jsxs)(el.Z,{className:"flex-col gap-1",children:[(0,l.jsx)(z.Z,{className:"frosted-glass frosted-glass-teal mobile:text-sm",size:eS?"sm":void 0,isLoading:q,componentRef:E,validators:[{should:M,forceActive:!0,fallbackProps:{onClick:()=>c.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{not:eB},{should:(0,f.$u)(ec)||(0,f.$u)(er)},{should:(!(0,b.W)(Y)||eI)&&(!(0,b.W)(J)||eM),fallbackProps:{children:"Loading Token 2022 Info..."}},{not:null==ee?void 0:ee.eq(n.xEJ),fallbackProps:{children:"Token Amount Fail to Create Position"}},{should:!ex,fallbackProps:{children:"".concat(null!==(w=null==Y?void 0:Y.symbol)&&void 0!==w?w:""," Amount Too Large")}},{should:!ep,fallbackProps:{children:"Negative ".concat(null!==(k=null==Y?void 0:Y.symbol)&&void 0!==k?k:""," Amount")}},{should:!ej,fallbackProps:{children:"".concat(null!==(A=null==J?void 0:J.symbol)&&void 0!==A?A:""," Amount Too Large")}},{should:!eN,fallbackProps:{children:"Negative ".concat(null!==(S=null==J?void 0:J.symbol)&&void 0!==S?S:""," Amount")}}],onClick:()=>{eG().then(e=>{(null==e?void 0:e.allSuccess)&&(L(),N.ZP.setState({isAddDialogOpen:!1,coin1Amount:void 0,coin2Amount:void 0,coin1AmountFee:void 0,coin2AmountFee:void 0,coin1SlippageAmount:void 0,coin2SlippageAmount:void 0,coin1ExpirationTime:void 0,coin2ExpirationTime:void 0}))})},children:"Add Liquidity"}),(0,l.jsx)(z.Z,{type:"text",size:eS?"sm":void 0,className:"text-sm text-[#ABC4FF] opacity-50 backdrop-filter-none",onClick:t,children:"Cancel"})]})]})}})}function e5(){return(0,l.jsxs)("div",{className:"absolute text-sm flex flex-col border-1.5 border-[#abc4ff40] text-center justify-center items-center p-2 w-full h-full bg-[#141041] bg-opacity-80 z-10 rounded-xl",children:[(0,l.jsx)($.Z,{className:"mb-1",heroIconName:"lock-closed",size:"sm"}),"Current price is outside your selected range. Single-asset deposit only."]})}var e6=i(47857),e9=i(9531),e3=i(27407);function e8(e){let[t,i]=(0,s.useState)(),[n,o]=(0,s.useState)(0),[c,r]=(0,s.useState)(0),{id:d,title:m,max:u,className:x,titleClassName:p,tagClassName:v,onChange:b,liquidity:g,tick:j}=(0,e3.Z)(e,t),Z=(0,e6.z)(e=>{(0,B.kJ)(e)||(null==b||b(e),r(e),o(e/u))}),N=(0,e6.z)(e=>{o(e),r(u*e),null==b||b(u*e)});return(0,s.useEffect)(()=>{var e;let t=(0,eb.dC)(u,j);if((0,f.Jr)(t))return;let i=Number((0,h.B)((0,eb.hi)(null!=g?g:0,t),{decimalLength:"auto 4"}));o(i=i>1?1:i),r(null!==(e=Number((0,h.B)(i*u,{decimalLength:"auto 2"})))&&void 0!==e?e:0)},[g]),(0,l.jsxs)("div",{className:(0,a.m)("w-full py-1 px-1",x),children:[(0,l.jsxs)(el.Z,{className:"w-full flex flex-row justify-between",children:[(0,l.jsxs)("div",{className:"w-full flex flex-row justify-start items-center ",children:[(0,l.jsx)("span",{className:(0,a.m)("text-[#ABC4FF] font-medium text-base mobile:text-sm",p),style:{marginRight:8},children:null!=m?m:"Amount"}),(0,l.jsxs)(el.Z,{className:"gap-1 mobile:gap-0.5",children:[(0,l.jsx)(e7,{tagName:"Max",className:v,percentageValue:1,onClick:N}),(0,l.jsx)(e7,{tagName:"75%",className:v,percentageValue:.75,onClick:N}),(0,l.jsx)(e7,{tagName:"50%",className:v,percentageValue:.5,onClick:N}),(0,l.jsx)(e7,{tagName:"25%",className:v,percentageValue:.25,onClick:N})]})]}),(0,l.jsx)("div",{className:"text-lg mobile:text-sm text-white font-medium flex items-center",children:(0,ef.Z)(n)})]}),(0,l.jsx)(te,{className:"mt-5",max:u,onChange:Z,value:c})]})}function e7(e){let{tagName:t,className:i,percentageValue:s,onClick:n}=e;return(0,l.jsx)("div",{className:(0,a.m)("text-[#ABC4FF] font-medium text-sm mobile:text-xs m-0.25 bg-[#14104180] rounded-lg mobile:rounded-md hover:bg-[#ABC4FF] hover:text-[#1B1659] py-1 px-3 mobile:px-2 clickable",i),onClick:()=>{n&&n(s)},children:t})}function te(e){let{max:t,className:i,trackStyle:s,handleStyle:n,railStyle:o,onChange:c,onSettled:r,value:d,defaultValue:m,...u}=e;return(0,l.jsx)(el.Z,{className:(0,a.m)("w-full h-5, px-3",i),children:(0,l.jsx)(e9.Z,{min:0,max:t,step:.01,value:null!=d?d:void 0,trackStyle:{backgroundColor:"#36B9E2",height:2,...s},handleStyle:{borderColor:"transparent",height:24,width:24,marginTop:-12,backgroundColor:"#ABC4FF",opacity:1,boxShadow:"none",...n},railStyle:{backgroundColor:"#36B9E2",height:1,opacity:"0.2",...o},onChange:e=>{null==c||c(e)}})})}i(85213);var tt=i(78083),ti=s.memo(function(e){var t;let{isAdd:i=!1}=e,o=(0,N.ZP)(e=>e.currentAmmPool),a=(0,N.ZP)(e=>e.targetUserPositionAccount),c=(0,N.ZP)(e=>e.coin1),r=(0,N.ZP)(e=>e.coin2),d=(0,N.ZP)(e=>e.liquidity);(0,m.Z)(c,"base token not been set"),(0,m.Z)(r,"quote token not been set");let f=(0,s.useMemo)(()=>{if(o&&a){var e;return null===(e=o.positionAccount)||void 0===e?void 0:e.find(e=>(0,u.ZP)(e.nftMint)===(0,u.ZP)(a.nftMint))}},[o,a]),h=(0,s.useMemo)(()=>null!==(t=(0,eb.hi)(null==f?void 0:f.liquidity,100))&&void 0!==t?t:(0,ek.Z)(0),[null==f?void 0:f.liquidity]),v=(0,s.useRef)(),b=(0,eC.fB)(e=>{N.ZP.setState(e)},{throttleOption:{delay:200,invokeImmediatelyInInitual:!0}}),g=(0,e6.z)(e=>{var t;null===(t=v.current)||void 0===t||t.call(v);let{abort:i}=(0,tt.t)(async t=>{var i,l;if(!e||(0,B.kJ)(e)||!o||!f)return;let[s,a]=await Promise.all([(0,ey.b)({mints:[o.state.mintA.mint,o.state.mintB.mint]}),(0,eP.$)()]);if(!t())return;let c=(0,p.Z)((0,eb.dC)(e,h)),r=n.jsJ.getAmountsFromLiquidity({poolInfo:o.state,liquidity:c,slippage:0,add:!1,tickLower:f.tickLower,tickUpper:f.tickUpper,token2022Infos:s,epochInfo:a,amountAddFee:!1});b({coin1Amount:(0,x.n)(o.base,(0,eb.h9)(r.amountSlippageA.amount,null!==(i=r.amountSlippageA.fee)&&void 0!==i?i:0)),coin2Amount:(0,x.n)(o.quote,(0,eb.h9)(r.amountSlippageB.amount,null!==(l=r.amountSlippageB.fee)&&void 0!==l?l:0)),coin1AmountFee:(0,x.n)(o.base,r.amountSlippageA.fee),coin2AmountFee:(0,x.n)(o.quote,r.amountSlippageB.fee),coin1ExpirationTime:r.amountSlippageA.expirationTime,coin2ExpirationTime:r.amountSlippageB.expirationTime,isInput:!1,liquidity:c})});v.current=i});return(0,l.jsx)(e8,{max:100,tick:h,className:"py-3 px-3 ring-1 mobile:ring-1 ring-[#abc4ff40] rounded-xl mobile:rounded-xl ",onChange:g,liquidity:d})});function tl(e){var t,i,o,r,d,m;let{className:p,onClose:v}=e;(0,F.Z)(()=>{N.ZP.setState({coin1Amount:void 0,coin2Amount:void 0,coin1AmountFee:void 0,coin2AmountFee:void 0})});let g=(0,N.ZP)(e=>e.isRemoveDialogOpen),j=(0,N.ZP)(e=>e.refreshConcentrated),y=(0,Z.Z)(e=>e.connected),w=(0,c.ZP)(e=>e.isApprovePanelShown),k=(0,s.useRef)(),A=(0,s.useRef)(),C=(0,s.useRef)(),S=(0,N.ZP)(e=>e.currentAmmPool),B=null==S?void 0:S.base,I=null==S?void 0:S.quote,L=(0,N.ZP)(e=>e.targetUserPositionAccount),M=(0,N.ZP)(e=>e.coin1);(0,N.ZP)(e=>e.coin2);let T=(0,N.ZP)(e=>e.coin1Amount),q=(0,N.ZP)(e=>e.coin2Amount),E=(0,c.ZP)(e=>e.slippageTolerance),R=(0,N.ZP)(e=>e.coin1AmountMin),O=(0,N.ZP)(e=>e.coin2AmountMin),U=(0,ev.aT)(null==B?void 0:B.mint,null==M?void 0:M.mint)?"coin1":"coin2",[V,H]=(0,s.useState)(!1),[Y,K]=(0,s.useState)(!1),[J,_]=(0,s.useState)(!1),[Q,G]=(0,s.useState)(!1),X=(0,N.ZP)(e=>e.liquidity),{getPendingTotal:ee}=eA(L),et=(0,eN.Z)(()=>g?null==ee?void 0:ee():void 0,[g,ee]),ei=(0,c.ZP)(e=>e.isMobile),[es,en]=(0,s.useState)({});(0,s.useEffect)(()=>{if(!S||!L)return;let e=null==S?void 0:S.base,t=null==S?void 0:S.quote;N.ZP.setState({coin1:e,coin2:t,priceLowerTick:L.tickLower,priceUpperTick:L.tickUpper})},[S,L]),(0,s.useEffect)(()=>{N.ZP.setState({coin1AmountMin:(0,eb.dC)(T,(0,eb.lu)(1,E))})},[T]),(0,s.useEffect)(()=>{N.ZP.setState({coin2AmountMin:(0,eb.dC)(q,(0,eb.lu)(1,E))})},[q]);let eo=(0,s.useMemo)(()=>{if(S&&L){var e;return null===(e=S.positionAccount)||void 0===e?void 0:e.find(e=>(0,u.ZP)(e.nftMint)===(0,u.ZP)(L.nftMint))}},[S,L]),ec=(0,e6.z)(async()=>{if(!eo||!S||!B||!I)return;let[e,t]=await Promise.all([(0,ey.b)({mints:[S.state.mintA.mint,S.state.mintB.mint].filter(b.W)}),(0,eP.$)()]);try{var i,l;let s=n.jsJ.getAmountsFromLiquidity({poolInfo:S.state,liquidity:eo.liquidity,slippage:0,add:!1,tickLower:eo.tickLower,tickUpper:eo.tickUpper,token2022Infos:e,epochInfo:t,amountAddFee:!1}),o=(0,x.n)(S.base,(0,eb.h9)(s.amountSlippageA.amount,null!==(i=s.amountSlippageA.fee)&&void 0!==i?i:0)),a=(0,x.n)(S.quote,(0,eb.h9)(s.amountSlippageB.amount,null!==(l=s.amountSlippageB.fee)&&void 0!==l?l:0)),c=(0,x.n)(S.base,s.amountSlippageA.fee),r=(0,x.n)(S.quote,s.amountSlippageB.fee);en({coin1Amount:o,coin2Amount:a,coin1AmountFee:c,coin2AmountFee:r})}catch(e){console.error(e)}});(0,s.useEffect)(()=>{ec()},[(0,u.ZP)(null==eo?void 0:eo.nftMint),null==eo?void 0:eo.liquidity]);let er=(0,e6.z)(()=>{(null==eo?void 0:eo.liquidity)&&es.coin1Amount&&es.coin2Amount&&N.ZP.setState({coin1Amount:es.coin1Amount,coin2Amount:es.coin2Amount,coin1AmountFee:es.coin1AmountFee,coin2AmountFee:es.coin2AmountFee,isInput:!0,liquidity:eo.liquidity})}),[ed,em]=(0,s.useState)(!1);(0,s.useEffect)(()=>()=>em(!1),[null==B?void 0:B.mintString]);let[eu,ex]=(0,s.useState)(!1);return(0,s.useEffect)(()=>()=>ex(!1),[null==I?void 0:I.mintString]),(0,l.jsx)(eT.Z,{placement:"from-bottom",open:g,onClose:()=>{N.ZP.setState({isRemoveDialogOpen:!1,coin1Amount:void 0,coin2Amount:void 0,coin1AmountFee:void 0,coin2AmountFee:void 0})},children:e=>{let{close:s}=e;return(0,l.jsxs)(D.Z,{className:(0,a.m)("p-8 mobile:p-4 rounded-3xl w-[min(500px,90vw)] mobile:w-full border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card",p),size:"lg",children:[(0,l.jsxs)(el.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsxs)("div",{className:"mobile:text-base text-xl font-semibold text-white",children:["Remove Liquidity from ",null==B?void 0:B.symbol," - ",null==I?void 0:I.symbol]}),(0,l.jsx)($.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:s})]}),(0,l.jsxs)(W.Z,{className:"gap-3 mb-6 mobile:mb-4",children:[(0,l.jsx)(e0.Z,{hideTransferFee:!0,componentRef:A,haveCoinIcon:!0,topLeftLabel:"Base",topRightLabel:"Deposited: ".concat((0,h.B)(null==L?void 0:L.amountA)),maxValue:es.coin1Amount,canFillFullBalance:!0,token:B,value:(0,h.B)(T,{decimalLength:"auto ".concat(null!==(t=null==B?void 0:B.decimals)&&void 0!==t?t:10)}),onUserInput:e=>{N.ZP.setState({isInput:!0}),"coin1"===U?N.ZP.setState({coin1Amount:e,userCursorSide:"coin1"}):N.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},onCalculateTransferFee:e=>{"coin1"===U?N.ZP.setState({coin1AmountFee:e}):N.ZP.setState({coin2AmountFee:e})},onInputAmountClampInBalanceChange:e=>{let{negative:t,outOfMax:i}=e;K(t),H(i)},onEnter:e=>{var t,i;e&&(null===(t=k.current)||void 0===t||null===(i=t.click)||void 0===i||i.call(t))},onCustomMax:()=>{er()}}),(0,l.jsx)(e0.Z,{hideTransferFee:!0,componentRef:C,haveCoinIcon:!0,topLeftLabel:"Quote",topRightLabel:"Deposited: ".concat((0,h.B)(null==L?void 0:L.amountB)),maxValue:es.coin2Amount,canFillFullBalance:!0,token:I,value:(0,h.B)(q,{decimalLength:"auto ".concat(null!==(i=null==I?void 0:I.decimals)&&void 0!==i?i:10)}),onUserInput:e=>{N.ZP.setState({isInput:!0}),"coin1"===U?N.ZP.setState({coin2Amount:e,userCursorSide:"coin2"}):N.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},onCalculateTransferFee:e=>{"coin1"===U?N.ZP.setState({coin2AmountFee:e}):N.ZP.setState({coin1AmountFee:e})},onInputAmountClampInBalanceChange:e=>{let{negative:t,outOfMax:i}=e;G(t),_(i)},onEnter:e=>{var t,i;e&&(null===(t=k.current)||void 0===t||null===(i=t.click)||void 0===i||i.call(t))},onCustomMax:()=>{er()}}),(0,l.jsx)(ti,{}),(0,l.jsxs)("div",{className:"py-3 px-3 ring-1 mobile:ring-1 ring-[#abc4ff40] rounded-xl mobile:rounded-xl ",children:[(0,l.jsxs)(W.Z,{children:[(0,l.jsx)(el.Z,{className:"flex justify-start items-center text-[#ABC4FF] font-medium text-sm",children:(0,l.jsx)("div",{className:"text-base mobile:text-sm",children:"Pending Yield"})}),(0,l.jsx)(el.Z,{className:"flex justify-end items-center text-[#ABC4FF] font-medium text-sm",children:(0,l.jsx)("div",{className:"text-lg text-white",children:(0,eh.Z)(et)})}),(0,l.jsxs)(e1.Z,{show:(0,f.gt)(R,0)||(0,f.gt)(O,0),children:[(0,l.jsxs)(el.Z,{className:"flex justify-start gap-1 items-center text-[#ABC4FF] font-medium text-sm",children:["Minimum Received",(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{size:"xs",heroIconName:"question-mark-circle",className:"cursor-help"}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[30em]",children:"The least amount of tokens you will receive. Tokens using the Token 2022 program may have transfer fees programmed for token interactions."})})]})]}),(0,l.jsxs)(W.Z,{className:"pt-2 gap-2",children:[(0,l.jsx)(ts,{token:B,amountWithoutFee:R,className:"px-1",onFullfill:()=>em(!0)}),(0,l.jsx)(ts,{token:I,amountWithoutFee:O,className:"px-1",onFullfill:()=>ex(!0)})]})]})]}),(0,l.jsx)(el.Z,{className:"flex justify-between items-center text-[#ABC4FF] font-medium text-sm"})]})]}),(0,l.jsxs)(el.Z,{className:"flex-col gap-1",children:[(0,l.jsx)(z.Z,{size:ei?"sm":void 0,className:"frosted-glass frosted-glass-teal mobile:text-sm",isLoading:w,componentRef:k,validators:[{should:y,forceActive:!0,fallbackProps:{onClick:()=>c.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:!V,fallbackProps:{children:"".concat(null!==(o=null==B?void 0:B.symbol)&&void 0!==o?o:""," Amount Too Large")}},{should:!Y,fallbackProps:{children:"Negative ".concat(null!==(r=null==B?void 0:B.symbol)&&void 0!==r?r:""," Amount")}},{should:!J,fallbackProps:{children:"".concat(null!==(d=null==I?void 0:I.symbol)&&void 0!==d?d:""," Amount Too Large")}},{should:!Q,fallbackProps:{children:"Negative ".concat(null!==(m=null==I?void 0:I.symbol)&&void 0!==m?m:""," Amount")}},{should:(0,f.gt)(X,0),fallbackProps:{children:"Enter Amount"}},{should:(!(0,b.W)(B)||ed)&&(!(0,b.W)(I)||eu),fallbackProps:{children:"Loading Token 2022 Info..."}}],onClick:()=>{P().then(e=>{(null==e?void 0:e.allSuccess)&&(null==v||v(),j(),N.ZP.setState({isRemoveDialogOpen:!1,isMyPositionDialogOpen:!1,coin1Amount:void 0,coin2Amount:void 0,coin1AmountFee:void 0,coin2AmountFee:void 0}))})},children:"Withdraw Liquidity"}),(0,l.jsx)(z.Z,{size:ei?"sm":void 0,type:"text",className:"text-sm mobile:text-xs text-[#ABC4FF] opacity-50 backdrop-filter-none",onClick:s,children:"Cancel"})]})]})}})}function ts(e){var t;let{token:i,amountWithoutFee:s,className:n,onFullfill:o}=e,r=(0,c.ZP)(e=>e.isMobile),d=i&&s?(0,x.n)(i,s,{alreadyDecimaled:!0}):void 0,m=d&&(0,b.W)(i)&&(0,v.w)({amount:d});return(0,l.jsxs)(el.Z,{className:(0,a.m)("w-full justify-between",n),children:[(0,l.jsxs)(el.Z,{className:"gap-2 items-center",children:[(0,l.jsx)(O.Z,{size:r?"xs":"md",token:i}),null!==(t=null==i?void 0:i.symbol)&&void 0!==t?t:"--"]}),(0,l.jsx)(el.Z,{className:"text-lg text-white items-center",children:(0,b.W)(i)?(0,l.jsx)(eX.j,{promise:m,fallback:"calculating",onFullfilled:o,children:e=>e?(0,h.B)(e.pure):"--"}):(0,h.B)(d)})]})}function tn(){let e=(0,N.ZP)(e=>e.currentTab);return(0,F.Z)(()=>{let e=function(){var e,t;let i=(0,I.mu)(),l=String(null!==(t=null!==(e=i.ammId)&&void 0!==e?e:i.ammid)&&void 0!==t?t:"")||void 0;return(0,B.gm)(l)?l:void 0}();e&&N.ZP.setState(t=>({expandedItemIds:(0,S.jX)(t.expandedItemIds,e),searchText:e}))},{effectMethod:"isoLayoutEffect"}),(0,C.Z)(),(0,r.q)(),(0,l.jsxs)(ee.Z,{contentButtonPaddingShorter:!0,mobileBarTitle:{items:[{value:N.u0.ALL,barLabel:N.u0.ALL},{value:N.u0.MY_POOLS,barLabel:N.u0.MY_POOLS}],currentValue:e,onChange:e=>N.ZP.setState({currentTab:e}),urlSearchQueryKey:"tab",drawerTitle:"CONCENTRATED POOLS"},metaTitle:"Concentrated Pools - Raydium",children:[(0,l.jsx)(to,{}),(0,l.jsx)(tb,{}),(0,l.jsx)(eK,{}),(0,l.jsx)(e4,{}),(0,l.jsx)(tl,{})]})}function to(){let e=(0,N.ZP)(e=>e.tvl),t=(0,N.ZP)(e=>e.volume24h),i=!!(null!=e&&null!=t),s=(0,c.ZP)(e=>e.isMobile);return s?i?(0,l.jsxs)(el.Z,{className:"mx-auto my-2 text-base mobile:text-xs justify-self-start self-end text-[#abc4ff80] gap-4",children:[(0,l.jsxs)("div",{className:"whitespace-nowrap",children:["TVL: ",(0,l.jsxs)("span",{className:"font-medium text-[#abc4ff]",children:["$",(0,ex.Z)(e)]})]}),(0,l.jsxs)("div",{className:"whitespace-nowrap",children:["Volume24H: ",(0,l.jsxs)("span",{className:"font-medium text-[#abc4ff]",children:["$",(0,ex.Z)(t)]})]})]}):null:(0,l.jsxs)(K.Z,{className:"grid-cols-3 justify-between items-center pb-8 pt-0",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-2xl font-semibold justify-self-start text-white",children:"Concentrated Pools"}),i&&(0,l.jsxs)(el.Z,{className:"title text-base mobile:text-xs justify-self-start self-end text-[#abc4ff80] gap-4",children:[(0,l.jsxs)("div",{className:"whitespace-nowrap",children:["TVL: ",(0,l.jsxs)("span",{className:"font-medium text-[#abc4ff]",children:["$",(0,ex.Z)(e)]})]}),(0,l.jsxs)("div",{className:"whitespace-nowrap",children:["Volume24H: ",(0,l.jsxs)("span",{className:"font-medium text-[#abc4ff]",children:["$",(0,ex.Z)(t)]})]})]})]}),(0,l.jsx)(ta,{}),(0,l.jsx)(tv,{})]})}function ta(e){let{className:t}=e,i=(0,N.ZP)(e=>e.currentTab),s=(0,c.ZP)(e=>e.isMobile);return s?(0,l.jsx)(eo.Z,{currentValue:i,urlSearchQueryKey:"tab",values:(0,S.DB)([N.u0.ALL,N.u0.MY_POOLS]),onChange:e=>N.ZP.setState({currentTab:e}),className:t}):(0,l.jsx)(eo.Z,{currentValue:i,urlSearchQueryKey:"tab",values:(0,S.DB)([N.u0.ALL,N.u0.MY_POOLS]),onChange:e=>N.ZP.setState({currentTab:e}),className:(0,a.m)("justify-self-center mobile:col-span-full",t)})}function tc(e){let{className:t}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(et.Z,{placement:"bottom-right",children:[(0,l.jsx)(et.Z.Button,{children:(0,l.jsx)("div",{className:(0,a.m)("mx-1 rounded-full p-2 text-[#abc4ff] clickable justify-self-start",t),children:(0,l.jsx)($.Z,{className:"w-4 h-4",iconClassName:"w-4 h-4",heroIconName:"dots-vertical"})})}),(0,l.jsx)(et.Z.Panel,{children:(0,l.jsx)("div",{children:(0,l.jsx)(D.Z,{className:"flex flex-col py-3 px-4  max-h-[80vh] border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card",size:"lg",children:(0,l.jsxs)(K.Z,{className:"grid-cols-1 items-center gap-2",children:[(0,l.jsx)(th,{}),(0,l.jsx)(tm,{}),(0,l.jsx)(tf,{}),(0,l.jsx)(td,{}),(0,l.jsx)(tv,{})]})})})})]})})}function tr(e){let{className:t}=e,i=(0,c.ZP)(e=>e.isMobile),s=(0,N.ZP)(e=>e.searchText);return(0,l.jsx)(J.Z,{value:s,className:(0,a.m)("px-2 py-2 mobile:py-1 gap-2 ring-inset ring-1 ring-[rgba(196,214,255,0.5)] rounded-xl mobile:rounded-lg pc:w-[12vw] mobile:w-auto",t),inputClassName:"font-medium text-sm mobile:text-xs text-[rgba(196,214,255,0.5)] placeholder-[rgba(196,214,255,0.5)]",prefix:(0,l.jsx)($.Z,{heroIconName:"search",size:i?"sm":"smi",className:"text-[rgba(196,214,255,0.5)]"}),suffix:(0,l.jsx)($.Z,{heroIconName:"x",size:i?"xs":"sm",className:"text-[rgba(196,214,255,0.5)] transition clickable ".concat(s?"opacity-100":"opacity-0 pointer-events-none"),onClick:()=>{N.ZP.setState({searchText:""})}}),placeholder:"Search All",onUserInput:e=>{N.ZP.setState({searchText:e})}})}function td(){let e=(0,c.ZP)(e=>e.isApprovePanelShown),t=(0,Z.Z)(e=>e.connected),i=(0,N.ZP)(e=>e.refreshConcentrated),o=(0,c.ZP)(e=>e.isMobile),a=(0,N.ZP)(e=>e.hydratedAmmPools),r=(0,s.useMemo)(()=>a.some(e=>{var t;return null===(t=e.userPositionAccount)||void 0===t?void 0:t.find(e=>(0,f.gt)(e.tokenFeeAmountB,n.xEJ)||(0,f.gt)(e.tokenFeeAmountA,n.xEJ)||e.rewardInfos.find(e=>(0,f.gt)(e.penddingReward,n.xEJ)))}),[a]);return(0,l.jsx)(z.Z,{className:"frosted-glass-teal",isLoading:e,validators:[{should:t},{should:r}],onClick:()=>A().then(e=>{(null==e?void 0:e.allSuccess)&&i()}),size:o?"xs":"sm",children:"Harvest All"})}function tm(){let e=(0,N.ZP)(e=>e.ownedPoolOnly),t=(0,Z.Z)(e=>e.owner),i=(0,N.ZP)(e=>e.hydratedAmmPools),n=(0,Z.Z)(e=>e.connected),o=(0,s.useMemo)(()=>{let e=!1;if(t){for(let l of i)if((0,ev.aT)(l.creator,t)){e=!0;break}}return e},[t,i]);return n&&o?(0,l.jsxs)(el.Z,{className:"justify-self-end  mobile:justify-self-auto items-center",children:[(0,l.jsx)("span",{className:"text-[rgba(196,214,255,0.5)] whitespace-nowrap font-medium text-sm mobile:text-xs",children:"Show Created"}),(0,l.jsx)(en.Z,{className:"ml-2 ",defaultChecked:e,onToggle:e=>N.ZP.setState({ownedPoolOnly:e})})]}):null}function tu(e){let{className:t,filterPoolCount:i,showCount:s=!1}=e;return(0,l.jsxs)(el.Z,{className:(0,a.m)(t,"flex justify-between items-center flex-wrap mr-4 gap-y-4"),children:[(0,l.jsxs)(W.Z,{children:[(0,l.jsxs)("div",{className:"flex items-end",children:[(0,l.jsx)("div",{className:"font-medium text-xl mobile:text-base text-white",children:"Concentrated Pools"}),s&&(0,l.jsxs)("div",{className:"font-normal text-sm mobile:text-base text-[rgba(196,214,255,.5)] ml-2 mb-1",children:["(Filtered Pools: ",i,")"]})]}),(0,l.jsxs)("div",{className:"font-medium text-[rgba(196,214,255,.5)] text-base mobile:text-sm",children:["Concentrate liquidity for increased capital efficiency."," ",(0,l.jsx)(_.Z,{className:"inline-block",href:"https://docs.raydium.io/raydium/concentrated-liquidity/what-is-concentrated-liquidity",children:"Learn more"})]})]}),(0,l.jsxs)(el.Z,{className:"gap-4 items-center",children:[(0,l.jsx)(tm,{}),(0,l.jsx)(td,{}),(0,l.jsx)(tf,{}),(0,l.jsx)(tr,{className:"h-[36px]"})]})]})}function tx(e){let{target:t}=e,i=(0,c.ZP)(e=>e.isMobile),n=(0,N.ZP)(e=>e.filter[t]),o=(0,N.ZP)(e=>e.setFilter),r=(0,N.ZP)(e=>e.resetFilter),d=(0,s.useCallback)(e=>{o(t,"min",String(e||""))},[t]),m=(0,eC.Nr)(d,{debouncedOptions:{delay:300}}),u=(0,s.useCallback)(e=>{o(t,"max",String(e||""))},[t]),x=(0,eC.Nr)(u,{debouncedOptions:{delay:300}}),p=(0,s.useMemo)(()=>n.min&&n.max&&(0,f.gt)(n.min,n.max),[n]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(et.Z,{placement:"bottom",triggerBy:i?"press":"hover",children:[(0,l.jsx)(et.Z.Button,{children:(0,l.jsx)("div",{className:(0,a.m)("rounded-full px-1 clickable justify-self-start"),children:(0,l.jsx)($.Z,{size:"sm",heroIconName:"funnel-solid",className:n.max||n.min?"text-[#abc4ff]":"text-[#abc4ff33]"})})}),(0,l.jsx)(et.Z.Panel,{children:(0,l.jsx)("div",{children:(0,l.jsxs)(D.Z,{className:"flex flex-col py-3 px-4  max-h-[80vh] border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card  items-center",size:"lg",children:[(0,l.jsxs)(K.Z,{className:"grid-cols-1 items-center gap-2",children:[(0,l.jsx)(Y.Z,{className:"px-3 py-2 mobile:py-1 ring-inset ring-1 ".concat(p?"ring-[rgba(255,86,86,0.94)]":"ring-[rgba(196,214,255,0.5)]"," rounded-xl mobile:rounded-lg pc:w-[140px] mobile:w-auto"),placeholder:"0",decimalCount:2,onUserInput:m,value:n.min,prefix:"From:",prefixClassName:"mobile:text-xs text-sm font-medium text-[rgba(196,214,255,.5)] mr-1",inputClassName:"font-medium text-sm mobile:text-xs text-[rgba(196,214,255)] placeholder-[rgba(196,214,255,0.5)]"}),(0,l.jsx)(Y.Z,{className:"px-3 py-2 mobile:py-1 ring-inset ring-1 ".concat(p?"ring-[rgba(255,86,86,0.94)]":"ring-[rgba(196,214,255,0.5)]"," rounded-xl mobile:rounded-lg pc:w-[140px] mobile:w-auto"),value:n.max,placeholder:"∞",decimalCount:2,onUserInput:x,prefix:"To:",prefixClassName:"mobile:text-xs text-sm font-medium text-[rgba(196,214,255,.5)] mr-1",inputClassName:"font-medium text-sm mobile:text-xs text-[rgba(196,214,255)] placeholder-[rgba(196,214,255,0.5)]"})]}),p&&(0,l.jsx)("div",{className:"text-[rgba(255,86,86,0.94)] mt-2",children:"filter value unavailable"}),(0,l.jsx)(z.Z,{size:"sm",className:"frosted-glass-teal mt-2 py-1 rounded-xl w-[140px]",onClick:()=>{r(t)},children:"Reset"})]})})})]})})}function tf(e){let{className:t}=e,i=(0,N.ZP)(e=>e.timeBasis);return(0,l.jsx)(es.Z,{className:(0,a.m)("z-20",t),candidateValues:Object.values(N.fi),localStorageKey:"ui-time-basis",defaultValue:i,prefix:"Time Basis:",onChange:e=>{N.ZP.setState({timeBasis:null!=e?e:N.fi.DAY})}})}function tp(e){let{className:t,onChange:i}=e,s=(0,N.ZP)(e=>e.timeBasis);return(0,l.jsx)(es.Z,{className:t,candidateValues:[{label:"Pool",value:"name"},{label:"Liquidity",value:"liquidity"},{label:"Volume ".concat(s),value:s===N.fi.DAY?"volume24h":s===N.fi.WEEK?"volume7d":"volume30d"},{label:"Fees ".concat(s),value:s===N.fi.DAY?"fee24h":s===N.fi.WEEK?"fee7d":"fee30d"},{label:"APR ".concat(s),value:s===N.fi.DAY?"apr24h":s===N.fi.WEEK?"apr7d":"apr30d"},{label:"Favorite",value:"favorite"}],prefix:"Sort by:",onChange:i})}function th(e){let{className:t}=e,i=(0,c.ZP)(e=>e.isMobile),n=(0,N.ZP)(e=>e.refreshConcentrated);return(0,s.useMemo)(()=>i?(0,l.jsxs)(el.Z,{className:(0,a.m)("items-center",t),children:[(0,l.jsx)("span",{className:"text-[rgba(196,214,255,0.5)] font-medium text-sm mobile:text-xs",children:"Refresh Pools"}),(0,l.jsx)(ei.Z,{refreshKey:"clmm-pools",freshFunction:()=>{n()}})]}):(0,l.jsx)("div",{className:(0,a.m)("justify-self-end",t),children:(0,l.jsx)(ei.Z,{refreshKey:"clmm-pools",freshFunction:()=>{n()}})}),[i,n])}function tv(e){let{className:t}=e;return(0,l.jsxs)(el.Z,{className:(0,a.m)("justify-self-end mobile:justify-self-auto gap-1 py-1 flex-wrap items-center opacity-100 pointer-events-auto clickable transition",t),onClick:()=>{(0,M.Eh)("/clmm/create-pool")},children:[(0,l.jsx)($.Z,{heroIconName:"plus-circle",className:"text-[#abc4ff] mobile:text-[#abc4ff80]",size:"sm"}),(0,l.jsx)("span",{className:"text-[#abc4ff] mobile:text-[#abc4ff80] font-medium text-sm mobile:text-xs",children:"Create Concentrated Pool"})]})}function tb(){var e;let t=(0,N.ZP)(e=>e.hydratedAmmPools),i=(0,N.ZP)(e=>e.searchText),n=(0,eC.nj)(i,{debouncedOptions:{delay:200}}),o=(0,N.ZP)(e=>e.timeBasis),a=(0,N.ZP)(e=>e.aprCalcMode),r=(0,N.ZP)(e=>e.currentTab),d=(0,N.ZP)(e=>e.ownedPoolOnly),m=(0,N.ZP)(e=>e.poolSortConfig),x=(0,N.ZP)(e=>e.filter),p=(0,Z.Z)(e=>e.owner),v=(0,c.ZP)(e=>e.isMobile),[b]=(0,N.N3)(),[g,j]=(0,s.useState)(!1),[P,y]=(0,s.useState)(void 0),[w,k]=(0,s.useState)(!1),A=(0,s.useMemo)(()=>t.filter(e=>r!==N.u0.MY_POOLS||void 0!==e.userPositionAccount),[t,r]),C=(0,s.useMemo)(()=>A.filter(e=>!d||!p||(0,ev.aT)(e.creator,p)),[A,d,p]),S=(0,T.ZP)(e=>e.isTokenUnnamedAndNotUserCustomized),F=(0,s.useMemo)(()=>(0,ej.K)(C,{text:n,matchConfigs:e=>{var t,i;return[e.base&&!S(e.base.mint)?e.base.symbol:void 0,e.quote&&!S(e.quote.mint)?e.quote.symbol:void 0,{text:e.idString,entirely:!0},{text:(0,u.ZP)(null===(t=e.base)||void 0===t?void 0:t.mint),entirely:!0},{text:(0,u.ZP)(null===(i=e.quote)||void 0===i?void 0:i.mint),entirely:!0}]},sortBetweenSamePriority:(e,t)=>{let{item:i}=e,{item:l}=t;return(0,f.gt)(i.volume24h,l.volume24h)}}),[C,n,o]),B=(0,s.useDeferredValue)(F),I=(0,s.useRef)();b&&(I.current=b);let{sortedData:L,setConfig:M,sortConfig:q,clearSortConfig:E}=(0,eF.Z)(B,{backgroundSortConfig:{sortCompare:[t=>{var i;return null===(i=I.current)||void 0===i?void 0:i.includes(null!==(e=t.idString)&&void 0!==e?e:(0,u.ZP)(t.id))}]}});(0,eS.Z)(e=>{let{runed:t}=e;void 0!==b&&t(),null!=b&&(M({key:"init",sortCompare:[e=>b.includes(e.idString)],mode:"decrease"}),t())},[b]),(0,s.useEffect)(()=>{q&&N.ZP.setState({poolSortConfig:{...q}})},[q]),(0,eS.Z)(e=>{let{runed:t}=e;m&&(M({...m}),t())},[m]),(0,s.useEffect)(()=>{q&&"name"!==q.key&&"liquidity"!==q.key?j(q.key.includes(o.toLowerCase())):j(!0)},[q,o]);let R=(0,eC.Nr)(()=>{L&&y(L)},{debouncedOptions:{delay:300}});(0,s.useEffect)(R,[L]);let z=(0,s.useMemo)(()=>{let e="24H"===o?"24h":"7D"===o?"7d":"30d";return{liquidity:"tvl",volume:"volume"+e,fees:"volumeFee"+e,apr:"totalApr"+e}},[o]),D=(0,s.useMemo)(()=>{let e=(0,eg.lw)(x,(e,t)=>!!e.max||!!e.min),t=Object.keys(e);return 0===t.length?(k(!1),P):(k(!0),null==P?void 0:P.filter(e=>{let i=!0;for(let l of t){let t="apr"===l,s=t?(0,eb.hi)(x[l].max,100):x[l].max,n=t?(0,eb.hi)(x[l].min,100):x[l].min;if(!n&&!s)continue;let o=e=>(0,h.B)(e[z[l]]),a=(0,f.G)(o(e),s),c=(0,f.eg)(o(e),n);if(!(!n&&a||!s&&c||n&&s&&((0,f.gt)(n,s)||(0,f.lt)(s,n)))&&(!a||!c)){i=!1;break}}return i}))},[P,x,z]),O=(0,s.useMemo)(()=>(0,l.jsxs)(el.Z,{type:"grid-x",className:"mb-3 h-12 justify-between sticky -top-6 backdrop-filter z-10 backdrop-blur-md bg-[rgba(20,16,65,0.2)] mr-scrollbar rounded-xl mobile:rounded-lg gap-2 grid-cols-[auto,1.6fr,1fr,1fr,1fr,1fr,1fr,auto]",children:[(0,l.jsx)(el.Z,{className:"w-20 pl-9"}),(0,l.jsxs)(K.Z,{className:"grid-cols-[.4fr,1.2fr] clickable clickable-filter-effect no-clicable-transform-effect",children:[(0,l.jsx)("div",{}),(0,l.jsxs)(el.Z,{className:"font-medium text-[#ABC4FF] text-sm items-center cursor-pointer",onClick:()=>{M({key:"name",sortModeQueue:["increase","decrease","none"],sortCompare:e=>e.name})},children:["Pool",(0,l.jsx)($.Z,{className:"ml-1",size:"sm",iconSrc:(null==q?void 0:q.key)==="name"&&"none"!==q.mode&&g?(null==q?void 0:q.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"})]})]}),(0,l.jsxs)(el.Z,{className:"font-medium text-[#ABC4FF] text-sm items-center cursor-pointer clickable clickable-filter-effect no-clicable-transform-effect overflow-hidden",onClick:()=>{M({key:"liquidity",sortCompare:e=>e.tvl})},children:["Liquidity",(0,l.jsx)($.Z,{className:"ml-1",size:"sm",iconSrc:(null==q?void 0:q.key)==="liquidity"&&"none"!==q.mode&&g?(null==q?void 0:q.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"}),(0,l.jsx)(tx,{target:"liquidity"})]}),(0,l.jsxs)(el.Z,{className:"font-medium text-[#ABC4FF] text-sm items-center cursor-pointer clickable clickable-filter-effect no-clicable-transform-effect overflow-hidden",onClick:()=>{let e=o===N.fi.DAY?"volume24h":o===N.fi.WEEK?"volume7d":"volume30d";M({key:e,sortCompare:t=>t[e]})},children:["Volume ",o,(0,l.jsx)($.Z,{className:"ml-1",size:"sm",iconSrc:((null==q?void 0:q.key)==="volume24h"||(null==q?void 0:q.key)==="volume7d"||(null==q?void 0:q.key)==="volume30d")&&"none"!==q.mode&&g?(null==q?void 0:q.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"}),(0,l.jsx)(tx,{target:"volume"})]}),(0,l.jsxs)(el.Z,{className:"font-medium text-[#ABC4FF] text-sm items-center cursor-pointer clickable clickable-filter-effect no-clicable-transform-effect",onClick:()=>{let e=o===N.fi.DAY?"volumeFee24h":o===N.fi.WEEK?"volumeFee7d":"volumeFee30d";M({key:e,sortCompare:t=>t[e]})},children:["Fees ",o,(0,l.jsx)($.Z,{className:"ml-1",size:"sm",iconSrc:((null==q?void 0:q.key)==="volumeFee24h"||(null==q?void 0:q.key)==="volumeFee7d"||(null==q?void 0:q.key)==="volumeFee30d")&&"none"!==q.mode&&g?(null==q?void 0:q.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"}),(0,l.jsx)(tx,{target:"fees"})]}),(0,l.jsx)(el.Z,{className:"font-medium text-[#ABC4FF] text-sm items-center cursor-pointer clickable clickable-filter-effect no-clicable-transform-effect overflow-hidden",children:"Rewards"}),(0,l.jsxs)(el.Z,{className:"font-medium text-[#ABC4FF] text-sm items-center cursor-pointer clickable clickable-filter-effect no-clicable-transform-effect  overflow-hidden",onClick:()=>{M({key:"24H"===o?"apr24h":"7D"===o?"apr7d":"apr30d",sortCompare:e=>e.state[o===N.fi.DAY?"day":o===N.fi.WEEK?"week":"month"].apr})},children:["APR ",o,(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{className:"ml-1 cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,l.jsx)(ea.Z.Panel,{className:"max-w-[250px]",children:"This is the estimated APR for the whole pool. Your actual APR will vary according to the price range you select."})]}),(0,l.jsx)($.Z,{className:"ml-1",size:"sm",iconSrc:(null==q?void 0:q.key.startsWith("apr"))&&"none"!==q.mode&&g?(null==q?void 0:q.mode)==="decrease"?"/icons/msic-sort-down.svg":"/icons/msic-sort-up.svg":"/icons/msic-sort.svg"}),(0,l.jsx)(tx,{target:"apr"})]}),(0,l.jsx)(th,{className:"pr-8 self-center"})]}),[q,o,a,g]),U=v?(0,l.jsx)("div",{children:(0,l.jsxs)(el.Z,{className:"mb-4",children:[(0,l.jsxs)(K.Z,{className:"grow gap-2 grid-cols-auto-fit",children:[(0,l.jsx)(tr,{}),(0,l.jsx)(tp,{onChange:e=>{e?M({key:e,sortCompare:"favorite"===e?e=>null==b?void 0:b.includes(e.idString):t=>t[e]}):E()}})]}),(0,l.jsx)(tc,{className:"self-center"})]})}):(0,l.jsx)("div",{children:(0,l.jsx)(el.Z,{className:"w-full justify-between pb-5 items-center",children:(0,l.jsx)(tu,{className:"flex-grow",filterPoolCount:null==D?void 0:D.length,showCount:w})})});return(0,l.jsxs)(H.Z,{haveMinHeight:!0,wrapperClassName:"flex-1 overflow-hidden flex flex-col",className:"p-10 pb-4 mobile:px-3 mobile:py-3 w-full flex flex-col flex-grow h-full",children:[U,!v&&O,(0,l.jsx)(tg,{sortedItems:D,searchedItemsLength:B.length,hasSearchText:!!i,sourceItemsLength:A.length})]})}function tg(e){let{sortedItems:t,sourceItemsLength:i,hasSearchText:s,searchedItemsLength:n}=e,o=(0,N.ZP)(e=>e.loading),a=(0,N.ZP)(e=>e.expandedItemIds),[c,r]=(0,N.N3)();return o||0!==n&&(0===n||(null==t?void 0:t.length)!==0)?t&&t.length?(0,l.jsx)(G.Z,{items:t,getItemKey:e=>e.idString,className:"gap-3 mobile:gap-2 text-[#ABC4FF] flex-1 -mx-2 px-2",children:e=>(0,l.jsxs)(V.Z,{open:a.has(e.idString),onToggle:()=>N.ZP.setState(t=>({expandedItemIds:(0,eZ.hU)(t.expandedItemIds,e.idString)})),children:[(0,l.jsx)(V.Z.Face,{children:t=>{let{isOpen:i}=t;return(0,l.jsx)(tj,{open:i,info:e,isFavourite:null==c?void 0:c.includes(e.idString),onUnFavorite:e=>{r(t=>(0,S.cl)(null!=t?t:[],e))},onStartFavorite:e=>{r(t=>(0,S.jX)(null!=t?t:[],e))}})}}),(0,l.jsx)(V.Z.Body,{children:t=>{let{isOpen:i}=t;return(0,l.jsx)(tP,{poolInfo:e,open:i})}})]})}):(0,l.jsx)("div",{className:"text-center text-2xl p-12 opacity-50 text-[rgb(171,196,255)]",children:(0,l.jsx)(X.Z,{})}):(0,l.jsx)("div",{className:"text-center text-2xl p-12 opacity-50 text-[rgb(171,196,255)]",children:"(No results found)"})}function tj(e){let{open:t,info:i,isFavourite:n,onUnFavorite:o,onStartFavorite:r}=e,m=(0,c.ZP)(e=>e.isMobile),x=(0,c.ZP)(e=>e.isTablet),f=(0,N.ZP)(e=>e.timeBasis),p=(0,T.ZP)(e=>e.tokenListSettings),v=p["UnNamed Token List"].mints,b=(0,L.O)(e=>e.lpPrices),g=(0,T.ZP)(e=>e.tokenPrices),j=(0,s.useMemo)(()=>({...b,...g}),[b,g]),Z=(0,s.useMemo)(()=>{let e=i.rewardInfos.filter(e=>e.endTime>new Date().getTime()-864e6).map((e,t)=>{var s,n,o,a;let c=(0,er.tD)(e.endTime),r=(0,er.ZM)(e.openTime),d=(0,er.tD)(e.openTime-864e5);return(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)(tZ,{rewardInfo:e}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsxs)("div",{children:[(0,l.jsxs)(el.Z,{className:"text-sm justify-between items-center min-w-[260px] gap-4",children:[(0,l.jsxs)(el.Z,{className:"gap-1.5 items-center",children:[(0,l.jsx)(O.Z,{size:m?"xs":"smi",token:e.rewardToken}),c?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"text-white",children:(0,ex.Z)((0,h.B)(e.rewardPerWeek))}),(0,l.jsxs)("span",{className:"text-[#ABC4FF]",children:[null!==(o=null===(s=e.rewardToken)||void 0===s?void 0:s.symbol)&&void 0!==o?o:"--"," per week"]})]})]}),c?null:(0,l.jsx)("span",{className:"text-white/50",children:(0,eh.Z)((0,ep.Z)(e.rewardPerWeek,null!==(a=j[(0,u.ZP)(null===(n=e.rewardToken)||void 0===n?void 0:n.mint)])&&void 0!==a?a:null),{decimalPlace:0})})]}),(0,l.jsx)("div",{className:"mb-1 mt-1",children:e.openTime&&e.endTime&&(c?"Reward Ended":r?"Reward Not Started":"Reward Period")}),e.openTime&&r&&d&&(0,l.jsxs)("div",{className:"opacity-50",children:["Start in ",(0,ed.dS)((0,ec._3)(e.openTime))]}),e.openTime&&e.endTime&&(0,l.jsxs)("div",{className:"opacity-50",children:[(0,ec.xn)(e.openTime,{hideHourMinuteSecond:!0})," ~"," ",(0,ec.xn)(e.endTime,{hideHourMinuteSecond:!0})]}),e.tokenMint&&(0,l.jsx)(q.U,{showDigitCount:6,addressType:"token",canCopy:!0,canExternalLink:!0,textClassName:"text-xs",className:"w-full opacity-50 mt-2 contrast-75",children:(0,u.ZP)(e.tokenMint)}),(null==v?void 0:v.has((0,u.ZP)(e.tokenMint)))&&(0,l.jsx)("div",{className:"max-w-[300px] mt-2",children:"This token does not currently have a ticker symbol. Check to ensure it is the token you want to interact with."})]},"".concat(i.idString,"-reward-detail-content-id-").concat(t))})]},"".concat(i.idString,"-reward-badge-id-").concat(t))});return(0,l.jsx)("div",{className:(0,a.m)("flex flex-wrap justify-start items-center gap-2",0===e.length?"h-4":""),children:e})},[i.idString,i.rewardInfos,m,j]),P=(0,d.w)(i)?f===N.fi.DAY?{total:i.totalApr24h,itemList:[i.feeApr24h,...i.rewardApr24h]}:f===N.fi.WEEK?{total:i.totalApr7d,itemList:[i.feeApr7d,...i.rewardApr7d]}:{total:i.totalApr30d,itemList:[i.feeApr30d,...i.rewardApr30d]}:void 0,y=(0,l.jsxs)(el.Z,{type:"grid-x",className:"py-5 mobile:py-4 mobile:px-5 bg-[#141041] items-center gap-2 grid-cols-[auto,1.6fr,1fr,1fr,1fr,1fr,1fr,auto] mobile:grid-cols-[1fr,1fr,1fr,auto] rounded-t-3xl mobile:rounded-t-lg ".concat(t?"":"rounded-b-3xl mobile:rounded-b-lg"," transition-all"),children:[(0,l.jsx)("div",{className:"w-12 self-center ml-6 mr-2",children:n?(0,l.jsx)($.Z,{iconSrc:"/icons/misc-star-filled.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==o||o(i.idString)},className:"clickable clickable-mask-offset-2 m-auto self-center"}):(0,l.jsx)($.Z,{iconSrc:"/icons/misc-star-empty.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==r||r(i.idString)},className:"clickable clickable-mask-offset-2 opacity-30 hover:opacity-80 transition m-auto self-center"})}),(0,l.jsx)(tA,{info:i,className:"pl-0 overflow-hidden"}),(0,l.jsx)(tC,{name:"Liquidity",value:(0,d.w)(i)?(0,eh.Z)(i.tvl,{autoSuffix:x,decimalPlace:0}):void 0}),(0,l.jsx)(tC,{name:"Volume(".concat(f,")"),value:(0,d.w)(i)?f===N.fi.DAY?(0,eh.Z)(i.volume24h,{autoSuffix:x,decimalPlace:0}):f===N.fi.WEEK?(0,eh.Z)(i.volume7d,{autoSuffix:x,decimalPlace:0}):(0,eh.Z)(i.volume30d,{autoSuffix:x,decimalPlace:0}):void 0}),(0,l.jsx)(tC,{name:"Fees(".concat(f,")"),value:(0,d.w)(i)?f===N.fi.DAY?(0,eh.Z)(i.volumeFee24h,{autoSuffix:x,decimalPlace:0}):f===N.fi.WEEK?(0,eh.Z)(i.volumeFee7d,{autoSuffix:x,decimalPlace:0}):(0,eh.Z)(i.volumeFee30d,{autoSuffix:x,decimalPlace:0}):void 0}),(0,l.jsx)(tC,{name:"Rewards",value:Z}),(0,l.jsx)(tC,{className:"overflow-hidden",name:"APR(".concat(f,")"),value:(0,l.jsx)("div",{style:{display:"inline-block",width:"100%"},children:(0,l.jsxs)(ea.Z,{panelClassName:"p-0 rounded-xl",children:[(0,l.jsxs)("div",{children:[(0,eu.Q)(null==P?void 0:P.total),(0,l.jsx)(el.Z,{className:"items-center gap-2 mobile:gap-1 mt-1",children:(0,l.jsx)(tN,{className:"w-[80%]",aprValues:null==P?void 0:P.itemList,forceShow:!0})})]}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsx)("div",{className:"p-5",children:(0,l.jsx)(eB.E,{type:"poolInfo",poolInfo:i})})})]})})}),(0,l.jsx)(K.Z,{className:"w-9 h-9 mr-8 place-items-center",children:(0,l.jsx)($.Z,{size:"sm",heroIconName:"".concat(t?"chevron-up":"chevron-down")})})]}),w=(0,l.jsxs)(V.Z,{open:t,children:[(0,l.jsx)(V.Z.Face,{children:(0,l.jsxs)(el.Z,{type:"grid-x",className:"py-3 px-3 items-center gap-2 grid-cols-[auto,1.5fr,1fr,1fr,auto] bg-[#141041] mobile:rounded-t-lg ".concat(t?"":"rounded-b-3xl mobile:rounded-b-lg"),children:[(0,l.jsx)("div",{className:"w-8 self-center ",children:n?(0,l.jsx)($.Z,{className:"clickable m-auto self-center",iconSrc:"/icons/misc-star-filled.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==o||o(i.idString)},size:"sm"}):(0,l.jsx)($.Z,{className:"clickable opacity-30 hover:opacity-80 transition clickable-mask-offset-2 m-auto self-center",iconSrc:"/icons/misc-star-empty.svg",onClick:e=>{let{ev:t}=e;t.stopPropagation(),null==r||r(i.idString)},size:"sm"})}),(0,l.jsx)(tA,{info:i}),(0,l.jsx)(tC,{name:"Rewards",value:Z}),(0,l.jsx)(tC,{name:"APR(".concat(f,")"),value:(0,eu.Q)(null==P?void 0:P.total)}),(0,l.jsx)(K.Z,{className:"w-6 h-6 place-items-center",children:(0,l.jsx)($.Z,{size:"sm",heroIconName:"".concat(t?"chevron-up":"chevron-down")})})]})}),(0,l.jsx)(V.Z.Body,{children:(0,l.jsxs)(el.Z,{type:"grid-x",className:"py-4 px-5 pl-12 relative items-center gap-2 grid-cols-[1.5fr,1fr,1fr,auto]  bg-[#141041]",children:[(0,l.jsx)("div",{className:"absolute top-0 left-5 right-5 border-[rgba(171,196,255,.2)] border-t-1.5"}),(0,l.jsx)(tC,{name:"Liquidity",value:(0,d.w)(i)?(0,eh.Z)(i.tvl,{autoSuffix:!0,decimalPlace:1}):void 0}),(0,l.jsx)(tC,{name:"Volume(".concat(f,")"),value:(0,d.w)(i)?f===N.fi.DAY?(0,eh.Z)(i.volume24h,{autoSuffix:x,decimalPlace:0}):f===N.fi.WEEK?(0,eh.Z)(i.volume7d,{autoSuffix:x,decimalPlace:0}):(0,eh.Z)(i.volume30d,{autoSuffix:x,decimalPlace:0}):void 0}),(0,l.jsx)(tC,{name:"Fees(".concat(f,")"),value:(0,d.w)(i)?f===N.fi.DAY?(0,eh.Z)(i.volumeFee24h,{autoSuffix:x,decimalPlace:0}):f===N.fi.WEEK?(0,eh.Z)(i.volumeFee7d,{autoSuffix:x,decimalPlace:0}):(0,eh.Z)(i.volumeFee30d,{autoSuffix:x,decimalPlace:0}):void 0}),(0,l.jsx)(K.Z,{className:"w-6 h-6 place-items-center"})]})})]});return m?w:y}function tZ(e){let{rewardInfo:t,size:i}=e,s=(0,c.ZP)(e=>e.isMobile),n=(0,er.tD)(t.endTime),o=(0,er.ZM)(t.openTime);return(0,l.jsx)(el.Z,{className:"ring-1 ring-inset ring-[#abc4ff80] p-1 mobile:p-[1px] rounded-full items-center gap-2 overflow-hidden ".concat(n?"opacity-30 contrast-40":o?"opacity-50":""," "),children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(O.Z,{size:null!=i?i:s?"xs":"smi",token:t.rewardToken,className:o?"blur-sm":""}),n&&(0,l.jsx)("div",{className:"absolute h-[1.5px] w-full top-1/2 -translate-y-1/2 rotate-45 bg-[#abc4ff80] scale-x-125"}),o&&(0,l.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 opacity-70",children:(0,l.jsx)($.Z,{heroIconName:"dots-horizontal",size:s?"sm":"md"})})]})})}function tN(e){let{className:t,aprValues:i,forceShow:n=!1}=e,o=["#abc4ff","#39d0d8","#2b6aff"];if(!i&&!n)return null;let c=i?i.reduce((e,t)=>(0,eb.IH)(e,t),0):1,r=(0,s.useMemo)(()=>{if(!i)return!1;for(let e of i)if(!(0,f.eq)(e,0))return!1;return!0},[i]);return(0,l.jsx)(el.Z,{className:(0,a.m)("w-full gap-1",t),children:i?r?(0,l.jsx)("div",{className:"h-2 rounded-full",style:{width:"100%",backgroundColor:"#abc4ff33"}}):i.map((e,t)=>(0,f.$u)(e)?(0,l.jsx)("div",{className:"h-2 rounded-full",style:{width:(0,ef.Z)((0,eb.hi)(e,c)),backgroundColor:o[t]}},t):null):null})}function tP(e){let{poolInfo:t,open:i}=e,n=(0,Z.Z)(e=>e.owner),{lpPrices:a}=(0,L.O)(),r=(0,T.ZP)(e=>e.tokenPrices),d=(0,s.useMemo)(()=>({...a,...r}),[a,r]),m=(0,c.ZP)(e=>e.isMobile),x=(0,s.useMemo)(()=>{let e=t.rewardInfos.length>0;return(0,l.jsxs)(W.Z,{className:"py-5 px-8 mobile:py-2 justify-center rounded-b-3xl mobile:rounded-b-lg items-center",children:[(0,l.jsx)("div",{className:"mb-3 text-xs",children:t.creator.equals(null!=n?n:o.nh.default)?"You created this pool. You can create a farm, or create a new position":"Want to open a new position?"}),(0,l.jsxs)(el.Z,{className:"justify-center items-center gap-2",children:[!e&&t.creator.equals(null!=n?n:o.nh.default)&&(0,l.jsx)(z.Z,{className:"frosted-glass-teal mobile:px-6 mobile:py-2 mobile:text-xs",onClick:()=>{N.ZP.setState({coin1:t.base,coin2:t.quote,chartPoints:[],lazyLoadChart:!0,currentAmmPool:t}),(0,M.Eh)("/clmm/edit-farm",{queryProps:{farmId:t.idString}})},children:"Create Farm"}),(0,l.jsx)(z.Z,{className:"frosted-glass-teal mobile:px-6 mobile:py-2 mobile:text-xs",onClick:()=>{N.ZP.setState({coin1:t.base,coin2:t.quote,chartPoints:[],lazyLoadChart:!0,currentAmmPool:t}),(0,M.Eh)("/clmm/create-position")},children:"Create Position"}),(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{size:"sm",iconSrc:"/icons/msic-swap-h.svg",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] clickable clickable-filter-effect",onClick:()=>{(0,M.Eh)("/swap",{queryProps:{coin1:t.base,coin2:t.quote}})}}),(0,l.jsx)(ea.Z.Panel,{children:"Swap"})]})]})]})},[t,m]),p=(0,s.useMemo)(()=>(0,l.jsxs)(W.Z,{className:"w-full pl-8 pt-5 pb-5 mobile:py-2 mobile:px-2",children:[(0,l.jsxs)(el.Z,{className:"items-center gap-2 mb-5 mobile:mb-2",children:[(0,l.jsx)($.Z,{size:m?"xs":"sm",iconSrc:"/icons/entry-icon-farms.svg",className:"opacity-75"}),(0,l.jsx)("div",{className:"font-medium text-sm mobile:text-xs text-[#abc4ff80]",children:"Linked Farm"})]}),(0,l.jsxs)(E.Z,{is:m?"Col":"Row",className:"w-full justify-between items-center",children:[(0,l.jsxs)(E.Z,{is:m?"Col":"Row",className:"".concat(m?"":"flex justify-between","  mobile:w-full ring-inset ring-1 ring-[rgba(196,214,255,0.5)] rounded-3xl mobile:rounded-lg p-6 mobile:p-3 items-center"),style:1===t.rewardInfos.length?{minWidth:"calc((100% - 124px - 32px - 4px) / 2)"}:{width:"100%"},children:[(0,l.jsxs)("div",{style:{width:"".concat(m?"100%":"default")},children:[(0,l.jsx)(el.Z,{className:"font-medium text-sm mobile:text-xs text-[#abc4ff80] mb-2 mobile:w-full",children:"Weekly Rate"}),(0,l.jsx)(el.Z,{className:"flex-wrap gap-8 mobile:gap-3",children:t.rewardInfos.map(e=>{var t,i;let s=(0,er.tD)(e.endTime);return(0,l.jsxs)(W.Z,{className:"gap-1 mobile:gap-0.5 mobile:w-full mobile:items-center",children:[(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)(tZ,{rewardInfo:e,size:m?"xs":"sm"}),(0,l.jsxs)(el.Z,{className:"items-center gap-1",children:[(0,l.jsx)("div",{className:"font-medium mobile:text-sm text-white",children:s?"--":(0,ex.Z)(e.rewardPerWeek,{fractionLength:0})}),(0,l.jsx)("div",{className:"font-medium mobile:text-sm text-[#abc4ff80]",children:null!==(i=null===(t=e.rewardToken)||void 0===t?void 0:t.symbol)&&void 0!==i?i:"--"}),s&&(0,l.jsx)(R.C,{className:"ml-1",cssColor:"#DA2EEF",children:"Ended"})]})]}),(0,l.jsxs)("div",{className:"font-medium text-sm mobile:text-xs text-[#abc4ff80]",children:[(0,ec.xn)(e.openTime,{hideUTCBadge:!0,hideHourMinuteSecond:!0})," -"," ",(0,ec.xn)(e.endTime,{hideUTCBadge:!0,hideHourMinuteSecond:!0})]})]},(0,u.ZP)(e.tokenMint))})})]}),(0,l.jsx)(z.Z,{className:"frosted-glass-teal mobile:px-6 mobile:py-2 mobile:text-xs mobile:mt-3",onClick:()=>{N.ZP.setState({coin1:t.base,coin2:t.quote,chartPoints:[],lazyLoadChart:!0,currentAmmPool:t}),(0,M.Eh)("/clmm/edit-farm",{queryProps:{farmId:t.idString}})},children:"Edit Farm"})]}),x]})]}),[x,m,t]),v=(0,s.useMemo)(()=>{if(!n||!t.userPositionAccount)return;let e=Object.fromEntries(t.userPositionAccount.map(e=>{var t;return[(0,u.ZP)(e.nftMint),null===(t=e.getLiquidityVolume)||void 0===t?void 0:t.call(e,r).wholeLiquidity]})),i=[...t.userPositionAccount].sort((t,i)=>{let l=(0,f.$u)(e[(0,u.ZP)(t.nftMint)]),s=(0,f.$u)(e[(0,u.ZP)(i.nftMint)]);return!l&&s||l&&!s?l?-1:s?1:0:i.tickLower-t.tickLower});return i},[t.userPositionAccount,n,r]);return(0,l.jsxs)(E.Z,{is:"Col",className:"justify-between rounded-b-3xl mobile:rounded-b-lg",style:{background:"linear-gradient(126.6deg, rgba(171, 196, 255, 0.12), rgb(171 196 255 / 4%) 100%)"},children:[v&&(0,l.jsx)(l.Fragment,{children:v.map(e=>{var s,n,o,a,c,m,x,f,p,v,b,g,j,Z;let N="--",P=(0,h.B)(e.amountA,{decimalLength:"auto 5"}),y=(0,h.B)(e.amountB,{decimalLength:"auto 5"}),w=(0,h.B)(e.priceLower,{decimalLength:"auto ".concat(null!==(f=null===(s=e.tokenB)||void 0===s?void 0:s.decimals)&&void 0!==f?f:5)}),k=(0,h.B)(e.priceUpper,{decimalLength:"auto ".concat(null!==(p=null===(n=e.tokenB)||void 0===n?void 0:n.decimals)&&void 0!==p?p:5)});w&&k&&(N=w+" - "+k);let A=(0,ep.Z)(e.amountA,null!==(v=d[(0,u.ZP)(null===(o=e.tokenA)||void 0===o?void 0:o.mint)])&&void 0!==v?v:null),C=(0,ep.Z)(e.amountB,null!==(b=d[(0,u.ZP)(null===(a=e.tokenB)||void 0===a?void 0:a.mint)])&&void 0!==b?b:null),{wholeLiquidity:S}=null!==(g=null===(c=e.getLiquidityVolume)||void 0===c?void 0:c.call(e,r))&&void 0!==g?g:{},F=(0,ep.Z)(e.tokenFeeAmountA,null!==(j=d[(0,u.ZP)(null===(m=e.tokenA)||void 0===m?void 0:m.mint)])&&void 0!==j?j:null),B=(0,ep.Z)(e.tokenFeeAmountB,null!==(Z=d[(0,u.ZP)(null===(x=e.tokenB)||void 0===x?void 0:x.mint)])&&void 0!==Z?Z:null),I=F.add(B);I&&(0,eh.Z)(I);let L=new Map;return e.rewardInfos.forEach(e=>{if(e.token){var t;L.set(e.token,(0,ep.Z)(e.penddingReward,null!==(t=d[(0,u.ZP)(e.token.mint)])&&void 0!==t?t:null))}}),(0,l.jsx)(ty,{open:i,poolInfo:t,userPositionAccount:e,myPosition:N,amountA:P,amountB:y,myPositionVolume:(0,eh.Z)(S),coinAPrice:A,coinBPrice:C,inRange:e.inRange,rewardAPrice:F,rewardBPrice:B,rewardInfoPrice:L},e.nftMint.toString())})}),t.rewardInfos.length>0&&n&&t.rewardInfos.find(e=>e.creator.equals(n))?(0,l.jsx)(E.Z,{is:m?"Col":"Row",children:p}):(0,l.jsx)(E.Z,{children:x})]})}function ty(e){var t,i,n,r;let{open:d,poolInfo:m,userPositionAccount:x,myPosition:f,amountA:p,amountB:v,myPositionVolume:b,coinAPrice:g,coinBPrice:j,inRange:y,rewardAPrice:A,rewardBPrice:C,rewardInfoPrice:S}=e,F=(0,c.ZP)(e=>e.isMobile),B=(0,c.ZP)(e=>e.isApprovePanelShown),{isHarvestable:I,getPendingTotal:L}=eA(x),T=(0,N.ZP)(e=>e.refreshConcentrated),q=(0,w.Z)(e=>e.logInfo),R=(0,Z.Z)(e=>e.connected),D=null==x?void 0:x.liquidity.isZero(),O=(0,eN.Z)(()=>d?null==L?void 0:L():void 0,[d,L]),U=(0,s.useMemo)(()=>{if(m&&x){var e;return null===(e=m.positionAccount)||void 0===e?void 0:e.find(e=>(0,u.ZP)(e.nftMint)===(0,u.ZP)(e.nftMint))}},[m,x]),V=(0,s.useMemo)(()=>{var e,t;let i="bg-[#142B45]",s="text-[#39D0D8]",n="/icons/check-circle.svg",o="In Range";return y||(i="bg-[#DA2EEF]/10",s="text-[#DA2EEF]",n="/icons/warn-stick.svg",o="Out of Range"),(0,l.jsxs)(ea.Z,{darkGradient:!0,panelClassName:"p-0 rounded-xl",children:[(0,l.jsxs)(el.Z,{className:(0,a.m)("items-center rounded text-xs mobile:text-2xs py-0.5 px-1 ml-2",i,s),children:[(0,l.jsx)($.Z,{size:"xs",iconSrc:n}),(0,l.jsx)("div",{className:"font-normal",style:{marginLeft:4},children:o})]}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsxs)("div",{className:"max-w-[300px] py-3 px-5",children:[(0,l.jsx)("div",{className:"font-medium text-[#ABC4FF] text-2xs",children:"Current Price"}),(0,l.jsxs)(el.Z,{className:"gap-5  mt-1",children:[(0,l.jsx)("div",{className:"text-xs text-white",children:(0,h.B)(m.currentPrice,{decimalLength:"auto 5"})}),(0,l.jsxs)("div",{className:"text-[#ABC4FF] text-xs",children:[null===(e=m.quote)||void 0===e?void 0:e.symbol," per ",null===(t=m.base)||void 0===t?void 0:t.symbol]})]})]})})]})},[y,m.currentPrice,null===(t=m.base)||void 0===t?void 0:t.symbol,null===(i=m.quote)||void 0===i?void 0:i.symbol]);return(0,l.jsx)(E.Z,{is:F?"Col":"Row",children:(0,l.jsx)(el.Z,{className:"w-full pt-5 px-8 mobile:py-3 mobile:px-2 mobile:m-0",children:(0,l.jsxs)("div",{className:"flex w-full pb-5 ".concat(F?"flex-col":"flex-row"),style:{borderBottom:"1px solid rgba(171, 196, 255, .1)"},children:[(0,l.jsxs)(E.Z,{is:F?"Col":"Row",className:"gap-[8px] mobile:gap-3 mobile:grid-cols-2-auto flex-grow justify-between",children:[(0,l.jsxs)(E.Z,{is:F?"div":"Row",className:"".concat(F?"flex-auto justify-between":"grid grid-cols-5"," w-1/2 mobile:w-full ring-inset ring-1 ring-[rgba(196,214,255,0.5)] rounded-3xl mobile:rounded-lg p-6 mobile:p-3  items-center"),children:[(0,l.jsxs)(W.Z,{className:"".concat(F?"":"col-span-2"," mobile:mb-2 mobile:pb-2"),style:{borderBottom:F?"1px solid rgba(171, 196, 255, .1)":"none"},children:[(0,l.jsxs)("div",{className:"flex justify-start mobile:justify-between text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-xs",children:["Price Range ",x?V:null]}),(0,l.jsx)("div",{className:"text-white font-medium text-base mobile:text-sm mt-3 mobile:mt-1",children:null!=f?f:"--"}),(0,l.jsxs)("div",{className:" text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-2xs mt-2 mobile:mt-1",children:[null===(n=m.quote)||void 0===n?void 0:n.symbol," per ",null===(r=m.base)||void 0===r?void 0:r.symbol]})]}),(0,l.jsxs)(W.Z,{className:"".concat(F?"":"col-span-2"),children:[(0,l.jsxs)("div",{className:"flex justify-start items-center text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-xs gap-1",children:["My Position",x?(0,l.jsxs)(ea.Z,{darkGradient:!0,panelClassName:"p-0 rounded-xl",children:[(0,l.jsx)($.Z,{className:" cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsxs)("div",{className:"max-w-[300px] py-3 px-5",children:[m.base&&(0,l.jsx)(tk,{token:m.base,tokenAmount:p,tokenPrice:g}),m.quote&&(0,l.jsx)(tk,{token:m.quote,tokenAmount:v,tokenPrice:j})]})})]}):null]}),(0,l.jsx)("div",{className:"text-white font-medium text-base mobile:text-sm mt-3 mobile:mt-1",children:null!=b?b:"--"}),(0,l.jsx)(el.Z,{className:"items-center gap-1 text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-2xs mt-2 mobile:mt-1",children:x?(0,l.jsxs)(l.Fragment,{children:[" ",function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(e)return e instanceof o.nh&&(e=(0,u.ZP)(e)),e.substring(0,t)+"..."+e.substring(e.length-i,e.length)}(null==x?void 0:x.nftMint,6)," ",(0,l.jsx)($.Z,{size:"sm",className:"clickable text-[rgba(171,196,255,1)] font-semibold",heroIconName:"clipboard-copy",onClick:e=>{let{ev:t}=e;t.stopPropagation(),(0,em.Z)((0,u.ZP)(null==x?void 0:x.nftMint)),q("Account has been copied!")}}),(0,l.jsx)(Q.Z,{className:"flex items-center",hrefDetail:"".concat(null==x?void 0:x.nftMint),type:"account",children:(0,l.jsx)($.Z,{size:"sm",className:"clickable text-[rgba(171,196,255,1)] font-semibold",inline:!0,heroIconName:"external-link"})})]}):(0,l.jsx)(l.Fragment,{children:"\xa0"})})]}),(0,l.jsx)(E.Z,{is:F?"Row":"Col",className:F?"flex justify-center items-center pt-3":"col-span-1",children:(0,l.jsx)("div",{className:"flex justify-end shrink",children:(0,l.jsx)(z.Z,{className:"frosted-glass-teal",size:F?"xs":void 0,disabled:!x,validators:[{should:R,forceActive:!0,fallbackProps:{onClick:()=>c.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:x,forceActive:!0,fallbackProps:{onClick:()=>{N.ZP.setState({coin1:m.base,coin2:m.quote,currentAmmPool:m}),(0,M.Eh)("/clmm/create-position",{queryProps:{}})},children:"Create Position"}}],onClick:()=>{N.ZP.setState({isMyPositionDialogOpen:!0,currentAmmPool:m,targetUserPositionAccount:x,coin1:m.base,coin2:m.quote})},children:"Manage"})})})]}),(0,l.jsxs)(E.Z,{is:F?"div":"Row",className:"flex-auto w-1/2 mobile:w-full justify-between ring-inset ring-1 ring-[rgba(196,214,255,0.5)] rounded-3xl mobile:rounded-lg p-6 mobile:p-3  items-center",children:[(0,l.jsxs)(W.Z,{children:[(0,l.jsxs)("div",{className:"flex justify-start items-center text-[rgba(171,196,255,0.5)] font-medium text-sm mobile:text-xs gap-1",children:["Pending Yield",x?(0,l.jsxs)(ea.Z,{darkGradient:!0,panelClassName:"p-0 rounded-xl",children:[(0,l.jsx)($.Z,{className:"cursor-help",size:"sm",heroIconName:"question-mark-circle"}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsxs)("div",{className:"min-w-[250px] py-[6px] px-5",children:[x.tokenFeeAmountA||x.tokenFeeAmountB?(0,l.jsx)("div",{className:"pt-3 pb-1",children:"Fees"}):null,m.base&&(0,l.jsx)(tk,{token:m.base,tokenAmount:(0,h.B)(x.tokenFeeAmountA,{decimalLength:"auto 5"}),tokenPrice:A,suffix:""}),m.quote&&(0,l.jsx)(tk,{token:m.quote,tokenAmount:(0,h.B)(x.tokenFeeAmountB,{decimalLength:"auto 5"}),tokenPrice:C,suffix:""}),x.rewardInfos.length>0?(0,l.jsx)("div",{className:"pt-3 pb-1",children:"Rewards"}):null,x.rewardInfos&&x.rewardInfos.map((e,t)=>{var i;return(0,l.jsx)(tk,{token:e.token,tokenAmount:(0,h.B)(e.penddingReward,{decimalLength:"auto 5"}),tokenPrice:e.token&&(null==S?void 0:S.get(e.token)),suffix:""},"personal-rewardInfo-reward-".concat(t,"-").concat((0,u.ZP)(null===(i=e.token)||void 0===i?void 0:i.mint)))})]})})]}):null]}),(0,l.jsxs)("div",{className:"text-white font-medium text-base mobile:text-sm mt-3 mobile:mt-1",children:["≈",(0,eh.Z)(O)]}),x&&(0,l.jsx)(tw,{poolInfo:m,positionInfo:x})]}),(0,l.jsx)(E.Z,{is:F?"Row":"Col",className:F?"flex justify-center items-center pt-3":"",children:(0,l.jsx)(z.Z,{className:"frosted-glass-teal ",size:F?"xs":void 0,isLoading:B,validators:[{should:R,forceActive:!0,fallbackProps:{onClick:()=>c.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:I}],onClick:()=>k({currentAmmPool:m,targetUserPositionAccount:x}).then(e=>{(null==e?void 0:e.allSuccess)&&T()}),children:"Harvest"})})]})]}),(0,l.jsx)(el.Z,{className:"pl-8 ".concat(F?"pr-8 pt-5":""," gap-3 items-center self-center justify-center mobile:w-full"),children:F?(0,l.jsxs)(el.Z,{className:"gap-5 mobile:gap-4",children:[(0,l.jsx)($.Z,{size:"sm",heroIconName:"plus",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] opacity-100 clickable clickable-filter-effect ".concat(x?"opacity-100 clickable clickable-filter-effect":"opacity-50 not-clickable"),onClick:()=>{N.ZP.setState({isAddDialogOpen:!0,currentAmmPool:m,targetUserPositionAccount:x})}}),D?(0,l.jsx)($.Z,{size:"sm",heroIconName:"x",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] ".concat(x?"opacity-100 clickable clickable-filter-effect":"opacity-50 not-clickable"),onClick:()=>{N.ZP.setState({liquidity:null==U?void 0:U.liquidity,currentAmmPool:m,targetUserPositionAccount:x}),setTimeout(()=>{P({closePosition:!0}).then(e=>{(null==e?void 0:e.allSuccess)&&(T(),N.ZP.setState({coin1Amount:void 0,coin2Amount:void 0}))})},10)}}):(0,l.jsx)($.Z,{size:"sm",iconSrc:"/icons/pools-remove-liquidity-entry.svg",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] ".concat(x?"opacity-100 clickable clickable-filter-effect":"opacity-50 not-clickable"),onClick:()=>{N.ZP.setState({isRemoveDialogOpen:!0,currentAmmPool:m,targetUserPositionAccount:x})}})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{size:"smi",heroIconName:"plus",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] opacity-100 clickable clickable-filter-effect ".concat(x?"opacity-100 clickable clickable-filter-effect":"opacity-50 not-clickable"),onClick:()=>{N.ZP.setState({isAddDialogOpen:!0,currentAmmPool:m,targetUserPositionAccount:x})}}),(0,l.jsx)(ea.Z.Panel,{children:"Add Liquidity"})]}),D?(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{size:"smi",heroIconName:"x",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] ".concat(x?"opacity-100 clickable clickable-filter-effect":"opacity-50 not-clickable"),onClick:()=>{N.ZP.setState({liquidity:null==U?void 0:U.liquidity,currentAmmPool:m,targetUserPositionAccount:x}),setTimeout(()=>{P({closePosition:!0}).then(e=>{(null==e?void 0:e.allSuccess)&&(T(),N.ZP.setState({coin1Amount:void 0,coin2Amount:void 0}))})},10)}}),(0,l.jsx)(ea.Z.Panel,{children:"Close Position"})]}):(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{size:"smi",iconSrc:"/icons/pools-remove-liquidity-entry.svg",className:"grid place-items-center w-10 h-10 mobile:w-8 mobile:h-8 ring-inset ring-1 mobile:ring-1 ring-[rgba(171,196,255,.5)] rounded-xl mobile:rounded-lg text-[rgba(171,196,255,.5)] ".concat(x?"opacity-100 clickable clickable-filter-effect":"opacity-50 not-clickable"),onClick:()=>{N.ZP.setState({isRemoveDialogOpen:!0,currentAmmPool:m,targetUserPositionAccount:x})}}),(0,l.jsx)(ea.Z.Panel,{children:"Remove Liquidity"})]})]})})]})})})}function tw(e){let{poolInfo:t,positionInfo:i}=e,n=(0,N.ZP)(e=>e.timeBasis),o=(0,T.ZP)(e=>e.tokenPrices);(0,T.ZP)(e=>e.tokens);let a=(0,T.ZP)(e=>e.tokenDecimals),c=(0,y.ZP)(e=>e.chainTimeOffset),r=(0,N.ZP)(e=>e.aprCalcMode),d=(0,s.useMemo)(()=>null==i?void 0:i.getApr({tokenPrices:o,tokenDecimals:a,timeBasis:n.toLowerCase(),planType:r,chainTimeOffsetMs:c}),[c,n,r]);return(0,l.jsxs)(el.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-[#abc4ff80] text-sm font-medium mobile:text-xs",children:"APR"}),(0,l.jsx)(eI.T,{iconClassName:"opacity-50"}),(0,l.jsx)("div",{className:"text-white text-sm font-medium mobile:text-xs",children:(0,ef.Z)(null==d?void 0:d.apr)}),(0,f.$u)(d.apr)&&(0,l.jsxs)(ea.Z,{panelClassName:"p-0 rounded-xl",children:[(0,l.jsx)(el.Z,{className:"items-center gap-2 mobile:gap-1 mt-1",children:d&&(0,l.jsx)(tN,{className:"w-28",aprValues:[d.fee.apr,...d.rewards.map(e=>e.apr)]})}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsx)("div",{className:"p-5",children:d&&(0,l.jsx)(eB.E,{type:"positionAccount",colCount:2,positionAccount:i})})})]})]})}function tk(e){let{token:t,tokenAmount:i,tokenPrice:s,suffix:n="",customIcon:o,customKey:c,customValue:r,className:d}=e;return(0,l.jsxs)(el.Z,{className:(0,a.m)("py-2 gap-8 justify-between items-center font-medium text-[12px] ",d),children:[(0,l.jsxs)(el.Z,{className:"flex items-center justify-start gap-[6px]",children:[o||(0,l.jsx)(O.Z,{token:t,size:"smi"}),(0,l.jsxs)("div",{className:" text-[#ABC4FF]",children:[c||(t?t.symbol:null)," ",n]})]}),(0,l.jsx)(el.Z,{className:"flex justify-end gap-1",children:r||(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"text-white",children:i}),(0,l.jsxs)("div",{className:"text-[#ABC4FF]",children:["(",(0,eh.Z)(s),")"]})]})})]})}function tA(e){let{info:t,className:i}=e,s=(0,c.ZP)(e=>e.isMobile);return(0,N.ZP)(e=>e.timeBasis),(0,l.jsxs)(E.Z,{is:s?"Col":"Row",className:(0,a.m)("clickable flex-wrap items-center mobile:items-start",i),children:[(0,l.jsx)(U.Z,{className:"justify-self-center mr-2",size:s?"sm":"md",token1:null==t?void 0:t.base,token2:null==t?void 0:t.quote}),(0,l.jsx)(el.Z,{className:"mobile:text-xs font-medium mobile:mt-px items-center flex-wrap gap-2",children:(0,l.jsxs)(W.Z,{children:[(0,l.jsxs)(el.Z,{className:"items-center",children:[(0,l.jsx)("div",{children:null==t?void 0:t.name}),(0,l.jsxs)(ea.Z,{children:[(0,l.jsx)($.Z,{iconClassName:"ml-1",size:"sm",heroIconName:"information-circle"}),(0,l.jsx)(ea.Z.Panel,{children:(0,l.jsxs)("div",{className:"max-w-[300px] space-y-1.5",children:[(0,l.jsxs)("div",{className:"flex gap-2 text-sm",children:[(0,l.jsx)("span",{children:"Pool Id"}),(0,l.jsx)(q.U,{className:"grow",showDigitCount:5,addressType:"account",canCopy:!0,canExternalLink:!0,textClassName:"flex text-xs text-[#abc4ff] justify-start ",iconClassName:"text-[#abc4ff]",children:null==t?void 0:t.idString})]}),[null==t?void 0:t.base,null==t?void 0:t.quote].map((e,t)=>e?(0,l.jsxs)(el.Z,{className:"gap-2",children:[(0,l.jsx)(O.Z,{size:"xs",token:e}),(0,l.jsx)("span",{children:e.symbol}),(0,l.jsx)(q.U,{className:"grow",showDigitCount:5,addressType:"token",canCopy:!0,canExternalLink:!0,textClassName:"flex text-xs text-[#abc4ff] justify-start ",iconClassName:"text-[#abc4ff]",children:e.mintString})]},t):null)]})})]})]}),(0,l.jsxs)("div",{className:"font-medium text-xs text-[#ABC4FF]/50",children:["Fee ",(0,ef.Z)(null==t?void 0:t.tradeFeeRate)]})]})})]})}function tC(e){let{name:t,value:i,className:s}=e,n=(0,c.ZP)(e=>e.isMobile);return n?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"mb-1 text-[rgba(171,196,255,0.5)] font-medium text-2xs",children:t}),(0,l.jsx)("div",{className:"text-xs",children:i||"--"})]}):(0,l.jsx)("div",{className:(0,a.m)("tablet:text-sm",s),children:i||"--"})}}},function(e){e.O(0,[7239,9916,3945,5830,2820,7664,4109,5469,3809,4768,9774,2888,179],function(){return e(e.s=91902)}),_N_E=e.O()}]);