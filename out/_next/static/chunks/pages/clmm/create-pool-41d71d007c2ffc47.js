(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5355],{71716:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/clmm/create-pool",function(){return n(7199)}])},6262:function(e,t,n){"use strict";n.d(t,{Ek:function(){return c},TL:function(){return u},vt:function(){return d},yc:function(){return m}});var i=n(72305),s=n(27713),l=n(4465),o=n(51523),a=n(84207);function r(e){let t=i.jsJ.getPriceAndTick(e);return(0,s.JS)(t)}function c(e){let t=i.jsJ.getTickPrice(e);return(0,s.JS)(t)}function d(e){let{coin1:t,coin2:n,reverse:i,ammPool:l,maxDecimals:c}=e;if(l)try{var d,m;let e=c||(t||n?Math.max(null!==(d=null==t?void 0:t.decimals)&&void 0!==d?d:0,null!==(m=null==n?void 0:n.decimals)&&void 0!==m?m:0):6),u=100===l.ammConfig.tradeFeeRate,p=u?.01:.2,f=(0,s.eZ)(null==l?void 0:l.state.currentPrice),x=(0,o.kg)(f?(0,o.dC)(f,1-p):0,1/10**e),v=(0,o.kg)(f?(0,o.dC)(f,1+p):0,1/10**e),{price:h,tick:b}=r({poolInfo:l.state,baseIn:!0,price:(0,s.I2)((0,a.Z)(x))}),{price:g,tick:Z}=r({poolInfo:l.state,baseIn:!0,price:(0,s.I2)((0,a.Z)(v))});if(i)return{priceLowerTick:Z,priceLower:(0,o.hi)(1,g),priceUpperTick:b,priceUpper:(0,o.hi)(1,h)};return{priceLowerTick:b,priceLower:h,priceUpperTick:Z,priceUpper:g}}catch(e){return}}function m(e){let{p:t,coin1:n,coin2:i,reverse:o,ammPool:c,maxDecimals:d}=e,m=o?i:n;try{let{price:e,tick:n}=r({poolInfo:c.state,baseIn:(0,l.aT)(c.state.mintA.mint,null==m?void 0:m.mint),price:(0,s.I2)((0,a.Z)(Math.max(Number(t),1/10**(null!=d?d:6))))});return{price:e,tick:n}}catch(e){return}}function u(e){let{min:t,max:n,coin1:i,coin2:s,reverse:l,ammPool:o,maxDecimals:a}=e,r=m({p:t,coin1:i,coin2:s,ammPool:o,reverse:l,maxDecimals:a}),c=m({p:n,coin1:i,coin2:s,ammPool:o,reverse:l,maxDecimals:a});return{priceLower:r.price,priceLowerTick:r.tick,priceUpper:c.price,priceUpperTick:c.tick}}},13039:function(e,t,n){"use strict";n.d(t,{B:function(){return g},Z:function(){return b}});var i=n(72305),s=n(79938),l=n(53002),o=n(34003),a=n(62952),r=n(71375),c=n(72573),d=n(96662),m=n(94355),u=n(14200),p=n(55469),f=n(42186),x=n(475),v=n(61813),h=n(94678);async function b(){let e,{currentAmmPool:t=h.ZP.getState().currentAmmPool,coin1:n=h.ZP.getState().coin1,coin2:i=h.ZP.getState().coin2,coin1Amount:l=h.ZP.getState().coin1Amount,coin2Amount:o=h.ZP.getState().coin2Amount,coin1SlippageAmount:r=h.ZP.getState().coin1SlippageAmount,coin2SlippageAmount:d=h.ZP.getState().coin2SlippageAmount,priceLower:f=h.ZP.getState().priceLower,priceUpper:x=h.ZP.getState().priceUpper,priceLowerTick:v=h.ZP.getState().priceLowerTick,priceUpperTick:b=h.ZP.getState().priceUpperTick,liquidity:Z=h.ZP.getState().liquidity,onSuccess:P}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=(0,a.n)(n,l,{alreadyDecimaled:!0}),j=(0,a.n)(i,o,{alreadyDecimaled:!0}),S=[n,i].some(e=>(0,u.W)(e));if(S){let{hasConfirmed:s}=(0,p.e)({amount:[(0,u.W)(n)?y:void 0,(0,u.W)(i)?j:void 0],groupInfo:t&&f&&x?{ammPool:t,priceLower:f,priceUpper:x}:void 0,caseName:"openPosition"});e=await s}else e=!0;if(!e){m.Z.getState().logError("Canceled by User","The operation is canceled by user");return}return(0,s.ZP)(async e=>{var s,a;let{transactionCollector:m}=e,{innerTransactions:u,nftAddress:p}=await g({currentAmmPool:t,coin1:n,coin2:i,coin1Amount:l,coin2Amount:o,coin1SlippageAmount:r,coin2SlippageAmount:d,liquidity:Z,priceLower:f,priceUpper:x,priceLowerTick:v,priceUpperTick:b});m.add(u,{onTxAllSuccess(){null==P||P({nftAddress:p})},txHistoryInfo:{title:"Deposited",description:"Added ".concat((0,c.B)(l)," ").concat(null!==(s=null==n?void 0:n.symbol)&&void 0!==s?s:"--"," and ").concat((0,c.B)(o)," ").concat(null!==(a=null==i?void 0:i.symbol)&&void 0!==a?a:"--")}})})}async function g(){let{priceLower:e=h.ZP.getState().priceLower,priceUpper:t=h.ZP.getState().priceUpper,coin1:n=h.ZP.getState().coin1,coin2:a=h.ZP.getState().coin2,coin1Amount:c=h.ZP.getState().coin1Amount,coin2Amount:m=h.ZP.getState().coin2Amount,coin1SlippageAmount:u=h.ZP.getState().coin1SlippageAmount,coin2SlippageAmount:p=h.ZP.getState().coin2SlippageAmount,liquidity:b=h.ZP.getState().liquidity,liquidityMin:g=h.ZP.getState().liquidityMin,priceLowerTick:Z=h.ZP.getState().priceLowerTick,priceUpperTick:P=h.ZP.getState().priceUpperTick,currentAmmPool:y=h.ZP.getState().currentAmmPool}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.ZP.getState(),{tokenAccountRawInfos:j,txVersion:S}=l.Z.getState(),{connection:N}=d.ZP.getState(),{owner:k}=l.Z.getState();(0,o.Z)(N,"no rpc connection"),(0,o.Z)(k,"wallet not connected"),(0,o.Z)(y,"not seleted amm pool"),(0,o.Z)(void 0!==P,"not set priceUpperTick"),(0,o.Z)(void 0!==Z,"not set priceLowerTick"),(0,o.Z)(t,"not set priceUpper"),(0,o.Z)(e,"not set priceLower"),(0,o.Z)(n,"not set coin1"),(0,o.Z)(u,"not set coin1Amount"),(0,o.Z)(a,"not set coin2"),(0,o.Z)(p,"not set coin2Amount"),(0,o.Z)(b,"not set liquidity"),(0,o.Z)(g,"not set liquidity");let w=(0,f.Dn)(n)||(0,f.Dn)(a),C=y.state.mintA.mint.equals(n.mint),A=(0,r.Z)(u,n.decimals,"up"),T=(0,r.Z)(p,a.decimals,"up"),{innerTransactions:I,address:F}=await i.jsJ.makeOpenPositionFromLiquidityInstructionSimple({connection:N,liquidity:g,poolInfo:y.state,ownerInfo:{feePayer:k,wallet:k,tokenAccounts:j,useSOLBalance:w},tickLower:Math.min(Z,P),tickUpper:Math.max(Z,P),amountMaxA:C?A:T,amountMaxB:C?T:A,computeBudgetConfig:await (0,x.u)(),checkCreateATAOwner:!0,makeTxVersion:S,lookupTableCache:s.eq,getEphemeralSigners:await (0,v.u)()});return{innerTransactions:I,nftAddress:String(F.nftMint)}}},52784:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(67294),s=n(3363),l=n(4465),o=n(94678);function a(e){let t=(0,o.ZP)(e=>e.coin1),n=(0,o.ZP)(e=>e.coin2),a=(0,o.ZP)(e=>e.hydratedAmmPools),r=(0,o.ZP)(e=>e.currentAmmPool),c=(0,i.useCallback)(e=>{let t=void 0!==r&&1===e.filter(e=>(0,s.ZP)(e.state.id)===r.idString).length;return t},[r]);(0,i.useEffect)(()=>{if(!a.length||!t||!n){o.ZP.setState({selectableAmmPools:void 0,currentAmmPool:void 0});return}let i=a.filter(e=>(0,l.aT)(e.state.mintA.mint,t.mint)&&(0,l.aT)(e.state.mintB.mint,n.mint)||(0,l.aT)(e.state.mintA.mint,n.mint)&&(0,l.aT)(e.state.mintB.mint,t.mint)),s=c(i);o.ZP.setState(e||s?{selectableAmmPools:i}:{selectableAmmPools:i,currentAmmPool:i[0]})},[t,n,a,e])}},76961:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var i=n(72305),s=n(13550),l=n.n(s),o=n(67294),a=n(91371),r=n(3363),c=n(62952),d=n(4465),m=n(81451),u=n(51523),p=n(71375),f=n(72573),x=n(92867),v=n(79162),h=n(94678),b=n(14200);function g(){let e=(0,a.ZP)(e=>e.slippageTolerance),t=(0,h.ZP)(e=>e.coin1),n=(0,h.ZP)(e=>e.coin1Amount),s=(0,h.ZP)(e=>e.priceUpperTick),g=(0,h.ZP)(e=>e.coin2),P=(0,h.ZP)(e=>e.coin2Amount),y=(0,h.ZP)(e=>e.priceLowerTick),j=(0,h.ZP)(e=>e.userCursorSide),S=(0,h.ZP)(e=>e.isRemoveDialogOpen),N=(0,h.ZP)(e=>e.currentAmmPool),k=(0,h.ZP)(e=>e.targetUserPositionAccount),w=(0,h.ZP)(e=>e.isInput);(0,o.useMemo)(()=>S?0:e,[S,e]);let C=(0,o.useMemo)(()=>{if(N&&k){var e;return null===(e=N.positionAccount)||void 0===e?void 0:e.find(e=>(0,r.ZP)(e.nftMint)===(0,r.ZP)(k.nftMint))}},[N,k]),A=(0,o.useCallback)(async()=>{if(!N||!t||!g||null==s||null==y||S&&!1===w)return;let o="coin1"===j,a=(0,d.aT)(t.mint,N.state.mintA.mint),f=o?n:P,A=(0,r.ZP)(o?t.mint:g.mint),T=(0,r.ZP)(o?g.mint:t.mint),I=void 0!==f&&""!==f,F=o?(0,p.Z)((0,u.dC)(null!=n?n:0,10**t.decimals)):(0,p.Z)((0,u.dC)(null!=P?P:0,10**g.decimals)),[L,B]=await Promise.all([(0,v.b)({mints:[t.mint,g.mint].filter(b.W)}),(0,x.$)()]);try{let{liquidity:r,amountSlippageA:d,amountSlippageB:f}=S&&N&&C&&k&&k.amountA&&k.amountB&&(0,m.$u)(C.liquidity)?await Z({inputAmountBN:F,maxLiquidity:C.liquidity,inputMint:A,outputMint:T,amountA:(0,p.Z)(C.amountA),amountB:(0,p.Z)(C.amountB),isFocus1:o,epochInfo:B}):i.jsJ.getLiquidityAmountOutFromAmountIn({poolInfo:N.state,slippage:0,inputA:o&&a||!a&&!o,tickUpper:Math.max(s,y),tickLower:Math.min(y,s),amount:F,add:!S,epochInfo:B,token2022Infos:L,amountHasFee:!0}),x=a?d:f,v=a?f:d,b=(0,c.n)(t,x.amount),j=(0,c.n)(g,v.amount),w=x.expirationTime,M=v.expirationTime,U=v.fee&&(0,c.n)(g,v.fee),E=x.fee&&(0,c.n)(t,x.fee),D={coin1Amount:o?n:I?b:void 0,coin1SlippageAmount:o?(0,u.dC)(b,(0,u.IH)(1,e)):I?(0,u.dC)(b,(0,u.IH)(1,e)):void 0,coin2Amount:o?I?j:void 0:P,coin2SlippageAmount:o?I?(0,u.dC)(j,(0,u.IH)(1,e)):void 0:(0,u.dC)(j,(0,u.IH)(1,e)),coin1AmountFee:E,coin1ExpirationTime:I?w:void 0,coin2AmountFee:U,coin2ExpirationTime:I?M:void 0,liquidity:r,liquidityMin:new(l())((0,u.dC)(r,(0,u.lu)(1,e)).toFixed(0))};h.ZP.setState(D)}catch(e){}},[t,(0,f.B)("coin1"===j?n:P),s,g,y,j,N,S,w,k,C]);(0,o.useEffect)(()=>{try{A()}catch(e){console.log("still can't calc amount",e instanceof Error?e.message:e)}},[A])}async function Z(e){let{inputAmountBN:t,maxLiquidity:n,inputMint:s,outputMint:l,amountA:o,amountB:a,epochInfo:r,isFocus1:c}=e,d=(0,u.hi)(t,c?o:a),m=(0,p.Z)(c?(0,u.dC)(a,d):(0,u.dC)(o,d)),f=await (0,v.b)({mints:[s,l]}),x=f[s],h=f[l];return{liquidity:(0,p.Z)((0,u.dC)(n,d)),amountA:(0,i.bfS)(c?t:m,(c?x:h).feeConfig,r,!1),amountB:(0,i.bfS)(c?m:t,(c?h:x).feeConfig,r,!1),amountSlippageA:(0,i.bfS)(c?t:m,(c?x:h).feeConfig,r,!1),amountSlippageB:(0,i.bfS)(c?m:t,(c?h:x).feeConfig,r,!1)}}},475:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var i=n(62512),s=n(91371),l=n(42186),o=n(17097);async function a(){let e=s.ZP.getState().transactionPriority;if((0,o.hj)(e))return{units:6e5,microLamports:Math.ceil(e*10**l.kE.decimals*1e6/6e5)};{var t;let e=await (0,i.Z)("https://solanacompass.com/api/fees",{cacheFreshTime:3e5}),{avg:n}=null!==(t=null==e?void 0:e[15])&&void 0!==t?t:{};if(!n)return;return{units:6e5,microLamports:Math.min(Math.ceil(1e6*n/6e5),25e3)}}}},61813:function(e,t,n){"use strict";n.d(t,{u:function(){return s}});var i=n(53002);async function s(){let{adapter:e}=i.Z.getState();return e&&"standard"in e&&"fuse:getEphemeralSigners"in e.wallet.features&&e.wallet.features["fuse:getEphemeralSigners"].getEphemeralSigners}},54531:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(85893);n(67294);var s=n(66180),l=n(70745),o=n(51800);function a(e){let{token1:t,token2:n,size:a,className:r,CoinAvatar1:c,CoinAvatar2:d}=e;return(0,i.jsxs)(o.Z,{className:(0,s.m)("-space-x-1",r),children:[(0,i.jsx)(l.Z,{size:a,token:t,...c}),(0,i.jsx)(l.Z,{size:a,token:n,...d})]})}},40816:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var i=n(85893),s=n(67294),l=n(66180);function o(e){let{classNames:t,tabs:n,selectedValue:o,onChange:a,tabClassName:r}=e,c=(0,s.useCallback)(e=>{null==a||a(n.find(t=>t.value===e.currentTarget.dataset.val))},[a,n]);return(0,i.jsx)("div",{className:(0,l.m)("flex rounded-lg p-1 bg-dark-blue",t),children:n.map(e=>{let t=o===e.value;return(0,i.jsx)("div",{onClick:t?void 0:c,"data-val":e.value,className:(0,l.m)("flex text-xs text-[#39D0D8] ".concat(t?"bg-active-tab-bg cursor-default":"cursor-pointer opacity-50"),e.className),children:(0,i.jsx)("div",{className:"py-1 px-2.5",children:e.label})},e.value)})})}},18074:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var i=n(81451),s=n(51523),l=n(84207),o=n(72573),a=n(99881);function r(e,t){try{var n,r;let c=(0,l.Z)(null!=e?e:0),d=c.mul((null==t?void 0:t.alreadyPercented)?1:100).toFixed(null!==(n=null==t?void 0:t.fixed)&&void 0!==n?n:2);if((0,i.eq)(c,0))return"0%";if(!(null==t?void 0:t.exact)&&d===0..toFixed(null!==(r=null==t?void 0:t.fixed)&&void 0!==r?r:2))return(null==t?void 0:t.alwaysSigned)?"<+0.01%":"<0.01%";return(null==t?void 0:t.alwaysSigned)?"".concat((0,i.gt)(d,0)?"+":"-").concat((0,a.Z)((0,i.gt)(d,0)?(0,o.B)(d):(0,o.B)((0,s.dC)(d,-1))),"%"):"".concat((0,a.Z)(d,{fractionLength:null==t?void 0:t.fixed}),"%")}catch(e){return"0%"}}},48678:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var i=n(81451),s=n(72573);function l(e){if(null==e||e.toString().includes("Infinity")||isNaN(e))return"";let t=e?(0,s.B)(e):"";return(0,i.eq)(t,0)?"":t}},7931:function(e,t,n){"use strict";n.d(t,{H:function(){return l}});var i=n(67294),s=n(12839);function l(e,t,n){var l;let o="all .4s cubic-bezier(0.4, 0, 0.2, 1)",[a,r]=(0,i.useState)(null!==(l=null==n?void 0:n.defaultHasWrapped)&&void 0!==l&&l);(0,i.useEffect)(function(){if(s.N9||!(null==n?void 0:n.defaultHasWrapped))return;let i=e.current,l=t.current;if(!i||!l)return;let o=i.getBoundingClientRect(),a=l.getBoundingClientRect(),r=a.top-o.top,c=o.top<a.top?1:-1;i.style.setProperty("transition",""),l.style.setProperty("transition",""),i.style.setProperty("transform","translateY(".concat(r*c,"px)")),l.style.setProperty("transform","translateY(".concat(-r*c,"px)"))},[]);let c=(0,i.useCallback)(()=>{let n=e.current,i=t.current;if(!n||!i)return;let s=n.getBoundingClientRect(),l=i.getBoundingClientRect(),c=l.top-s.top,d=s.top<l.top?1:-1;n.style.setProperty("transition",o),i.style.setProperty("transition",o),a?(n.style.setProperty("transform","translateY(0px)"),i.style.setProperty("transform","translateY(0px)"),r(!1)):(n.style.setProperty("transform","translateY(".concat(c*d,"px)")),i.style.setProperty("transform","translateY(".concat(-c*d,"px)")),r(!0))},[a,e,t]),d=(0,i.useCallback)(()=>{let n=e.current,i=t.current;n&&i&&(n.style.setProperty("transition",o),i.style.setProperty("transition",o),n.style.setProperty("transform","translateY(0px)"),i.style.setProperty("transform","translateY(0px)"))},[a,e,t]);return(0,i.useEffect)(()=>{let n=e.current,i=t.current,s=()=>{null==n||n.style.setProperty("pointerEvents","none")},l=()=>{null==n||n.style.setProperty("pointerEvents","")};return null==n||n.addEventListener("transitionstart",s),null==n||n.addEventListener("transitionend",l),null==i||i.addEventListener("transitionstart",s),null==i||i.addEventListener("transitionend",l),()=>{null==n||n.removeEventListener("transitionstart",s),null==n||n.removeEventListener("transitionend",l),null==i||i.removeEventListener("transitionstart",s),null==i||i.removeEventListener("transitionend",l)}},[e,t]),[a,{toggleSwap:c,resetSwapPosition:d}]}},51488:function(e,t,n){"use strict";n.d(t,{I:function(){return v}});var i=n(85893),s=n(18559),l=n(81451),o=n(3363),a=n(14200),r=n(51523);async function c(e,t){let n=(0,o.ZP)(e);if(!(0,a.W)(n))return!0;let i=(0,s.U7)(n),c=i.then(e=>!!e&&({isTransferable:!((0,l.$u)(t)&&(0,l.eg)(e.transferFeePercent,1)&&(0,l.lt)(t,(0,r.hi)(e.maximumFee,1)))}).isTransferable);return c}var d=n(28948),m=n(48162),u=n(51800),p=n(72573),f=n(99111),x=n(67294);function v(e){let t=(0,x.useMemo)(()=>e.map(e=>{var t;return(0,o.ZP)(null===(t=e.token)||void 0===t?void 0:t.mint)}),[e]),n=(0,x.useMemo)(()=>e.map(e=>(0,p.B)(e.amount)),[e]),s=(0,f.Z)(async()=>{for(let{token:t,amount:n}of e)if(t){let e=await c(t.mint,n);if(!e)return t}},t.concat(n),void 0),l=!!s,a=e=>{let{className:t}=e;return(0,i.jsx)(h,{className:t,needOpen:l,badToken:s})};return{isWarningChipOpen:l,badToken:s,Token2022FeeTooHighWarningChip:a}}function h(e){let{className:t,needOpen:n,badToken:s}=e;return(0,i.jsx)(d.Z,{show:n,children:(0,i.jsx)("div",{className:t,children:(0,i.jsxs)(u.Z,{className:"bg-[#da2eef1a] text-[#da2eef] rounded-xl py-3 px-3 mobile:px-2 items-center",children:[(0,i.jsx)(m.Z,{className:"mr-1",heroIconName:"exclamation-circle",size:"smi"}),(0,i.jsx)("div",{className:"text-xs mobile:text-2xs",children:"Transfer fee at 100%, transaction will fail."})]})})})}},58625:function(e,t,n){"use strict";n.d(t,{a:function(){return f}});var i=n(85893),s=n(53002),l=n(51523),o=n(81451),a=n(42186),r=n(72573),c=n(48162),d=n(28948),m=n(51800),u=n(92618),p=n(66180);function f(e){let{solLeastBalance:t,className:n,tooltipText:f}=e,x=(0,s.Z)(e=>e.solBalance),v=(0,l.hi)(x,10**a.Bk);return(0,i.jsx)(d.U,{children:v&&(0,o.lt)(v,null!=t?t:a.kn)&&(0,o.eg)(v,0)&&(0,i.jsxs)(m.Z,{className:(0,p.m)("text-sm mt-2 text-[#D8CB39] items-center justify-center",n),children:["SOL balance: ",(0,r.B)(v)," ",(0,i.jsxs)(u.Z,{placement:"bottom-right",children:[(0,i.jsx)(c.Z,{size:"sm",heroIconName:"question-mark-circle",className:"ml-2 cursor-help"}),(0,i.jsx)(u.Z.Panel,{children:(0,i.jsx)("p",{className:"w-80",children:null!=f?f:"SOL is needed for Solana network fees. A minimum balance of ".concat(null!=t?t:a.kn," SOL is\n                recommended to avoid failed transactions. This swap will leave you with less than \n                ").concat(null!=t?t:a.kn," SOL.")})})]})]})})}},99023:function(e,t,n){"use strict";n.d(t,{Mn:function(){return a},dO:function(){return r}});var i=n(81451),s=n(51523),l=n(84207),o=n(72616);function a(e){return e.map(e=>{let{liquidity:t,price:n}=e;return{x:Number(n),y:Number(t)}})}function r(e){let{coin1Amount:t,coin2Amount:n,currentPrice:a,coin1InputDisabled:r,coin2InputDisabled:c}=e,[d,m]=[(r?"0":t)||"0",c?"0":n],[u,p]=[(0,i.gt)(d,0),(0,i.gt)(m,0)],f=(0,l.Z)(m||"0"),x=a?u?(0,s.dC)(d,a).add(f):p?f:(0,l.Z)(1):(0,l.Z)(1);try{let e=a?(0,s.hi)((0,s.dC)(d,a),x):(0,o.y)(0),t=a?(0,s.hi)(f,x):(0,o.y)(0);return{ratio1:e,ratio2:t}}catch(e){return{}}}},7199:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eL}});var i,s,l=n(85893),o=n(91371),a=n(62512),r=n(72616),c=n(51523),d=n(26842),m=n(94678),u=n(59277);function p(){let e=(0,m.ZP)(e=>e.availableAmmConfigFeeOptions),t=(0,o.ZP)(e=>e.inDev),n=(0,u.ZP)(e=>e.apiUrls.clmmConfigs);(0,d.Z)(async()=>{if(null==e?void 0:e.length)return;let i=await (0,a.Z)(n),s=t?{AjUvAGNuLJiXXGRQ1uiH4v6fBUJm1zwjBwyfK1qe27Ce:{id:"AjUvAGNuLJiXXGRQ1uiH4v6fBUJm1zwjBwyfK1qe27Ce",index:0,protocolFeeRate:12e3,tradeFeeRate:100,fundFeeRate:100,fundOwner:"",tickSpacing:1,description:"Dev"},ABPi23j9qDjCeK5WwutWn6XG8sMRV7AiG1Z5bP8cViuz:{id:"ABPi23j9qDjCeK5WwutWn6XG8sMRV7AiG1Z5bP8cViuz",index:0,protocolFeeRate:12e3,tradeFeeRate:2500,fundFeeRate:2500,fundOwner:"",tickSpacing:60,description:"Dev"},"85JxuepKfJsmb29ZKThuod3yeBS4dXmsCQUbeo1utpeX":{id:"85JxuepKfJsmb29ZKThuod3yeBS4dXmsCQUbeo1utpeX",index:0,protocolFeeRate:12e3,tradeFeeRate:100,fundFeeRate:100,fundOwner:"",tickSpacing:10,description:"Dev"}}:null==i?void 0:i.data;s&&m.ZP.setState({availableAmmConfigFeeOptions:Object.values(s).map(e=>({...e,original:e,protocolFeeRate:(0,r.y)((0,c.hi)(e.protocolFeeRate,1e4),{alreadyDecimaled:!0}),tradeFeeRate:(0,r.y)((0,c.hi)(e.tradeFeeRate,1e4),{alreadyDecimaled:!0})}))})},[t,n])}var f=n(76961),x=n(31555),v=n(43067),h=n(54592),b=n(48162),g=n(85830),Z=n(51800),P=n(67294),y=n(72305),j=n(90482),S=n(66180),N=n(6262),k=n(34003),w=n(79938),C=n(13039),A=n(94355),T=n(14200),I=n(55469),F=n(62952);async function L(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m.ZP.getState(),{coin1:n,coin2:i,coin1Amount:s,coin2Amount:l}=t,o=(0,F.n)(n,s,{alreadyDecimaled:!0}),a=(0,F.n)(i,l,{alreadyDecimaled:!0}),r=[n,i].some(e=>(0,T.W)(e)&&e);if(r){let{hasConfirmed:t}=(0,I.e)({amount:[o,a]});e=await t}else e=!0;if(!e){A.Z.getState().logError("Canceled by User","The operation is canceled by user");return}return(0,w.ZP)(async e=>{let{transactionCollector:n}=e,{tempDataCache:i}=m.ZP.getState();(0,k.Z)(i,"should create pool first");let{innerTransactions:s}=await (0,C.B)(t);n.add(i,{txHistoryInfo:{title:"Create pool",description:"create clmm pool"}}),n.add(s,{txHistoryInfo:{title:"Open pool position",description:"Open clmm pool position"}})})}var B=n(81451),M=n(71375),U=n(84207),E=n(72573),D=n(73944),R=n(96662),O=n(27713),z=n(475),q=n(19036),H=n(53002),W=n(1684);async function J(e){var t;let{timestamp:n}=e,{coin1:i,coin2:s,userSelectedAmmConfigFeeOption:l,userSettedCurrentPrice:o,focusSide:a,ammPoolStartTime:r}=m.ZP.getState(),{connection:d}=R.ZP.getState(),{owner:p,txVersion:f}=H.Z.getState(),{programIds:x}=u.ZP.getState();(0,k.Z)(d,"connection is not ready"),(0,k.Z)(i,"not set coin1"),(0,k.Z)(s,"not set coin2"),(0,k.Z)(l,"not set userSelectedAmmConfigFeeOption"),(0,k.Z)(o,"not set userSettedCurrentPrice");let v=(0,B.$u)(o)?"coin1"===a?(0,U.Z)(o):(0,c.hi)(1,o):(0,U.Z)(0),h=(0,M.Z)((null!==(t=null==r?void 0:r.getTime())&&void 0!==t?t:0)/1e3),b=(0,T.D)(i.mint),g=(0,T.D)(s.mint),{innerTransactions:Z,address:P}=await y.jsJ.makeCreatePoolInstructionSimple({connection:d,programId:x.CLMM,mint1:{programId:b,mint:i.mint,decimals:i.decimals},mint2:{programId:g,mint:s.mint,decimals:s.decimals},ammConfig:(0,q.R)(l.original),initialPrice:(0,O.I2)(v,15),owner:null!=p?p:D.nh.default,payer:null!=p?p:D.nh.default,computeBudgetConfig:await (0,z.u)(),startTime:h,lookupTableCache:w.eq,makeTxVersion:f}),j=y.jsJ.makeMockPoolInfo({ammConfig:(0,q.R)(l.original),mint1:{programId:b,mint:i.mint,decimals:i.decimals},mint2:{programId:g,mint:s.mint,decimals:s.decimals},owner:null!=p?p:D.nh.default,programId:x.CLMM,createPoolInstructionSimpleAddress:P,initialPrice:(0,O.I2)(v,15),startTime:h});return{mockedPoolInfo:j,makePoolInstruction:Z}}var $=n(6994),_=n(70745),V=n(54531),X=n(97664),K=n(25194),Y=n(28948),G=n(60421),Q=n(72259),ee=n(18074),et=n(95865),en=n(4465),ei=n(14209),es=n(22305),el=n(47857),eo=n(99779),ea=n(7931),er=n(92224),ec=n(51488),ed=n(99023),em=n(58625),eu=n(87980),ep=n(52784),ef=n(3363),ex=n(92618);function ev(e){let{className:t}=e,n=(0,m.ZP)(e=>e.selectableAmmPools),i=null==n?void 0:n.map(e=>(0,ef.ZP)(e.ammConfig.id)),s=(0,m.ZP)(e=>e.userSelectedAmmConfigFeeOption),o=(0,m.ZP)(e=>e.availableAmmConfigFeeOptions);return p(),(0,ep.Z)(!0),!function(){let e=(0,m.ZP)(e=>e.coin1),t=(0,m.ZP)(e=>e.coin2),n=(0,m.ZP)(e=>e.selectableAmmPools),i=null==n?void 0:n.map(e=>(0,ef.ZP)(e.ammConfig.id)),s=(0,m.ZP)(e=>e.availableAmmConfigFeeOptions),l=null==s?void 0:s.filter(e=>!(null==i?void 0:i.includes(e.id))),o=null==l?void 0:l.map(e=>e.id).join("_");(0,P.useEffect)(()=>{if(l&&e&&t){let e=l.find(e=>(0,B.eq)(e.tradeFeeRate,.0025));m.ZP.setState({userSelectedAmmConfigFeeOption:e})}else m.ZP.setState({userSelectedAmmConfigFeeOption:void 0})},[o,e,t])}(),(0,l.jsx)(eh,{configs:o,current:s,existIds:i,className:t})}function eh(e){let{configs:t,current:n,existIds:i,className:s}=e,o=(0,m.ZP)(e=>e.coin1),a=(0,m.ZP)(e=>e.coin2);return(0,l.jsx)(Z.Z,{className:(0,S.m)("gap-2 grid grid-cols-3 item-grow items-stretch",s),children:null==t?void 0:t.map(e=>{let t=e.id===(null==n?void 0:n.id),s=null==i?void 0:i.includes(e.id),r=o&&a&&!s;return(0,l.jsxs)(ex.Z,{className:"grow",disable:!s,children:[(0,l.jsxs)("div",{className:"relative grow  items-stretch px-1.5 py-2 ".concat(t?"ring-inset ring-1.5 ring-[#abc4ff]":"ring-inset ring-1.5 ring-[#abc4ff60]"," rounded-xl ").concat(r?"clickable-no-transform select-none":"opacity-30 cursor-not-allowed"),onClick:()=>{r&&m.ZP.setState({userSelectedAmmConfigFeeOption:e})},children:[t?(0,l.jsx)("div",{className:"absolute p-0.5 rounded-full right-1 top-1 -translate-y-1/2 translate-x-1/2 z-10 text-[#abc4ff] bg-[#18225d]",children:(0,l.jsx)(b.Z,{heroIconName:"check-circle",size:"smi"})}):null,(0,l.jsxs)(Z.Z,{className:"items-center gap-2",children:[(0,l.jsx)("div",{className:"text-white font-medium text-sm mb-1",children:(0,ee.Z)(e.tradeFeeRate,{fixed:4})}),(0,l.jsxs)(Z.Z,{className:"text-[#abc4ff80] text-xs mb-1",children:["spacing: ",e.tickSpacing]})]}),(0,l.jsx)("div",{className:"text-[#abc4ff80] text-xs",children:e.description})]}),(0,l.jsx)(ex.Z.Panel,{children:"Already created"})]},e.id)})})}var eb=n(65927),eg=n(48678),eZ=n(56419);let eP=e=>Math.min(e+2,15);function ey(e){var t,n,i,s;let{startTime:o,open:a,coin1:r,coin2:d,coin1Amount:m,coin2Amount:u,coin1AmountFee:p,coin2AmountFee:f,focusSide:x,decimals:g,currentPrice:y,position:j,totalDeposit:N,inRange:k,feeRate:w,onConfirm:C,onClose:A}=e,T=P.useRef(!1),I=Math.min(g,6),F=P.useCallback(e=>{null==C||C(e),T.current=!0},[A]),L=P.useCallback(()=>{A()},[A]),M=(0,E.B)(null==j?void 0:j.min,{decimalLength:15,maxSignificantCount:eP(I)}),U=(0,E.B)(null==j?void 0:j.max,{decimalLength:15,maxSignificantCount:eP(I)}),D=(null!==(i=null===(t=(0,es.Z)(M).dec)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>10,R=(null!==(s=null===(n=(0,es.Z)(U).dec)||void 0===n?void 0:n.length)&&void 0!==s?s:0)>10;return(0,l.jsx)(eb.Z,{open:a,onClose:L,children:e=>{var t,n;let{close:i}=e;return(0,l.jsxs)($.Z,{className:(0,S.m)("p-6 mobile:py-4 mobile:px-2 rounded-3xl w-[min(480px,95vw)] mx-8 border-1.5 border-[rgba(171,196,255,0.2)]  bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:[(0,l.jsxs)(Z.Z,{className:"justify-between items-center mb-6 mobile:mb-3",children:[(0,l.jsxs)("div",{className:"text-xl font-semibold text-white mobile:text-base",children:["Preview Deposit to ",null==r?void 0:r.symbol," / ",null==d?void 0:d.symbol]}),(0,l.jsx)(b.Z,{className:"text-[#ABC4FF] cursor-pointer",heroIconName:"x",onClick:i})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"My Position"}),(0,l.jsxs)("div",{className:"text-sm flex leading-[18px] flex-col pt-2.5",children:[(0,l.jsxs)("div",{className:"flex justify-between mb-2.5",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(_.Z,{className:"inline-block mr-1",size:"sm",token:r}),null==r?void 0:r.symbol]}),(0,l.jsxs)(h.Z,{className:"items-end",children:[(0,l.jsxs)("span",{children:[(0,E.B)(m)," ",null==r?void 0:r.symbol]}),(0,B.$u)(p)&&(0,l.jsxs)(Z.Z,{className:"text-xs text-[#abc4ff80] gap-0.5 items-center",children:[(0,l.jsxs)("span",{children:["Position: ",(0,E.B)((0,c.h9)(m,p))," + "]}),(0,l.jsxs)(Z.Z,{className:"text-[#D8CB39] font-medium gap-0.5 items-center",children:[(0,l.jsx)("span",{children:"Fee"}),(0,l.jsxs)(ex.Z,{children:[(0,l.jsx)(b.Z,{size:"xs",heroIconName:"information-circle"}),(0,l.jsx)(ex.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[300px] space-y-1.5",children:"This token uses the Token-2022 program and includes a transfer fee set by the token creator. These are the final deposit amounts for the position and the transfer fee."})})]}),(0,l.jsxs)("span",{children:[": ",(0,E.B)(p)]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:[(0,l.jsx)(_.Z,{className:"inline-block mr-1",size:"sm",token:d}),null==d?void 0:d.symbol]}),(0,l.jsxs)(h.Z,{className:"items-end",children:[(0,l.jsxs)("span",{children:[(0,E.B)(u)," ",null==d?void 0:d.symbol]}),(0,B.$u)(f)&&(0,l.jsxs)(Z.Z,{className:"text-xs text-[#abc4ff80] gap-0.5 items-center",children:[(0,l.jsxs)("span",{children:["Position: ",(0,E.B)((0,c.h9)(u,f))," + "]}),(0,l.jsxs)(Z.Z,{className:"text-[#D8CB39] font-medium gap-0.5 items-center",children:[(0,l.jsx)("span",{children:"Fee"}),(0,l.jsxs)(ex.Z,{children:[(0,l.jsx)(b.Z,{size:"xs",heroIconName:"information-circle"}),(0,l.jsx)(ex.Z.Panel,{children:(0,l.jsx)("div",{className:"max-w-[300px] space-y-1.5",children:"This token uses the Token-2022 program and includes a transfer fee set by the token creator. These are the final deposit amounts for the position and the transfer fee."})})]}),(0,l.jsxs)("span",{children:[": ",(0,E.B)(f)]})]})]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between mt-2 pl-1",children:[(0,l.jsx)("span",{className:"flex items-center text-sm text-[#abc4ff]",children:"Fee tier"}),(0,l.jsx)("span",{children:w})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:"text-sm flex justify-between leading-[18px] mb-2 font-medium mobile:text-xs",children:[(0,l.jsx)("span",{className:"flex text-sm leading-[18px] text-secondary-title mr-2",children:"Current Price"}),y?(0,eg.C)((0,E.B)(y,{decimalLength:15})):"0"," ",null===(t="coin1"===x?d:r)||void 0===t?void 0:t.symbol," per ",null===(n="coin1"===x?r:d)||void 0===n?void 0:n.symbol]}),(0,l.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Selected Range"}),(0,l.jsx)("span",{children:k?(0,l.jsxs)(Z.Z,{className:"items-center bg-[#142B45] rounded text-xs text-[#39D0D8] py-0.5 px-1 ml-2",children:[(0,l.jsx)(b.Z,{size:"xs",iconSrc:"/icons/check-circle.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"In Range"})]}):(0,l.jsxs)(Z.Z,{className:"items-center bg-[#DA2EEF]/10 rounded text-xs text-[#DA2EEF] py-0.5 px-1 ml-2",children:[(0,l.jsx)(b.Z,{size:"xs",iconSrc:"/icons/warn-stick.svg"}),(0,l.jsx)("div",{className:"mobile:text-2xs font-normal",style:{marginLeft:4},children:"Out of Range"})]})})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Min Price"}),(0,l.jsx)("div",{className:"my-3 ".concat(D?"text-lg mobile:text-sm":"text-xl mobile:text-base"),children:M}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==d?void 0:d.symbol," per ",null==r?void 0:r.symbol]})]}),(0,l.jsxs)("div",{className:"border-1.5 justify-center text-center flex-1 border-light-blue-opacity rounded-xl p-3 mobile:p-2",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Max Price"}),(0,l.jsx)("div",{className:"my-3 ".concat(R?"text-lg mobile:text-sm":"text-xl mobile:text-base"),children:U}),(0,l.jsxs)("div",{className:"text-sm text-[#abc4ff80]",children:[null==d?void 0:d.symbol," per ",null==r?void 0:r.symbol]})]})]})]}),(0,l.jsxs)("div",{className:"mt-4 border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg",children:N})]}),o&&(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Start Time"}),(0,l.jsx)("span",{className:"",children:(0,eZ.xn)(o)})]})]}),(0,l.jsx)(h.Z,{className:"items-center mt-5 mobile:mt-3",children:(0,l.jsx)("div",{className:"self-stretch",children:(0,l.jsx)(h.Z,{children:(0,l.jsx)(v.Z,{className:"frosted-glass-teal",onClick:()=>F(i),children:"Create Pool and Deposit"})})})})]})}})}function ej(){return(0,l.jsx)("div",{className:"flex mb-4 px-5 h-[91px] mobile:h-[75px] items-center text-secondary-title opacity-50 bg-dark-blue rounded-xl",children:"Select Token"})}function eS(){return(0,l.jsxs)("div",{className:"absolute text-sm flex flex-col text-center justify-center items-center p-2 w-full h-full bg-[#141041] bg-opacity-80 z-10 rounded-xl",children:[(0,l.jsx)(b.Z,{className:"mb-1",heroIconName:"lock-closed",size:"sm"}),"Current price is outside your selected range. Single-asset deposit only."]})}function eN(e){let{decimals:t,minValue:n,maxValue:i,onPriceChange:o,onInDecrease:a,onBlur:r}=e;return(0,l.jsxs)("div",{className:"flex gap-2.5",children:[(0,l.jsx)(Q.Z,{className:"grow",label:"Min Price",decimalMode:!0,showPlusMinusControls:!0,decimalCount:t,value:n,maxN:i?Number(i):void 0,onBlur:()=>null==r?void 0:r({side:s.Low,val:n}),increaseFn:()=>a({val:n,side:s.Low,isIncrease:!0}),decreaseFn:()=>a({val:n,side:s.Low,isIncrease:!1}),onUserInput:(e,t)=>{let{triggerBy:n}=t;e&&"increase-decrease"!==n&&o({val:e,side:s.Low})}}),(0,l.jsx)(Q.Z,{className:"grow",label:"Max Price",decimalMode:!0,showPlusMinusControls:!0,decimalCount:t,value:i,minN:n?Number(n):void 0,onBlur:()=>null==r?void 0:r({side:s.Upper,val:i}),increaseFn:()=>a({val:i,side:s.Upper,isIncrease:!0}),decreaseFn:()=>a({val:i,side:s.Upper,isIncrease:!1}),onUserInput:(e,t)=>{let{triggerBy:n}=t;e&&"increase-decrease"!==n&&o({val:e,side:s.Upper})}})]})}(i=s||(s={})).Low="priceLower",i.Upper="priceUpper";var ek=n(40816);let ew="mobile:justify-center mobile:w-1/2";function eC(e){let{coin1:t,coin2:n,focusSide:i,onChangeFocus:s}=e,o=(0,P.useMemo)(()=>{let e=[];return t&&e.push({label:"".concat(t.symbol||"Unknown"," price"),value:t.id,className:ew}),n&&e.push({label:"".concat(n.symbol||"Unknown"," price"),value:n.id,className:ew}),e},[t,n]),a=(0,P.useCallback)(e=>{s(e.value===n.id?"coin2":"coin1")},[n]);return(0,l.jsx)("div",{className:"flex justify-between items-center mobile:flex-col mobile:items-baseline mobile:mb-3",children:t&&n&&(0,l.jsx)(ek.Z,{classNames:"ml-4 mobile:w-full mobile:ml-0",tabs:o,selectedValue:"coin1"===i?t.id:null==n?void 0:n.id,onChange:a})})}let eA=e=>{let{side:t,price:n,tick:i}=e;return t===s.Low?{[t]:n,priceLowerTick:i}:{[t]:n,priceUpperTick:i}};function eT(){var e,t,n,i,a,r,d,u,p;!function(){let{coin1:e,coin2:t,userSelectedAmmConfigFeeOption:n,userSettedCurrentPrice:i,ammPoolStartTime:s}=(0,m.ZP)(),l=(0,R.ZP)(e=>e.connection),o=(0,H.Z)(e=>e.owner),a=(0,P.useRef)(-1);(0,P.useEffect)(()=>{if(l&&e&&t&&i&&n){let e=globalThis.performance.now();a.current=Math.max(e,a.current),J({timestamp:globalThis.performance.now()}).then(t=>{let{mockedPoolInfo:n,makePoolInstruction:i}=t;a.current<=e&&m.ZP.setState({tempDataCache:i,currentAmmPool:(0,W.Z)({state:n})})}).catch(()=>{m.ZP.setState({tempDataCache:void 0,currentAmmPool:void 0})})}},[(0,E.B)(i),e,t,n,i,s,o,l])}();let[f,{off:g,on:k}]=(0,er.ZP)(!1),w=(0,o.ZP)(e=>e.isMobile),C=(0,H.Z)(e=>e.connected),T=(0,H.Z)(e=>e.checkWalletHasEnoughBalance),I=(0,A.Z)(e=>e.popConfirm),D=(0,o.ZP)(e=>e.isApprovePanelShown),O=(0,m.ZP)(e=>e.currentAmmPool),z=(0,m.ZP)(e=>e.coin1),q=(0,m.ZP)(e=>e.coin2),_=(0,m.ZP)(e=>e.coin1Amount),eu=(0,m.ZP)(e=>e.coin2Amount);(0,m.ZP)(e=>e.coin1AmountFee),(0,m.ZP)(e=>e.coin2AmountFee);let ep=(0,m.ZP)(e=>e.liquidity),ef=(0,m.ZP)(e=>e.focusSide),ex="coin1"===ef,eh=(0,m.ZP)(e=>e.priceLower),eb=(0,m.ZP)(e=>e.priceUpper),eg=(0,m.ZP)(e=>e.ammPoolStartTime),eZ=(0,m.ZP)(e=>e.userSettedCurrentPrice),eP=(0,m.ZP)(e=>e.userSelectedAmmConfigFeeOption),ek=(null===(e=(0,es.Z)((0,ei.Lu)((null==eZ?void 0:eZ.toString())||"")).dec)||void 0===e?void 0:e.length)||0,ew=(0,P.useRef)({[s.Low]:void 0,[s.Upper]:void 0}),eT=(0,P.useRef)(),eF=(0,P.useRef)(),[eL,eB]=(0,P.useState)([]),[eM,eU]=(0,P.useState)({[s.Low]:void 0,[s.Upper]:void 0}),eE=(0,P.useCallback)(e=>eB(t=>[new j.Z((null==e?void 0:e.numerator.toString())||0).div((null==e?void 0:e.denominator.toString())||1).toFixed(20),t[1]]),[]),eD=(0,P.useCallback)(e=>eB(t=>[t[0],new j.Z((null==e?void 0:e.numerator.toString())||0).div((null==e?void 0:e.denominator.toString())||1).toFixed(20)]),[]),eR="".concat(null==O?void 0:O.idString,"-").concat(ef),eO=(0,P.useMemo)(()=>eL.filter(e=>!!e).reduce((e,t)=>e.add((0,U.Z)(t)),(0,U.Z)(0)),[eL]),ez=z||q?Math.max(null!==(n=null==z?void 0:z.decimals)&&void 0!==n?n:0,null!==(i=null==q?void 0:q.decimals)&&void 0!==i?i:0):6,eq=(0,en.aT)(null==O?void 0:O.state.mintA.mint,z),eH=(0,P.useMemo)(()=>Math.pow(-1,eq?ex?0:1:ex?1:0),[eq,ex]),[eW,eJ]=(0,P.useState)({}),e$=(0,el.z)(()=>{eJ({...m.ZP.getState()}),k()});(0,P.useEffect)(()=>{O&&(eF.current=O)},[O]),(0,P.useEffect)(()=>()=>{m.ZP.getState().userSettedCurrentPrice&&m.ZP.setState({userSettedCurrentPrice:(0,c.hi)(1,m.ZP.getState().userSettedCurrentPrice)})},[ef]);let e_=O&&void 0!==eZ&&void 0!==eh&&void 0!==eb?[(0,M.Z)(eb||0,ez).lt((0,M.Z)(eZ||0,ez)),(0,M.Z)(eh||0,ez).gt((0,M.Z)(eZ||0,ez))]:[!1,!1];ex||e_.reverse();let[eV,eX]=e_,eK=(0,P.useRef)(null),eY=(0,P.useRef)(null),[,{toggleSwap:eG}]=(0,ea.H)(eK,eY);(0,eo.P)(e=>{let[t]=e;t&&t!==ef&&eG()},[ef]);let eQ=(0,P.useCallback)(e=>Number((0,U.Z)(e).toFixed(Math.max(ez+2,ek))),[ek,ez]);(0,P.useEffect)(()=>()=>m.ZP.setState({focusSide:"coin1",userCursorSide:"coin1",totalDeposit:void 0}),[]),(0,P.useEffect)(()=>m.ZP.setState({totalDeposit:eO}),[eO]);let e0=(0,P.useRef)(!1),e1=!z||!q||!O,e2=(0,P.useCallback)(e=>m.ZP.setState({focusSide:e}),[]),e5=(0,P.useCallback)((e,t)=>m.ZP.setState({[t]:e}),[]),e4=(0,el.z)(e=>{let{side:t,val:n}=e;if(e1)return;let i=(0,N.yc)({p:n,coin1:z,coin2:q,reverse:!ex,ammPool:O});i&&(ew.current[t]=i.tick,eU(e=>({...e,[t]:eQ(n)})),e0.current=!0)});(0,P.useEffect)(()=>{var e,t;if(!eZ){eU({[s.Low]:void 0,[s.Upper]:void 0});return}e3({side:s.Upper,val:null===(e=(0,c.dC)(eZ,1.5))||void 0===e?void 0:e.toFixed(20),skipCheck:!0,noTimeOut:!0}),e3({side:s.Low,val:null===(t=(0,c.dC)(eZ,.5))||void 0===t?void 0:t.toFixed(20),skipCheck:!0})},[eZ,e4,eR,ez]);let e8=(0,el.z)(()=>{if(O&&void 0!==eM[s.Low]&&void 0!==eM[s.Upper]&&eM[s.Low]>=eM[s.Upper]){let e=ex?z:q,t=ew.current[s.Upper]-O.state.tickSpacing*eH,{price:n,tick:i}=(0,N.Ek)({poolInfo:O.state,baseIn:(0,en.aT)(O.state.mintA.mint,null==e?void 0:e.mint),tick:t});ew.current[s.Low]=i,m.ZP.setState({priceLowerTick:i,priceLower:n}),eU(e=>({...e,[s.Low]:eQ(n)}))}}),e3=(0,P.useCallback)(e=>{let{side:t,val:n,skipCheck:i,noTimeOut:s}=e;if(!O||!z||!q||!n)return;let l=()=>{if(e0.current||i){let e=(0,N.yc)({p:n,coin1:z,coin2:q,reverse:!ex,ammPool:O});if(!e)return;ew.current[t]=e.tick,eU(n=>({...n,[t]:eQ(e.price)})),m.ZP.setState(eA({side:t,price:e.price,tick:e.tick}))}e0.current=!1,i||e8()};eT.current=s?l():window.setTimeout(l,200)},[z,q,null==O?void 0:O.idString,ex,eQ]),e6=(0,el.z)(e=>{let{val:t,side:n,isIncrease:i}=e;if(!O||!z||!q||!t)return 0;eT&&clearTimeout(eT.current),e0.current=!1;let l=ex?z:q,o=ew.current[n]+(i?O.state.tickSpacing:-1*O.state.tickSpacing)*Math.pow(-1,eq?ex?0:1:ex?1:0),{price:a}=(0,N.Ek)({poolInfo:O.state,baseIn:(0,en.aT)(O.state.mintA.mint,null==l?void 0:l.mint),tick:o}),r=Number(a.toFixed(ez));return n===s.Low&&r>=eM[s.Upper]?Number(t):(ew.current[n]=o,m.ZP.setState(eA({side:n,price:a,tick:o})),eU(e=>({...e,[n]:r})),r)}),{ratio1:e7,ratio2:e9}=(0,ed.dO)({currentPrice:null!=eZ?(0,U.Z)(eZ):eZ,coin1InputDisabled:eV,coin2InputDisabled:eX,coin1Amount:_,coin2Amount:eu}),te=z&&T((0,F.n)(z,_,{alreadyDecimaled:!0})),tt=q&&T((0,F.n)(q,eu,{alreadyDecimaled:!0})),{Token2022FeeTooHighWarningChip:tn,isWarningChipOpen:ti}=(0,ec.I)([{token:z,amount:_},{token:q,amount:eu}]);return(0,l.jsxs)($.Z,{className:(0,S.m)("flex mobile:flex-col gap-4 p-6 mobile:py-4 mobile:px-2 rounded-3xl w-full border-1.5 border-[rgba(171,196,255,0.2)] bg-cyberpunk-card-bg shadow-cyberpunk-card"),size:"lg",children:[(0,l.jsxs)(h.Z,{className:"gap-6 w-1/2 mobile:w-full border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] mb-2",children:"Select Tokens"}),(0,l.jsxs)(G.Z,{className:"grid-cols-2 gap-4",children:[(0,l.jsx)(eI,{title:"Base Token",turnOnTokenVerification:!0,tokenKey:"coin1",onSelectToken:e5,token:z,disableTokens:q?[q]:void 0}),(0,l.jsx)(eI,{title:"Quote Token",turnOnTokenVerification:!0,tokenKey:"coin2",onSelectToken:e5,token:q,disableTokens:z?[z]:void 0})]}),tn({className:"pt-4"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] mb-2",children:"Select Fee & Tick Spacing"}),(0,l.jsx)(ev,{})]}),(0,l.jsxs)(h.Z,{className:"gap-4",children:[(0,l.jsxs)(Z.Z,{className:"mb-1 justify-between",children:[(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] my-1",children:"Set Starting Price"}),(0,l.jsx)(eC,{coin1:z,coin2:q,focusSide:ef,onChangeFocus:e2})]}),(0,l.jsx)("div",{className:"text-xs bg-[#abc4ff14] p-3 rounded-xl text-[#abc4ff] leading-5",children:"To initialize and create the pool, first set the starting price. Then, enter your price range and deposit amounts."}),(0,l.jsx)(Q.Z,{decimalMode:!0,inputClassName:"text-right",prefix:(0,l.jsxs)("span",{className:"text-base text-secondary-title opacity-50",children:["Current ",ex?null==z?void 0:z.symbol:null==q?void 0:q.symbol," Price"]}),suffix:(0,l.jsx)("span",{className:"text-xs text-secondary-title opacity-50",children:ex?null==q?void 0:q.symbol:null==z?void 0:z.symbol}),value:eZ,decimalCount:15,onUserInput:e=>{m.ZP.setState({userSettedCurrentPrice:e})}})]}),(0,l.jsxs)("div",{className:O?"":"opacity-50",children:[(0,l.jsx)("div",{className:"text-secondary-title font-medium mb-2",children:"Set Price Range"}),(0,l.jsx)(eN,{decimals:Math.max(null!==(a=null===(t=(0,es.Z)(eZ).dec)||void 0===t?void 0:t.length)&&void 0!==a?a:0,ez),minValue:(0,E.B)(eM[s.Low]),maxValue:(0,E.B)(eM[s.Upper]),onBlur:e3,onPriceChange:e4,onInDecrease:e6})]}),(eV||eX)&&(0,l.jsx)(Y.U,{children:(0,l.jsxs)("div",{className:"flex items-center p-3 bg-[#2C2B57] rounded-lg text-xs text-[#D6CC56]",children:[(0,l.jsx)(b.Z,{size:"sm",className:"mr-1.5",heroIconName:"exclamation-circle"}),"Your position will not trade or earn fees until price moves into your range."]})})]}),(0,l.jsxs)(h.Z,{className:"gap-4 w-1/2 mobile:w-full border-1.5 border-[#abc4ff40] rounded-xl p-3 mobile:p-2 mobile:mt-3",children:[(0,l.jsxs)("div",{className:O?"":"opacity-50 pointer-events-none",children:[(0,l.jsx)(Z.Z,{className:"text-secondary-title justify-between mb-2",children:(0,l.jsx)("div",{className:"font-medium text-[#abc4ff] my-1",children:"Deposit Amount"})}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"relative",ref:eK,children:[eV&&(0,l.jsx)(eS,{}),z?(0,l.jsx)(X.Z,{hideTransferFee:!0,className:"mb-4 mobile:mt-0 py-2 mobile:py-1 px-3 mobile:px-2",disabled:D,disabledInput:!O,noDisableStyle:!0,value:O?(0,E.B)(_):void 0,haveHalfButton:!0,haveCoinIcon:!0,onPriceChange:eE,onUserInput:e=>{m.ZP.setState({coin1Amount:e,userCursorSide:"coin1"})},token:z,onCalculateTransferFee:e=>{m.ZP.setState({coin1AmountFee:e})}}):(0,l.jsx)(ej,{})]}),(0,l.jsxs)("div",{className:"relative",ref:eY,children:[eX&&(0,l.jsx)(eS,{}),q?(0,l.jsx)(X.Z,{hideTransferFee:!0,className:"py-2 mobile:py-1 px-3 mobile:px-2",disabled:D,noDisableStyle:!0,value:O?(0,E.B)(eu):void 0,haveHalfButton:!0,haveCoinIcon:!0,onPriceChange:eD,onUserInput:e=>{m.ZP.setState({coin2Amount:e,userCursorSide:"coin2"})},token:q,onCalculateTransferFee:e=>{m.ZP.setState({coin2AmountFee:e})}}):(0,l.jsx)(ej,{})]})]})]}),(0,l.jsxs)("div",{className:"".concat(O?"":"opacity-50 pointer-events-none"," border-1.5 border-[#abc4ff80]  rounded-xl px-3 py-4"),children:[(0,l.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Total Deposit"}),(0,l.jsx)("span",{className:"text-lg leading-[18px]",children:O&&((0,B.$u)(_)||(0,B.$u)(eu))?(0,et.Z)(eO):"--"})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm leading-[18px] text-secondary-title",children:"Deposit Ratio"}),(0,l.jsxs)("span",{className:"text-lg flex leading-[18px]",children:[O&&(0,l.jsx)(V.Z,{size:"sm",token1:z,token2:q}),O&&((0,B.$u)(_)||(0,B.$u)(eu))?"".concat(null!==(r=(0,ee.Z)(e7))&&void 0!==r?r:"--"," / ").concat(null!==(d=(0,ee.Z)(e9))&&void 0!==d?d:"--"):"--"]})]})]}),(0,l.jsx)(K.Z,{className:"".concat(O?"":"opacity-50 pointer-events-none"," mb-8"),label:"Start time (Optional):",disableDateBeforeCurrent:!0,canEditSeconds:!0,onDateChange:e=>m.ZP.setState({ammPoolStartTime:e}),showTime:{format:"HH:mm:ss"}}),(0,l.jsxs)(h.Z,{className:"gap-4 mt-auto",children:[(0,l.jsxs)("div",{className:"flex items-center text-xs p-[12px] rounded-lg text-secondary-title bg-[rgba(171,196,255,0.08)] mt-auto",children:[(0,l.jsx)(b.Z,{size:"sm",heroIconName:"information-circle"}),(0,l.jsxs)("div",{className:"ml-2.5",children:[(0,l.jsx)("span",{className:"font-medium",children:"SOL network fee"}),": Estimated transaction fee for creating a pool is approximately 0.3 SOL, but may vary depending on transaction size."]})]}),(0,l.jsx)(v.Z,{className:"frosted-glass-teal mobile:w-full",size:w?"sm":"lg",validators:[{should:C,forceActive:!0,fallbackProps:{onClick:()=>o.ZP.setState({isWalletSelectorShown:!0}),children:"Connect Wallet"}},{should:z&&q},{not:ti},{should:O,fallbackProps:{children:"Fail to find this pool"}},{should:(0,B.$u)(eZ),fallbackProps:{children:"Input Price"}},{should:eP,fallbackProps:{children:"Select a fee option"}},{should:(0,B.$u)(_)||(0,B.$u)(eu),fallbackProps:{children:"Input Token Amount"}},{not:(0,B.$u)(ex?_:eu)&&ep&&ep.eq(y.xEJ),fallbackProps:{children:"Token Amount Fail to Create Pool"}},{should:eV||te,fallbackProps:{children:"Insufficient ".concat(null!==(u=null==z?void 0:z.symbol)&&void 0!==u?u:""," balance")}},{should:eX||tt,fallbackProps:{children:"Insufficient ".concat(null!==(p=null==q?void 0:q.symbol)&&void 0!==p?p:""," balance")}}],onClick:()=>{e$()},children:"Preview Pool"}),(0,l.jsx)(em.a,{tooltipText:"SOL is needed for Solana network fees. A minimum balance of 1 SOL is recommended when creating a pool to avoid failed transactions.",solLeastBalance:1,className:"my-0"})]})]}),(0,l.jsx)(ey,{open:f,coin1:eW.coin1,coin2:eW.coin2,coin1Amount:eW.coin1Amount,coin2Amount:eW.coin2Amount,coin1AmountFee:eW.coin1AmountFee,coin2AmountFee:eW.coin2AmountFee,focusSide:ef,decimals:ez,currentPrice:(0,U.Z)(eZ),startTime:eg,position:{min:(0,U.Z)(eW.priceLower).toFixed(ez),max:(0,U.Z)(eW.priceUpper).toFixed(ez)},totalDeposit:(0,et.Z)(eO),onClose:g,inRange:!e_.find(e=>e),feeRate:(0,ee.Z)(null==eP?void 0:eP.tradeFeeRate),onConfirm:()=>{L(eW).then(e=>{g(),(null==e?void 0:e.allSuccess)&&(m.ZP.getState().refreshConcentrated(),I({type:"success",title:"Pool created successfully!",description:"Do you want to create a farm based on this pool?",confirmButtonIsMainButton:!0,confirmButtonText:"Create Farm",cancelButtonText:"Not Now",onConfirm(){var e,t,n;m.ZP.setState({coin1:null===(e=eF.current)||void 0===e?void 0:e.base,coin2:null===(t=eF.current)||void 0===t?void 0:t.quote,chartPoints:[],lazyLoadChart:!0,currentAmmPool:eF.current}),(0,x.Eh)("/clmm/edit-farm",{queryProps:{farmId:null===(n=eF.current)||void 0===n?void 0:n.idString}})},onCancel(){setTimeout(()=>{m.ZP.setState({coin1:void 0,coin2:void 0,coin1Amount:void 0,coin2Amount:void 0,focusSide:"coin1",userCursorSide:"coin1"}),m.ZP.getState().refreshConcentrated()},400)}}))})}})]})}function eI(e){var t;let{tokenKey:n,title:i,token:s,disableTokens:o,turnOnTokenVerification:a,onSelectToken:r}=e,[c,d]=(0,P.useState)(!1);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(G.Z,{className:"grid items-center bg-[#141041] rounded-xl py-2 cursor-pointer px-3",onClick:()=>d(!0),children:s?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs text-[#abc4ff80] mb-1",children:i}),(0,l.jsxs)(Z.Z,{className:"items-center gap-2",children:[(0,l.jsx)(_.Z,{token:s}),(0,l.jsx)("div",{className:"text-[#abc4ff] font-medium text-lg",children:null!==(t=s.symbol)&&void 0!==t?t:""}),(0,l.jsx)(b.Z,{size:"sm",className:"text-[#abc4ff]",heroIconName:"chevron-down"})]})]}):(0,l.jsxs)(Z.Z,{className:"text-[#abc4ff80] text-center gap-1.5 items-center px-3 py-2",children:[(0,l.jsx)("div",{children:i}),(0,l.jsx)(b.Z,{size:"sm",className:"text-[#abc4ff80]",heroIconName:"chevron-down"})]})}),(0,l.jsx)(eu.Z,{open:c,onClose:()=>{d(!1)},turnOnTokenVerification:a,canSelectIfInWhiteList:!0,disableTokens:o,onSelectToken:e=>{null==r||r(e,n)}})]})}function eF(e){let{className:t}=e;return(0,l.jsx)(Z.Z,{className:(0,S.m)("items-center justify-between",t),children:(0,l.jsx)(v.Z,{type:"text",className:"text-sm text-[#ABC4FF] opacity-50 px-0",prefix:(0,l.jsx)(b.Z,{heroIconName:"chevron-left",size:"sm"}),onClick:()=>{(0,x.ES)("/clmm/pools")},children:"Back to Concentrated pools"})})}function eL(){p(),(0,f.Z)();let e=(0,o.ZP)(e=>e.isMobile);return(0,l.jsxs)(g.Z,{metaTitle:"Create CLMM Pool - Raydium",mobileBarTitle:"Create CLMM Pool",children:[(0,l.jsx)(eF,{className:"mb-8 mobile:mb-2 sticky z-10 top-0 mobile:-translate-y-2 mobile:bg-[#0f0b2f] mobile:hidden"}),(0,l.jsxs)("div",{className:"pb-10 self-center transition-all duration-500 w-[min(950px,70vw)] mobile:w-[90vw] z-20",children:[!e&&(0,l.jsx)("div",{className:"pb-8 text-2xl mobile:text-lg font-semibold justify-self-start text-white",children:"Create Pool"}),(0,l.jsx)(eT,{}),(0,l.jsx)(h.Z,{className:"items-center my-8"})]})]})}}},function(e){e.O(0,[7239,5830,2820,7664,7980,5194,5469,9774,2888,179],function(){return e(e.s=71716)}),_N_E=e.O()}]);