"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3129],{43724:function(e,i,n){n.d(i,{Vl:function(){return f},f6:function(){return h},zh:function(){return v}});var t=n(95793),l=n(90547),r=n(4465),a=n(81451),s=n(51523),d=n(96662),o=n(53607),c=n(80582),u=n(53002),m=n(13521);function v(){var e,i;let{getBalance:n,owner:t}=u.Z.getState();if(!t)return{valid:!1,reason:"wallet not connected"};let{rewards:l}=m.Z.getState(),d=null===(e=l.find(e=>{var i;return(0,r.aT)(null===(i=e.token)||void 0===i?void 0:i.mint,c.PD)}))||void 0===e?void 0:e.amount,o=(0,a.eg)(null!==(i=n(c.PD))&&void 0!==i?i:0,(0,s.IH)(0,null!=d?d:300));return o?{valid:!0}:{valid:!1,reason:"User must have 300 RAY"}}function f(e){return!e.token&&!e.amount&&!e.startTime&&!e.endTime}function h(e){let{getBalance:i}=u.Z.getState(),{chainTimeOffset:n=0}=d.ZP.getState(),r=new Date(Date.now()+n),c={valid:!0,reason:"",invalidRewardProperties:[]};for(let n of[e].flat()){var m,v,f,h,x;n.token||(c.valid=!1,c.reason="Confirm reward token",c.invalidRewardProperties=[...c.invalidRewardProperties,"token"]),(0,a.$u)(n.amount)||(c.valid=!1,c.reason="Enter ".concat(null!==(f=null===(v=n.token)||void 0===v?void 0:v.symbol)&&void 0!==f?f:"--"," token amount"),c.invalidRewardProperties=[...c.invalidRewardProperties,"token-amount"]);let e=(0,a.eg)(i(n.token),n.amount);e||(c.valid=!1,c.reason="Insufficient ".concat(null!==(x=null===(h=n.token)||void 0===h?void 0:h.symbol)&&void 0!==x?x:"--"," balance"),c.invalidRewardProperties=[...c.invalidRewardProperties,"token-amount"]),n.startTime&&n.endTime||(c.valid=!1,c.reason="Confirm emission time setup",c.invalidRewardProperties=[...c.invalidRewardProperties,"duration"]);let d=n.endTime&&n.startTime&&(null===(m=n.token)||void 0===m?void 0:m.decimals)&&(0,s.hi)((0,l.g9)(n.endTime,n.startTime)/1e3,10**n.token.decimals);(0,a.lt)(n.amount,d)&&(c.valid=!1,c.reason="Emission rewards is lower than min required",c.invalidRewardProperties=[...c.invalidRewardProperties,"emission"]),n.startTime&&(0,t.Sl)(n.startTime,r)||(c.valid=!1,c.reason="Insufficient start time",c.invalidRewardProperties=[...c.invalidRewardProperties,"start-time"]);let u=n.endTime&&n.startTime&&(0,l.g9)(n.endTime,n.startTime);(0,a.eg)(u,o.rX)&&(0,a.G)(u,o.Zf)||(c.valid=!1,c.reason="Insufficient duration",c.invalidRewardProperties=[...c.invalidRewardProperties,"duration"])}return c}},54531:function(e,i,n){n.d(i,{Z:function(){return s}});var t=n(85893);n(67294);var l=n(66180),r=n(70745),a=n(51800);function s(e){let{token1:i,token2:n,size:s,className:d,CoinAvatar1:o,CoinAvatar2:c}=e;return(0,t.jsxs)(a.Z,{className:(0,l.m)("-space-x-1",d),children:[(0,t.jsx)(r.Z,{size:s,token:i,...o}),(0,t.jsx)(r.Z,{size:s,token:n,...c})]})}},34495:function(e,i,n){n.d(i,{Z:function(){return m}});var t=n(85893),l=n(17097),r=n(27993),a=n(67294),s=n(66180),d=n(6994),o=n(54592),c=n(60421),u=n(51800);function m(e){var i,n,m;let{type:v="list-table",className:f,itemClassName:h,rowClassName:x,rowsWrapperClassName:p,headersWrapperClassName:g,list:b,labelMapper:j=Object.keys(b[0]).map(e=>({key:e,label:e})),onClickRow:w,getItemKey:k,renderRowItem:N,renderRowEntry:Z,renderControlButtons:y,renderItemActionButtons:T,renderPropertyLabel:R,onListChange:E}=e,{wrapped:D,controls:P}=function(e,i,n){var t;let l=e.map((e,n)=>null!==(t=i(e,n))&&void 0!==t?t:n).join("-"),[r,s]=(0,a.useState)(e),[d,o]=(0,a.useState)(null==n?void 0:n.searchText);(0,a.useEffect)(()=>{r!==e&&(null==s||s(e))},[l]),(0,a.useEffect)(()=>{var i;r!==e&&(null==n||null===(i=n.onListChange)||void 0===i||i.call(n,r))},[r]);let c=(0,a.useMemo)(()=>r.map((e,i)=>({data:e,destorySelf:()=>{s(e=>e.filter((e,n)=>n!==i))},changeSelf:e=>{s(n=>n.map((n,t)=>t===i?e:n))}})),[r]),u=(0,a.useMemo)(()=>({clear:()=>{s([]),o("")}}),[]);return{wrapped:c,controls:u}}(b,k,{onListChange:E}),C=(0,a.useRef)([]),S=(0,r.u)(j,[Object.keys(null!==(i=b[0])&&void 0!==i?i:{}),b[0]]),I={gridTemplateColumns:S.map(e=>null!==(n=e.cssGridItemWidth)&&void 0!==n?n:"1fr").join(" "),gap:4},A=(e,i)=>{let{data:n}=e;return"list-table"===v?(0,t.jsx)(c.Z,{className:(0,s.m)("text-[#abc4ff] text-xs font-medium py-4 px-5 -mx-5 items-center",(0,r.u)(x,[{index:i,item:n}])),style:I,onClick:()=>{null==w||w({index:i,item:n})},children:S.map(e=>{var r,a;let{key:s,label:d}=e,o=s&&(null===(r=Object.entries(n).find(e=>{let[i,n]=e;return((0,l.hj)(i)?String(i):i).includes(i)}))||void 0===r?void 0:r[1]),c=null===(a=C.current.find(e=>{let{label:i}=e;return i===d}))||void 0===a?void 0:a.el;return(0,t.jsx)("div",{className:h,style:{width:null==c?void 0:c.clientWidth,alignSelf:"stretch"},children:N?N({item:n,index:i,key:s,label:d,wholeDataList:b,allHeaders:C.current,header:c}):s?String(null!=o?o:""):""},d)})}):(0,t.jsx)("div",{className:(0,s.m)("bg-[#141041] p-3 divide-y divide-[#abc4ff1a]",(0,r.u)(x,[{index:i,item:n}])),onClick:()=>{null==w||w({index:i,item:n})},children:S.map(e=>{var r,a;let{key:d,label:o}=e,u=d&&(null===(r=Object.entries(n).find(e=>{let[i,n]=e;return((0,l.hj)(i)?String(i):i).includes(i)}))||void 0===r?void 0:r[1]),m=null===(a=C.current.find(e=>{let{label:i}=e;return i===o}))||void 0===a?void 0:a.el,v=N?N({item:n,index:i,key:d,label:o,wholeDataList:b,allHeaders:C.current,header:m}):d?String(null!=u?u:""):"";return(0,t.jsxs)(c.Z,{className:(0,s.m)("grid-cols-2 py-3",h),children:[(0,t.jsx)("div",{className:"grow text-xs font-semibold text-[#abc4ff80]",children:o}),(0,t.jsx)("div",{className:"text-[#abc4ff] text-xs font-medium",children:v},o)]},o)})})};return"list-table"===v?(0,t.jsxs)(d.Z,{className:(0,s.m)("grid bg-cyberpunk-card-bg border-1.5 border-[rgba(171,196,255,0.2)]",(null==b?void 0:b.length)>0?"":"rounded-bl-none rounded-br-none",f),size:"lg",children:[(0,t.jsx)(c.Z,{className:(0,s.m)("bg-[#141041] px-5 rounded-tr-inherit rounded-tl-inherit items-center",g),style:I,children:S.map((e,i)=>{let{key:n,label:l,renderLabel:r}=e;return(0,t.jsx)(a.Fragment,{children:null!==(m=null==R?void 0:R({key:n,label:l,wholeList:b}))&&void 0!==m?m:(0,t.jsx)("div",{ref:e=>C.current[i]={label:l,el:e},className:"grow text-xs font-semibold text-[#abc4ff80] py-3",children:r?r(b):l})},i)})}),(0,t.jsx)(o.Z,{className:(0,s.m)("px-5 divide-y divide-[#abc4ff1a]",p),children:D.map((e,i)=>{var n;let{data:r,destorySelf:a,changeSelf:s}=e,d=A({data:r,destorySelf:a,changeSelf:s},i),o=null==Z?void 0:Z({contentNode:d,destorySelf:a,changeSelf:s,itemData:r,index:i}),c=null==y?void 0:y({destorySelf:a,changeSelf:s,itemData:r,index:i}),u=null==T?void 0:T({destorySelf:a,changeSelf:s,itemData:r,index:i});return(0,t.jsx)("div",{className:"relative",children:null!=o?o:(0,t.jsxs)(t.Fragment,{children:[d,u,c&&(0,t.jsx)("div",{className:"absolute -right-10 top-1/2 -translate-y-1/2 translate-x-full",children:c})]})},(0,l.Kn)(r)&&null!==(n=null==r?void 0:r.id)&&void 0!==n?n:i)})})]}):(0,t.jsx)(c.Z,{className:(0,s.m)(f,p),children:D.map((e,i)=>{var n;let{data:a,destorySelf:o,changeSelf:c}=e,m=A({data:a,destorySelf:o,changeSelf:c},i),v=null==Z?void 0:Z({contentNode:m,destorySelf:o,changeSelf:c,itemData:a,index:i}),f=null==y?void 0:y({destorySelf:o,changeSelf:c,itemData:a,index:i}),h=null==T?void 0:T({destorySelf:o,changeSelf:c,itemData:a,index:i});return(0,t.jsx)(d.Z,{className:(0,s.m)("grid bg-cyberpunk-card-bg border-1.5 border-[rgba(171,196,255,0.2)] overflow-hidden",(0,r.u)(x,[{item:a,index:i}])),size:"lg",children:v?(0,t.jsx)("div",{className:"relative",children:v}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative",children:[m,h]}),(0,t.jsx)(u.Z,{children:f&&(0,t.jsx)(u.Z,{className:"grow justify-end py-3 px-5",children:f})})]})},(0,l.Kn)(a)&&null!==(n=null==a?void 0:a.id)&&void 0!==n?n:i)})})}},3113:function(e,i,n){n.d(i,{D:function(){return k}});var t=n(85893),l=n(91371),r=n(95657),a=n(13521),s=n(43724),d=n(53002),o=n(11601),c=n(70745),u=n(54592),m=n(60421),v=n(48162),f=n(34495),h=n(51800),x=n(56419),p=n(90547),g=n(99881),b=n(3363),j=n(51523),w=n(72573);function k(e){let{canUserEdit:i,activeReward:n,onTryEdit:k}=e,N=(0,d.Z)(e=>e.owner),Z=(0,l.ZP)(e=>e.isMobile),y=(0,a.Z)(e=>e.rewards),T=y.filter(e=>"existed reward"===e.type),R=y.filter(e=>"new added"===e.type);return(0,t.jsx)(f.Z,{activeItem:n,type:Z?"item-card":"list-table",className:Z?"gap-4":"",list:R,getItemKey:e=>(0,r.pn)(e)+(0,b.ZP)(N),labelMapper:[{label:"Token",cssGridItemWidth:".6fr"},{label:"Token Type"},{label:"Amount"},{label:"Duration",cssGridItemWidth:".6fr"},{label:"Period",cssGridItemWidth:"1.5fr"},{label:"Est. daily rewards"}],rowClassName:e=>{let{item:t}=e;return i?(null==n?void 0:n.id)===t.id?"backdrop-brightness-90 mobile:hidden":"hover:backdrop-brightness-95":""},onClickRow:e=>{let{item:i}=e;null==k||k(i,(null==n?void 0:n.id)===i.id)},renderRowItem:e=>{var i,n,l,r,a;let{item:d,label:v}=e,{valid:f,invalidRewardProperties:b}=(0,s.f6)(d),k=(0,s.Vl)(d);if("Token"===v)return d.token?(0,t.jsxs)(u.Z,{className:"h-full justify-center gap-1",children:[(0,t.jsxs)(h.Z,{className:"gap-1 items-center",children:[(0,t.jsx)(c.Z,{isOptionToken:d.isOptionToken,token:d.token,size:"sm"}),(0,t.jsx)("div",{children:null!==(n=null===(i=d.token)||void 0===i?void 0:i.symbol)&&void 0!==n?n:"UNKNOWN"})]}),(d.isRewardEnded||d.isRewardBeforeStart||d.isRewarding)&&(0,t.jsxs)(h.Z,{className:"gap-1 flex-wrap",children:[d.isRewardEnded&&(0,t.jsx)(o.C,{cssColor:"#da2Eef",children:"Ended"}),d.isRewardBeforeStart&&(0,t.jsx)(o.C,{cssColor:"#abc4ff",children:"Upcoming"}),d.isRewarding&&(0,t.jsx)(o.C,{cssColor:"#39d0d8",children:"Ongoing"})]})]}):(0,t.jsx)("div",{className:k?"":"text-[#DA2EEF]",children:"--"});if("Amount"===v)return d.isRewarding&&"v3/v5"===d.version?"--":(0,t.jsx)(m.Z,{className:"gap-4 h-full",children:k?void 0:(0,t.jsx)(u.Z,{className:"grow break-all justify-center ".concat(!f&&!k&&d.token&&(b.includes("token-amount")||b.includes("emission"))?"text-[#DA2EEF]":""),children:d.amount?(0,g.Z)(d.amount,{fractionLength:null!==(r=null===(l=d.token)||void 0===l?void 0:l.decimals)&&void 0!==r?r:6}):"(unset)"})});if("Token Type"===v)return(0,t.jsx)(m.Z,{className:"h-full",children:k?void 0:(0,t.jsx)(u.Z,{className:"grow break-all justify-center",children:d.token?d.isOptionToken?"Option tokens":"Standard SPL":""})});if("Duration"===v)return d.isRewarding&&"v3/v5"===d.version?"--":(0,t.jsx)(m.Z,{className:"gap-4 h-full",children:k?void 0:(0,t.jsx)(u.Z,{className:"grow break-all justify-center ".concat(!f&&!k&&b.includes("duration")?"text-[#DA2EEF]":""),children:(null==d?void 0:d.startTime)&&d.endTime?((e,i)=>{let n=(0,p.ZP)((0,p.g9)(i,e));return n.hours?"".concat(n.days,"D ").concat(n.hours,"H"):"".concat(n.days,"D")})(d.startTime,d.endTime):"(unset)"})});if("Period"===v)return d.isRewarding&&"v3/v5"===d.version?"--":(0,t.jsx)(m.Z,{className:"gap-4 h-full",children:k?void 0:(0,t.jsxs)(u.Z,{className:"grow whitespace-nowrap justify-center",children:[(0,t.jsx)("div",{className:!f&&!k&&b.includes("start-time")?"text-[#DA2EEF]":"",children:d.startTime?(0,x.xn)(d.startTime):"(unset)"}),(0,t.jsx)("div",{className:!f&&!k&&b.includes("end-time")?"text-[#DA2EEF]":"",children:d.startTime?(0,x.xn)(d.endTime):""})]})});if("Est. daily rewards"===v){if(d.isRewarding&&"v3/v5"===d.version)return"--";let e=(null==d?void 0:d.amount)&&d.startTime&&d.endTime?((e,i,n)=>{let t=n&&i?(0,x.hK)(n)-(0,x.hK)(i):void 0,l=e&&t?(0,j.hi)(e,(0,p.nB)(t).days):void 0;return l})(d.amount,d.startTime,d.endTime):void 0;return(0,t.jsx)(m.Z,{className:"gap-4 h-full",children:k?void 0:(0,t.jsx)(u.Z,{className:"grow justify-center text-xs ".concat(!f&&!k&&b.includes("emission")?"text-[#DA2EEF]":""),children:e?(0,t.jsxs)("div",{children:[(0,w.B)(e)," ",null==d?void 0:null===(a=d.token)||void 0===a?void 0:a.symbol,"/day"]}):"(unset)"})})}},renderControlButtons:i?e=>{let{destorySelf:i,itemData:l}=e;return(0,t.jsxs)(h.Z,{className:"gap-2 mobile:gap-3",children:[(0,t.jsx)(v.Z,{size:"smi",heroIconName:"pencil",className:"clickable clickable-opacity-effect text-[#abc4ff]",onClick:()=>{null==k||k(l,l.id===(null==n?void 0:n.id))}}),(0,t.jsx)(v.Z,{size:"smi",heroIconName:"trash",className:"clickable text-[#abc4ff] ".concat(y.length>1?"hover:text-[#DA2EEF]":"hidden"),onClick:()=>y.length>1&&i()})]})}:void 0,onListChange:e=>{a.Z.setState({rewards:T.concat(e)})}})}}}]);